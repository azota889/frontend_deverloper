(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{fZgH:function(t,e,n){"use strict";n.r(e),n.d(e,"HomeworkModule",function(){return zi});var o=n("ofXK"),i=n("3Pt+"),s=n("0IaG"),c=n("tyNb"),r=n("fB2i"),a=n("IkSl"),l=n("vvyD"),b=n("mYPf"),d=n("Zhhu"),h=n("Avyq"),m=n("AeZ5"),g=n("mrSG"),u=n("quSY"),p=n("tk/3"),f=n("1yaQ"),v=n("FKr1"),C=n("BTbT"),k=n("n1FK"),w=n("3eqI"),x=n("itXk"),_=n("fXoL"),T=n("yTNM"),P=n("gbi4"),O=n("Bjt4"),U=n("nzN9"),y=n("kmnG"),S=n("qFsG"),M=n("bTqV"),I=n("NFeN"),j=n("Qu3c"),N=n("bSwM"),D=n("hZBc"),F=n("wAhq");function E(t,e){1&t&&_.Pb(0,"azt-loading-effect")}function H(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div"),_.Ub(1,"header-backend",56),_.bc("MenuEvent",function(e){return _.Cc(t),_.fc(2).callbackMenuEvent(e)}),_.Tb(),_.Tb()}if(2&t){const t=_.fc(2);_.Cb(1),_.mc("menu_objs",t.menu_objs)("headerTitle","Th\xeam b\xe0i t\u1eadp")("back_link","/admin/homework/classes")}}function z(t,e){if(1&t){const t=_.Vb();_.Ub(0,"header-backend",56),_.bc("MenuEvent",function(e){return _.Cc(t),_.fc(2).callbackMenuEvent(e)}),_.Tb()}if(2&t){const t=_.fc(2);_.mc("menu_objs",t.menu_objs)("headerTitle","C\u1eadp nh\u1eadt b\xe0i t\u1eadp")("back_link",t.backLink)}}function L(t,e){1&t&&(_.Ub(0,"div"),_.Pc(1,"** T\xean b\xe0i t\u1eadp kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng."),_.Tb())}function R(t,e){if(1&t&&(_.Ub(0,"div",57),_.Ub(1,"div"),_.Ub(2,"div",58),_.Ub(3,"div",59),_.Nc(4,L,2,0,"div",55),_.Tb(),_.Tb(),_.Tb(),_.Tb()),2&t){const t=_.fc(2);_.Cb(4),_.mc("ngIf",t.f.nameExam.errors.required)}}function A(t,e){1&t&&(_.Ub(0,"span"),_.Pc(1,"OK"),_.Tb())}function B(t,e){1&t&&(_.Ub(0,"div",60),_.Ub(1,"div",61),_.Ub(2,"span",62),_.Pc(3,"Loading..."),_.Tb(),_.Tb(),_.Tb())}function V(t,e){1&t&&(_.Ub(0,"div",63),_.Pc(1,"Ch\u1ee5p \u1ea3nh b\xe0i t\u1eadp ho\u1eb7c ch\u1ecdn file word, pdf, audio, video c\xf3 s\u1eb5n"),_.Tb())}function G(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div"),_.Ub(1,"div"),_.Ub(2,"button",64),_.bc("click",function(){_.Cc(t);const n=e.index;return _.fc(2).formHomwork.files.splice(n,1)}),_.Ub(3,"mat-icon",65),_.Pc(4,"close"),_.Tb(),_.Tb(),_.Ub(5,"a",66),_.bc("click",function(n){_.Cc(t);const o=e.$implicit;return _.fc(2).onShowFile(n,o,-1)}),_.Ub(6,"span",67),_.Pc(7),_.Tb(),_.Tb(),_.Tb(),_.Tb()}if(2&t){const t=e.$implicit;_.Cb(6),_.mc("title",t.name),_.Cb(1),_.Qc(t.name)}}function W(t,e){if(1&t&&(_.Ub(0,"div",68),_.Pc(1," \u0110ang s\u1eeda b\xe0i t\u1eadp cho l\u1edbp: "),_.Ub(2,"span",69),_.Pc(3),_.Tb(),_.Tb()),2&t){const t=_.fc(2);_.Cb(3),_.Rc(" ",t.classroomObjByHomework.name,"")}}function $(t,e){1&t&&(_.Ub(0,"div",68),_.Pc(1," Ch\u1ecdn l\u1edbp mu\u1ed1n giao b\xe0i "),_.Tb())}function J(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div"),_.Ub(1,"a",72),_.bc("click",function(){return _.Cc(t),_.fc(3).checkAllCheckBox()}),_.Pc(2," Ch\u1ecdn t\u1ea5t c\u1ea3 "),_.Tb(),_.Tb()}}function Y(t,e){if(1&t){const t=_.Vb();_.Ub(0,"a",72),_.bc("click",function(){return _.Cc(t),_.fc(3).clearAllCheckBox()}),_.Pc(1," B\u1ecf ch\u1ecdn t\u1ea5t c\u1ea3 "),_.Tb()}}function Q(t,e){if(1&t&&(_.Ub(0,"div",70),_.Nc(1,J,3,0,"div",0),_.Nc(2,Y,2,0,"ng-template",null,71,_.Oc),_.Tb()),2&t){const t=_.yc(3),e=_.fc(2);_.Cb(1),_.mc("ngIf",0==e.isCheckAll)("ngIfElse",t)}}function q(t,e){if(1&t&&(_.Ub(0,"span",78),_.Pc(1),_.gc(2,"slice"),_.Tb()),2&t){const t=_.fc().index,e=_.fc(3);_.nc("matTooltip",e.classroomObj[t].name),_.Cb(1),_.Qc(_.jc(2,2,e.classroomObj[t].name,0,25)+"..")}}function K(t,e){if(1&t&&(_.Ub(0,"span"),_.Pc(1),_.Tb()),2&t){const t=_.fc().index,e=_.fc(3);_.Cb(1),_.Qc(e.classroomObj[t].name)}}function X(t,e){if(1&t&&(_.Ub(0,"div",75),_.Ub(1,"mat-checkbox",76),_.Nc(2,q,3,6,"span",77),_.Nc(3,K,2,1,"span",55),_.Tb(),_.Tb()),2&t){const t=e.index,n=_.fc(3);_.Cb(1),_.nc("value",n.classroomObj[t].id),_.mc("formControlName",t),_.Cb(1),_.mc("ngIf",n.classroomObj[t].name.length>25),_.Cb(1),_.mc("ngIf",n.classroomObj[t].name.length<=25)}}function Z(t,e){if(1&t&&(_.Ub(0,"div",73),_.Nc(1,X,4,4,"div",74),_.Tb()),2&t){const t=_.fc(2);_.Cb(1),_.mc("ngForOf",t.form.controls.classroomIds.controls)}}function tt(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div"),_.Ub(1,"button",79),_.bc("click",function(){return _.Cc(t),_.fc(2).saveHomeworkProgress()}),_.Pc(2,"L\u01b0u"),_.Tb(),_.Ub(3,"a",80),_.bc("click",function(){return _.Cc(t),_.fc(2).redirectClasses()}),_.Pc(4,"H\u1ee7y"),_.Tb(),_.Tb()}if(2&t){const t=_.fc(2);_.Cb(1),_.mc("disabled",t.form.invalid)}}function et(t,e){if(1&t){const t=_.Vb();_.Ub(0,"button",79),_.bc("click",function(){return _.Cc(t),_.fc(2).updateHomeworkProgress()}),_.Pc(1,"C\u1eadp nh\u1eadt"),_.Tb(),_.Ub(2,"a",80),_.bc("click",function(){return _.Cc(t),_.fc(2).redirectBack()}),_.Pc(3,"H\u1ee7y"),_.Tb()}if(2&t){const t=_.fc(2);_.mc("disabled",t.f.nameExam.errors)}}function nt(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div"),_.Ub(1,"azt-preview-media",81),_.bc("closePreview",function(){return _.Cc(t),_.fc(2).onFileClose()}),_.Tb(),_.Tb()}if(2&t){const t=_.fc(2);_.Cb(1),_.mc("fileOption",t.previewFile)}}const ot=function(){return{standalone:!0}},it=function(){return[]},st=function(t){return{height:250,menubar:!1,plugins:t,toolbar:"bold italic backcolor | alignleft aligncenter alignright alignjustify"}};function ct(t,e){if(1&t){const t=_.Vb();_.Nc(0,H,2,3,"div",0),_.Nc(1,z,1,3,"ng-template",null,2,_.Oc),_.Ub(3,"form",3),_.Ub(4,"div",4),_.Ub(5,"div",5),_.Ub(6,"div",6),_.Ub(7,"div",7),_.Ub(8,"div",8),_.Ub(9,"p",9),_.Pc(10,"T\xean b\xe0i t\u1eadp"),_.Tb(),_.Tb(),_.Ub(11,"div",10),_.Pb(12,"input",11),_.Tb(),_.Ub(13,"div",12),_.Nc(14,R,5,1,"div",13),_.Tb(),_.Tb(),_.Ub(15,"div",7),_.Ub(16,"div",8),_.Ub(17,"p",9),_.Pc(18,"H\u1ea1n n\u1ed9p"),_.Tb(),_.Tb(),_.Ub(19,"div",14),_.Ub(20,"div",15),_.Ub(21,"div",16),_.Ub(22,"div",17),_.Ub(23,"mat-form-field",18),_.Ub(24,"input",19),_.bc("click",function(){return _.Cc(t),_.yc(29).open()}),_.Tb(),_.Ub(25,"button",20),_.bc("click",function(e){return _.Cc(t),_.yc(29).open(),e.stopPropagation()}),_.Ub(26,"mat-icon"),_.Pc(27,"today"),_.Tb(),_.Tb(),_.Ub(28,"ngx-mat-datetime-picker",null,21),_.Nc(30,A,2,0,"ng-template"),_.Tb(),_.Tb(),_.Tb(),_.Ub(31,"div",22),_.Ub(32,"div",23),_.Ub(33,"div"),_.Ub(34,"a",24),_.bc("click",function(){return _.Cc(t),_.fc().clearTime()}),_.Ub(35,"mat-icon",25),_.Pc(36,"cancel"),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Ub(37,"div",26),_.Pc(38,"* B\u1ecf tr\u1ed1ng n\u1ebfu kh\xf4ng gi\u1edbi h\u1ea1n th\u1eddi gian n\u1ed9p b\xe0i"),_.Tb(),_.Tb(),_.Ub(39,"div",27),_.Ub(40,"div",28),_.Ub(41,"div",12),_.Ub(42,"div",29),_.Ub(43,"input",30,31),_.bc("change",function(e){return _.Cc(t),_.fc().onFileSelected(e)}),_.Tb(),_.Ub(45,"a",32),_.bc("click",function(){return _.Cc(t),_.yc(44).click()}),_.Ub(46,"span"),_.Pc(47,"+ Th\xeam file b\xe0i t\xe2p"),_.Tb(),_.Tb(),_.Nc(48,B,4,0,"div",33),_.Nc(49,V,2,0,"div",34),_.Nc(50,G,8,2,"div",35),_.Tb(),_.Tb(),_.Tb(),_.Ub(51,"div",36),_.Ub(52,"editor",37),_.bc("ngModelChange",function(e){return _.Cc(t),_.fc().formHomwork.content=e}),_.Tb(),_.Tb(),_.Tb(),_.Ub(53,"div",38),_.Ub(54,"div",29),_.Ub(55,"mat-checkbox",39),_.Pc(56," Y\xeau c\u1ea7u h\u1ecdc sinh \u0111\u0103ng nh\u1eadp m\u1edbi \u0111\u01b0\u1ee3c n\u1ed9p b\xe0i "),_.Tb(),_.Tb(),_.Ub(57,"div",40),_.Ub(58,"mat-checkbox",41),_.Pc(59," Kh\xf4ng cho h\u1ecdc sinh xem k\u1ebft qu\u1ea3 "),_.Tb(),_.Tb(),_.Tb(),_.Ub(60,"div",38),_.Ub(61,"div",42),_.Ub(62,"div",12),_.Nc(63,W,4,1,"div",43),_.Nc(64,$,2,0,"div",43),_.Nc(65,Q,4,2,"div",44),_.Tb(),_.Tb(),_.Nc(66,Z,2,1,"div",45),_.Tb(),_.Ub(67,"div",46),_.Ub(68,"div",47),_.Nc(69,tt,5,1,"div",0),_.Nc(70,et,4,1,"ng-template",null,48,_.Oc),_.Tb(),_.Tb(),_.Tb(),_.Ub(72,"div",49),_.Ub(73,"div",50),_.Ub(74,"div",51),_.Ub(75,"p",52),_.Pc(76," Th\u01b0 vi\u1ec7n b\xe0i t\u1eadp "),_.Tb(),_.Ub(77,"small"),_.Pc(78," K\xe9o th\u1ea3 b\xe0i t\u1eadp trong th\u01b0 vi\u1ec7n v\xe0o khung b\xean ph\u1ea3i \u0111\u1ec3 giao b\xe0i "),_.Tb(),_.Tb(),_.Ub(79,"div",53),_.Ub(80,"p",54),_.Pc(81," T\xednh n\u0103ng \u0111ang ph\xe1t tri\u1ec3n. "),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Nc(82,nt,2,1,"div",55)}if(2&t){const t=_.yc(2),e=_.yc(29),n=_.yc(71),o=_.fc();_.mc("ngIf",0==o.isCheckUpdate)("ngIfElse",t),_.Cb(3),_.mc("formGroup",o.form),_.Cb(11),_.mc("ngIf",o.f.nameExam.errors),_.Cb(10),_.mc("ngxMatDatetimePicker",e),_.Cb(19),_.mc("ngModelOptions",_.qc(19,ot)),_.Cb(5),_.mc("ngIf",o.loadingUpload),_.Cb(1),_.mc("ngIf",!o.formHomwork.files||0==o.formHomwork.files.length),_.Cb(1),_.mc("ngForOf",o.formHomwork.files),_.Cb(2),_.mc("ngModel",o.formHomwork.content)("ngModelOptions",_.qc(20,ot))("init",_.rc(22,st,_.qc(21,it))),_.Cb(11),_.mc("ngIf",1==o.isCheckUpdate),_.Cb(1),_.mc("ngIf",0==o.isCheckUpdate),_.Cb(1),_.mc("ngIf",0==o.isCheckUpdate),_.Cb(1),_.mc("ngIf",0==o.isCheckUpdate),_.Cb(3),_.mc("ngIf",0==o.isCheckUpdate)("ngIfElse",n),_.Cb(13),_.mc("ngIf",o.isShowPreviewFile)}}const rt={parse:{dateInput:"l, LTS"},display:{dateInput:"DD-MM-YYYY HH:mm:00",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let at=(()=>{class t{constructor(t,e,n,o,s,c,r,a,l,b){this._adapter=t,this.activeRoute=e,this.apiService=n,this.location=o,this.router=s,this.dialog=c,this.commonService=r,this.myPdfService=a,this.localizeService=l,this.fb=b,this.classroomIdParram=+this.commonService.getMyParam(this.activeRoute,"id"),this.isLoading=!0,this.isLoadingMini=!0,this.class={},this.findedHomework=!1,this.subscriptions=new u.a,this.form=new i.k({}),this.status_obj={loading:!1,error:!1,error_obj:{message:""}},this.hasChild=!1,this.checkEditor=!1,this.isEdit=!1,this.currentChild="",this.panelOpenState=!0,this.listHomework=[],this.formHomwork={},this.answersHomework=[],this.studentsClass=[],this.previewFile={},this.isShowPreviewFile=!1,this.oldScroll=0,this.removeID=!1,this.EditIndex=0,this.isSendNote=!1,this.isLoadingdata=!1,this.uploadProgress=-1,this.isClickDelete=!1,this.isClickEdit=!1,this.LogErrorsRequest=!1,this.isSortDateStudents=0,this.isChoseExam=!1,this.linkLoadFrameEmbed="",this.titleLoadFrameEmbed="",this.isLoadFrameEmbed=!1,this.nameClassroom="",this.regex=/(<([^>]+)>)/gi,this.menu_objs=[],this.isShowSeconds=!1,this.mustVerify=0,this.saveConfig=0,this.checkData=!0,this.classroomObj="",this.isCheckAll=!1,this.isCheckUpdate=!1,this.backLink="",this.listIds="",this.loadingUpload=!1,this.contentBase64Count=0,this.homeWorkContent="",this.newListUrls=[],this.convertBlobToBase64=t=>Object(g.a)(this,void 0,void 0,function*(){return new Promise(e=>{var n=new Image;n.crossOrigin="Anonymous",n.addEventListener("load",function(){var t=document.createElement("canvas"),o=t.getContext("2d");t.width=this.width,t.height=this.height,o.drawImage(n,0,0);var i=t.toDataURL("image/png");e(i)},!1),n.src=t})})}disableScroll(){let t=window.pageYOffset||document.documentElement.scrollLeft,e=window.pageXOffset||document.documentElement.scrollTop;window.onscroll=function(){window.scrollTo(t,e)}}enableScroll(){window.onscroll=function(){}}json2Array(t){var e,n=[];e=Object.values(t);for(let o=0;o<e.length;o++)n.push(e[o].id);return n}onFileClose(){this.enableScroll(),this.isShowPreviewFile=!1,this.previewFile=null}onShowFile(t,e,n){this.isShowPreviewFile=!0,this.disableScroll(),this.previewFile=Object.assign(Object.assign({},e),{index:n})}previewExam(t){let e=`${t.link_preview}&azo_token=${this.apiService.getToken()}&frame_open=true`;this.linkLoadFrameEmbed=e,this.titleLoadFrameEmbed="Chi ti\u1ebft \u0111\u1ec1 thi: "+t.title,this.isLoadFrameEmbed=!0}openRemove(t){this.removeID={data:this.listHomework[t],index:t}}callbackMenuEvent(t){}convertFullNumber(t){return t>=10?t:"0"+t}openEdit(t){this.formHomwork=Object.assign({},this.listHomework[t]),this.isEdit=!0,this.EditIndex=t,this.checkEditor=!0,window.scrollTo(0,0)}removeAction(){this.isLoading=!0,this.apiService.DeleteHomework(this.removeID.data.id).subscribe(t=>{1==t.success?(this.listHomework.splice(this.removeID.index,1),this.commonService.snackSuccess("X\xf3a th\xe0nh c\xf4ng b\xe0i t\u1eadp.","")):this.commonService.myTranslate([t.message]).subscribe(e=>{this.commonService.snackError(e[t.message],"")}),this.isLoading=!1,this.removeID=!1})}expandedFirstListHomework(t){for(let e=0;e<this.listHomework.length;e++)this.listHomework[e].expanded=!1;-1!=t&&this.listHomework.length>0&&(this.listHomework[t].expanded=!0,setTimeout(()=>{jQuery("html, body").animate({scrollTop:this.oldScroll},50),this.oldScroll=0},500))}expandedListHomework(t){for(let e=0;e<this.listHomework.length;e++)this.listHomework[e].expanded=!1;-1!=t&&this.listHomework.length>0&&(this.listHomework[t].expanded=!0)}disabledListHomework(t){this.listHomework[t].expanded=!1}openFormHomework(){this.checkEditor=!0,this.isEdit=!1,this.formHomwork={}}checkLengthAndImgContent(t){return t.length<=2e4&&!t.includes("<img src")}findAllSubString(t,e){for(var n=0,o=0,i=[];(o=t.indexOf(e,n))>-1;)i.push(o),n=o+e.length;return i}getTypeFile(t){var e=t.indexOf(";");return t.substring(5,e)}getFileName(t){var e=t.split("").reverse().join(""),n=e.indexOf(";"),o=e.indexOf("/",n);return e.substring(n,o).split("").reverse().join("")}onFileSelected(t){let e=t.target.files,n=!!e&&e[0];0!=n&&(this.loadingUpload=!0,this.uploadProgress=0,Object(C.a)(n).then(t=>{this.apiService.uploadToCdnProgress(t).subscribe(t=>{0==t.success?(this.loadingUpload=!1,this.commonService.snackError("Kh\xf4ng Upload \u0111\u01b0\u1ee3c \u1ea3nh! Vui l\xf2ng th\u1eed l\u1ea1i sau!","")):1==t.success&&(t.type&&t.type==p.c.UploadProgress?this.uploadProgress=Math.round(t.loaded/t.total*100):t.successUpload&&1==t.successUpload&&(Array.isArray(this.formHomwork.files)||(this.formHomwork.files=[]),this.formHomwork.files.push(Object.assign({},t.data)),this.loadingUpload=!1,this.uploadProgress=-1))},t=>{this.LogErrorsRequest=JSON.stringify(t)})}))}redirectBack(){this.commonService.myNavigation(this.backLink)}clearAllCheckBox(){this.form.get("classroomIds").controls.forEach(t=>{t.setValue(!1)}),this.isCheckAll=!1}checkAllCheckBox(){this.form.get("classroomIds").controls.forEach(t=>{t.setValue(!0)}),this.isCheckAll=!0}checkIsChosen(t,e){if(null==e)for(var n=0;n<t.length;n++)this.addNewCheckBox(!1);else for(n=0;n<t.length;n++){for(var o=!1,i=0;i<e.length;i++)t[n].id==e[i].classroomId&&(o=!0);this.addNewCheckBox(o)}}redirectClasses(){this.commonService.myNavigation("/admin/homework/classes")}redirectToSuccess(t){this.commonService.myNavigation("/admin/homework/create-homework-success/"+t)}addNewCheckBox(t){const e=new i.h(t);this.form.get("classroomIds").push(e)}get f(){return this.form.controls}clearTime(){this.form.controls.deadlineHomework.setValue("")}startUploadBlobFile(t,e){if(e&&""!=e){var n=this.getTypeFile(e),o=this.myPdfService.b64toFile(e,this.getFileName(n),n);Object(C.a)(o).then(e=>{this.apiService.uploadToCdn(e).subscribe(e=>{if(1==e.success){var n=Object.assign(Object.assign({},t),{newUrl:e.data.url});this.newListUrls.push(n),this.contentBase64Count-=1,0==this.contentBase64Count&&this.changeContent()}else this.commonService.snackError("Kh\xf4ng Upload \u0111\u01b0\u1ee3c \u1ea3nh! Vui l\xf2ng th\u1eed l\u1ea1i sau!",""),this.isLoading=!1},t=>{this.LogErrorsRequest=JSON.stringify(t),this.commonService.snackError("Kh\xf4ng Upload \u0111\u01b0\u1ee3c \u1ea3nh! Vui l\xf2ng th\u1eed l\u1ea1i sau!",""),this.isLoading=!1})})}else this.commonService.snackError("Kh\xf4ng Upload \u0111\u01b0\u1ee3c \u1ea3nh! Vui l\xf2ng th\u1eed l\u1ea1i sau!",""),this.isLoading=!1}reUploadBlobFile(t){if(t&&t.length>0){this.contentBase64Count=t.length;for(var e=0;e<t.length;e++){new FileReader;const n=t[e],o=n.oldUrl.substring(0,n.oldUrl.length-1);this.convertBlobToBase64(o).then(t=>{this.startUploadBlobFile(n,t)})}}else this.commonService.snackError("Kh\xf4ng Upload \u0111\u01b0\u1ee3c \u1ea3nh! Vui l\xf2ng th\u1eed l\u1ea1i sau!",""),this.isLoading=!1}reUploadBase64File(t){if(t&&t.length>0){this.contentBase64Count=t.length;for(var e=0;e<t.length;e++){const i=t[e],s=i.oldUrl.substring(0,i.oldUrl.length-1);var n=this.getTypeFile(s),o=this.myPdfService.b64toFile(s,this.getFileName(n),n);Object(C.a)(o).then(t=>{this.apiService.uploadToCdn(t).subscribe(t=>{if(1==t.success){var e=Object.assign(Object.assign({},i),{newUrl:t.data.url});this.newListUrls.push(e),this.contentBase64Count-=1,0==this.contentBase64Count&&this.changeContent()}else this.commonService.snackError("Kh\xf4ng Upload \u0111\u01b0\u1ee3c \u1ea3nh! Vui l\xf2ng th\u1eed l\u1ea1i sau!",""),this.isLoading=!1},t=>{this.LogErrorsRequest=JSON.stringify(t),this.commonService.snackError("Kh\xf4ng Upload \u0111\u01b0\u1ee3c \u1ea3nh! Vui l\xf2ng th\u1eed l\u1ea1i sau!",""),this.isLoading=!1})})}}else this.commonService.snackError("Kh\xf4ng Upload \u0111\u01b0\u1ee3c \u1ea3nh! Vui l\xf2ng th\u1eed l\u1ea1i sau!",""),this.isLoading=!1}foundImgInContent(t){var e=this.findAllSubString(t,"<img"),n=[],o=[];e.forEach(e=>{var i=t.indexOf("src=",e),s=t.indexOf('"',Number(i)+5),c=t.substring(Number(i)+5,Number(s)+1);c.includes(";base64")?n.push({oldUrl:c}):c.includes("blob:")&&o.push({oldUrl:c})}),n.length>0?this.reUploadBase64File(n):o.length>0?this.reUploadBlobFile(o):this.changeContent()}changeContent(){this.newListUrls.length>0&&this.newListUrls.forEach(t=>{var e=this.homeWorkContent.replace(t.oldUrl,t.newUrl+'" class="w-100 img-fluid"');this.homeWorkContent=e}),this.isCheckUpdate?this.updateHomeWork():this.saveHomework()}saveHomeworkProgress(){this.isLoading=!0,null==JSON.stringify(this.formHomwork.content)||null==JSON.stringify(this.formHomwork.content)?(this.homeWorkContent="",this.saveHomework()):(this.homeWorkContent=this.formHomwork.content,this.homeWorkContent.includes("<img ")?this.foundImgInContent(this.homeWorkContent):this.saveHomework())}updateHomeworkProgress(){this.isLoading=!0,null==JSON.stringify(this.formHomwork.content)||null==JSON.stringify(this.formHomwork.content)?(this.homeWorkContent="",this.updateHomeWork()):(this.homeWorkContent=this.formHomwork.content,this.homeWorkContent.includes("<img ")?this.foundImgInContent(this.formHomwork.content):this.updateHomeWork())}saveHomework(){let t=this.commonService.getFormObj(this.form);t.deadlineHomework=""===t.deadlineHomework||null===t.deadlineHomework?null:Object(o.x)(t.deadlineHomework,"yyyy-MM-ddTHH:mm:00","en_vn"),t.isCheckLogin=1!=t.isCheckLogin?0:1,t.dontShowMark=1!=t.dontShowMark?0:1,t.whenShowAnswer=1!=t.whenShowAnswer?0:1;const e=t.classroomIds.map((t,e)=>t?this.classroomObj[e].id:null).filter(t=>null!==t);this.apiService.saveHomeWork(t.nameExam,this.homeWorkContent,t.deadlineHomework,null,JSON.stringify(this.formHomwork.files),t.isCheckLogin,t.dontShowMark,t.whenShowAnswer,0,e).subscribe(t=>{1==t.success?(this.isLoading=!1,this.commonService.snackSuccess("T\u1ea1o b\xe0i t\u1eadp th\xe0nh c\xf4ng.",""),this.listHomeworks=t.data.successSaveHomeworkObjs,this.listHomeworks=this.json2Array(this.listHomeworks),this.listIds=JSON.stringify(this.listHomeworks),this.redirectToSuccess(this.listIds)):(this.isLoading=!1,this.commonService.myTranslate([t.message,"lang_cms_common_ok"]).subscribe(e=>{this.commonService.snackError(e[t.message],e.lang_cms_common_ok)}),this.status_obj={loading:!1,error:!0})})}updateHomeWork(){let t=this.commonService.getFormObj(this.form);t.deadlineHomework=""===t.deadlineHomework||null===t.deadlineHomework?null:Object(o.x)(t.deadlineHomework,"yyyy-MM-ddTHH:mm:00 Z","en_vn"),t.isCheckLogin=1!=t.isCheckLogin?0:1,t.dontShowMark=1!=t.dontShowMark?0:1,t.whenShowAnswer=1!=t.whenShowAnswer?0:1;const e=t.classroomIds.map((t,e)=>t?this.classroomObj[e].id:null).filter(t=>null!==t);this.apiService.updateHomework(this.homeworkId,t.nameExam,this.homeWorkContent,t.deadlineHomework,null,JSON.stringify(this.formHomwork.files),t.isCheckLogin,t.dontShowMark,t.whenShowAnswer,0,e).subscribe(t=>{1==t.success?(this.isLoading=!1,this.commonService.snackSuccess("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng.",""),this.redirectBack()):(this.isLoading=!1,this.commonService.myTranslate([t.message,"lang_cms_common_ok"]).subscribe(e=>{this.commonService.snackError(e[t.message],e.lang_cms_common_ok)}),this.status_obj={loading:!1,error:!0})})}getDataClass(t){this.apiService.getAllClass().subscribe(e=>{1==e.success?(this.classroomObj=e.data,this.checkIsChosen(this.classroomObj,this.classroomData),t(!0)):(this.commonService.snackError(e.message,""),t(!1))})}getHomework(t){this.isLoading=!0,this.isCheckUpdate=null!=t&&0!=t&&null!=t,this.getDataClass(e=>{e&&this.isCheckUpdate?this.apiService.getHomework(t).subscribe(t=>{1==t.success?(this.formHomwork.files=this.commonService.parseJson(t.data.homeworkObj.files),this.formHomwork.content=t.data.homeworkObj.content,this.classroomData=t.data.homeworkClassroomObjs,this.classroomObjByHomework=t.data.classroomObj,this.homeworkData=t.data.homeworkObj,this.classId=t.data.classroomObj.id,this.backLink="/admin/homework/score-list/"+this.classId+"/"+this.homeworkId,this.form.patchValue({nameExam:this.homeworkData.name,deadlineHomework:null!=this.homeworkData.deadline?this.homeworkData.deadline:"",isCheckLogin:0!=this.homeworkData.mustVerified,dontShowMark:0!=this.homeworkData.dontShowMark,whenShowAnswer:0!=this.homeworkData.whenShowAnswer}),this.isLoading=!1):(this.commonService.myTranslate([t.message,"lang_cms_common_ok"]).subscribe(e=>{this.commonService.snackError(e[t.message],e.lang_cms_common_ok)}),this.status_obj={loading:!1,error:!0},this.isLoading=!1)}):this.isLoading=!1})}ngOnInit(){Object(x.b)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.homeworkId=this.commonService.getMyParam(this.activeRoute,"id"),this.getHomework(this.homeworkId)}),this.form=this.fb.group({nameExam:new i.h("",i.z.required),deadlineHomework:new i.h(""),isCheckLogin:new i.h(""),dontShowMark:new i.h(""),whenShowAnswer:new i.h(""),classroomIds:this.fb.array([],lt(1))}),this.form.valueChanges.subscribe(t=>{let e=JSON.stringify(t);e!=this.prevData&&(this.prevData=e,this.form.patchValue(t))}),this.commonService.translateMetaData({title:"lang_cms_homework_add_exercise_title",description:"lang_cms_homework_add_exercise_description",image:"lang_cms_test_image"})}ngOnDestroy(){this.subscriptions.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(v.c),_.Ob(c.a),_.Ob(T.a),_.Ob(o.i),_.Ob(c.i),_.Ob(s.b),_.Ob(P.a),_.Ob(O.a),_.Ob(h.e),_.Ob(i.g))},t.\u0275cmp=_.Ib({type:t,selectors:[["app-add-home-work"]],features:[_.Bb([{provide:k.b,useClass:w.a,deps:[v.f,f.a]},{provide:k.a,useValue:rt}])],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],["header",""],[1,"p-3",3,"formGroup"],[1,"container","pb-80"],[1,"row","py-md-4"],[1,"col-md-8","add-homework--form"],[1,"row","m-0","pb-3"],[1,"col-4","col-md-3","add-homework--form__label","text-md-right"],[1,"p-0","m-0"],[1,"col-8","col-md-9","pl-0","pr-0"],["type","text","formControlName","nameExam","placeholder","",1,"form-control","add-homework--form__input"],[1,"row"],["class","col-12 pt-1",4,"ngIf"],[1,"col-8","col-md-9","pl-0","pr-0","add-homework--form__padding"],[1,"add-homework--form__border","d-flex","align-items-center"],[1,"row","m-0","p-0","align-items-center","justify-content-around","homework-box",2,"width","100%"],[1,"col-9","col-md-10","pr-0","pl-0",2,"border","1px solid #ced4da","border-radius","3px"],[1,"myTimePicker","pt-0"],["matInput","","readonly","","formControlName","deadlineHomework",3,"ngxMatDatetimePicker","click"],["mat-icon-button","","matSuffix","",2,"font-size","18px",3,"click"],["durationTime",""],[1,"col-2","col-md-1","pl-0","pr-0"],[1,"pl-1","d-flex","align-items-center","justify-content-center",2,"padding-top","3px"],["matTooltip","\u0110\u1eb7t l\u1ea1i th\u1eddi gian",1,"clickable",2,"color","#3f51b5",3,"click"],[2,"vertical-align","middle"],[1,"clearfix","pt-1"],[1,"row","pt-4","m-0"],[1,"col-12","add-homework--form__title","none-top__border","none-bottom__border"],[1,"col-md-12"],["type","file","name","fileHomework",2,"display","none",3,"ngModelOptions","change"],["formChoseFile",""],[1,"d-flex","align-items-center",2,"color","#3C8DBC",3,"click"],["class","d-flex justify-content-center my-2",4,"ngIf"],["style","color: #747373; font-size: 10px;",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-12","p-0"],["apiKey","ldij13v1886vlrnk42g9bvngyqdc6gxpe8l0n9mo8gdjpg9d",3,"ngModel","ngModelOptions","init","ngModelChange"],[1,"row","m-0","pt-3"],["color","primary","formControlName","isCheckLogin"],[1,"col-md-6"],["color","primary","formControlName","whenShowAnswer"],[1,"col-12","add-homework--form__title","none-bottom__border"],["class","col-9",4,"ngIf"],["class","col-3 text-right",4,"ngIf"],["class","row m-0 p-0 add-homework--form__content none-top__border","style","width:100%;",4,"ngIf"],[1,"row","m-0","pt-4","pb-3"],[1,"col-12","text-right"],["button",""],[1,"col-md-4","px-00"],[1,"library"],[1,"py-3","text-center"],[1,"m-0","font-weight-bold"],[1,"d-flex","library--content","align-items-center","justify-content-center"],[1,"font-weight-bold","m-0","p-0"],[4,"ngIf"],[3,"menu_objs","headerTitle","back_link","MenuEvent"],[1,"col-12","pt-1"],[1,"text-left"],[1,"text-danger"],[1,"d-flex","justify-content-center","my-2"],["role","status",1,"spinner-border","text-secondary"],[1,"sr-only"],[2,"color","#747373","font-size","10px"],[1,"btn","btn-sm",3,"click"],[2,"font-size","15px","padding-top","5px"],[3,"click"],[2,"color","gray",3,"title"],[1,"col-9"],[2,"color","black","font-weight","bold"],[1,"col-3","text-right"],["chosen",""],[1,"clickable",2,"color","#3C8DBC",3,"click"],[1,"row","m-0","p-0","add-homework--form__content","none-top__border",2,"width","100%"],["class","col-sm-6 text-left pl-3 pt-2","formArrayName","classroomIds",4,"ngFor","ngForOf"],["formArrayName","classroomIds",1,"col-sm-6","text-left","pl-3","pt-2"],["color","primary",3,"value","formControlName"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"],[1,"button-save",3,"disabled","click"],[1,"button-cancel",3,"click"],[3,"fileOption","closePreview"]],template:function(t,e){if(1&t&&(_.Nc(0,E,1,0,"azt-loading-effect",0),_.Nc(1,ct,83,24,"ng-template",null,1,_.Oc)),2&t){const t=_.yc(2);_.mc("ngIf",1==e.isLoading)("ngIfElse",t)}},directives:[o.m,U.a,i.B,i.s,i.l,i.d,i.r,i.j,y.d,S.b,k.c,M.b,y.h,I.a,k.d,j.a,o.l,r.a,i.u,N.a,D.a,i.f,F.a],pipes:[o.u],styles:["body[_ngcontent-%COMP%]{overflow-y:auto}.add-homework--form[_ngcontent-%COMP%]{background-color:#fff;padding:10px 8px;border:1px solid #ececec;border-radius:5px}.add-homework--form__label[_ngcontent-%COMP%]{border:1px solid #ced4da;border-bottom-left-radius:.25rem;border-top-left-radius:.25rem}.add-homework--form__label[_ngcontent-%COMP%], .add-homework--form__title[_ngcontent-%COMP%]{padding:.75rem;align-self:center;font-weight:400;line-height:1.5;color:#495057;font-size:1rem;background-color:#e9ecef}.add-homework--form__title[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:5px}.add-homework--form__input[_ngcontent-%COMP%]{height:100%;border-left:0;border-top-left-radius:0;border-bottom-left-radius:0}.add-homework--form__border[_ngcontent-%COMP%]{border-radius:4px;height:100%;border:1px solid #ced4da;border-left:none;border-top-left-radius:0;border-bottom-left-radius:0}.add-homework--form__content[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #f4f4f4;border-radius:3px;padding:10px}.pb-80[_ngcontent-%COMP%]{padding-bottom:80px}.none-top__border[_ngcontent-%COMP%]{border-top-left-radius:0;border-top-right-radius:0}.none-bottom__border[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0}.button-save[_ngcontent-%COMP%]{background-color:#169bd5;color:#fff;padding:8px 32px;text-align:center;text-decoration:none;display:inline-block;font-size:14px;margin:4px 16px;cursor:pointer;border-radius:5px;border:1px solid #169bd5;text-transform:uppercase}.button-save[_ngcontent-%COMP%]:hover{background-color:#0069d9;border-color:#0069d9}.button-cancel[_ngcontent-%COMP%]{background-color:#fff!important;color:#333;padding:8px 32px;text-align:center;text-decoration:none;display:inline-block;font-size:14px;margin:4px 2px;cursor:pointer;border:1px solid #797979;border-radius:5px;text-transform:uppercase}.button-cancel[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.02)!important}.files[_ngcontent-%COMP%]{background:inherit;background-color:#f2f2f2;box-sizing:border-box;border:1px solid #e5e5e5;border-left:0;border-right:0;border-radius:0;box-shadow:none;margin:0 -24px}.files[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{padding:10px 20px}.file[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:5px}.files-custom[_ngcontent-%COMP%]{margin:0}button[_ngcontent-%COMP%]:disabled{background-color:rgba(0,0,0,.12)!important;border-color:rgba(0,0,0,.12)!important}.library[_ngcontent-%COMP%]{background:inherit;background-color:#f9f9f9;box-sizing:border-box;border:1px solid #e9e9e9;border-radius:5px;box-shadow:none;padding:10px}.library--breadcum[_ngcontent-%COMP%]{background:inherit;background-color:#fafafa;border:1px solid #f1f1f1;border-bottom:0;border-radius:3px;border-bottom-right-radius:0;border-bottom-left-radius:0}.library--breadcum[_ngcontent-%COMP%], .library--content[_ngcontent-%COMP%]{box-sizing:border-box;box-shadow:none}.library--content[_ngcontent-%COMP%]{height:100px;background:inherit;background-color:#fff;border:1px solid #f4f4f4;border-radius:3px;border-top-left-radius:0;border-top-right-radius:0;padding:10px}  .mat-checkbox-layout{white-space:normal!important}@media screen and (max-width:768px){.px-00[_ngcontent-%COMP%]{padding-left:0;padding-right:0;margin-top:12px}}@media screen and (max-width:576px){.button-save[_ngcontent-%COMP%]{padding:8px 16px}}.mat-checkbox-indeterminate.mat-accent[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%],  .mat-checkbox-checked.mat-accent.mat-checkbox-disabled .mat-checkbox-background{background-color:#3f51b5!important}"]}),t})();function lt(t=1){return e=>e.controls.map(t=>t.value).reduce((t,e)=>e?t+e:t,0)>=t?null:{required:!0}}var bt=n("UXJo");function dt(t,e){1&t&&(_.Ub(0,"span",17),_.Pc(1,"M\u1edbi T\u1ea1o"),_.Tb())}function ht(t,e){1&t&&(_.Ub(0,"span",18),_.Pc(1,"M\u1edbi T\u1ea1o"),_.Tb())}let mt=(()=>{class t{constructor(t){this.commonService=t,this.isMobile=!1,this.name="",this.dateCreated="",this.deadLine="",this.totalStudent=0,this.totalTakeTest=0,this.homeworkId=0,this.hashId="",this.isNew=0,this.redirectId=new _.o}handleRedirect(t){this.redirectId.emit(t)}ngOnInit(){this.checkWidth()}checkWidth(){this.isMobile=window.innerWidth<768}copyLinkToClipboard(t){return`${location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}/bai-tap/${this.hashId}`}showCopySuccess(){this.commonService.snackSuccess("Sao ch\xe9p \u0111\u01b0\u1eddng d\u1eabn n\u1ed9p b\xe0i th\xe0nh c\xf4ng","")}onResize(t){this.isMobile=t.target.innerWidth<768}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(P.a))},t.\u0275cmp=_.Ib({type:t,selectors:[["azt-home-work-file"]],inputs:{name:"name",dateCreated:"dateCreated",deadLine:"deadLine",totalStudent:"totalStudent",totalTakeTest:"totalTakeTest",homeworkId:"homeworkId",hashId:"hashId",isNew:"isNew"},outputs:{redirectId:"redirectId"},decls:30,vars:13,consts:[[1,"row","mx-0","home-work-file","align-items-center","my-2",3,"resize"],[1,"col-9","pr-0","ellipsis-text",3,"click"],[1,"d-flex","align-items-center"],[1,"align-items-center"],["src","https://5002373-s3user.cloudstorage.com.vn/viwewiin/storage_public/azota_assets/images/u416.svg"],[1,"p-2","align-items-center","ellipsis-text"],[1,"home-work-name","font-size-12","ellipsis-text",3,"matTooltip"],[1,"font-size-12","m-0"],["class","badge badge-success ml-2",4,"ngIf"],[1,"p-0","m-0","font-size-12",2,"color","#0EAFC0"],[1,"col-3",2,"cursor","default"],[1,"d-flex","flex-column","text-center"],["class","badge badge-success",4,"ngIf"],[1,"p-0","m-0","home-work-text"],[1,"p-0","m-0"],["matTooltip","Copy link",1,"btn-copy",3,"cdkCopyToClipboard","click"],[2,"font-size","16px","color","#3c8dbc"],[1,"badge","badge-success","ml-2"],[1,"badge","badge-success"]],template:function(t,e){1&t&&(_.Ub(0,"div",0),_.bc("resize",function(t){return e.onResize(t)},!1,_.Bc),_.Ub(1,"div",1),_.bc("click",function(){return e.handleRedirect(e.homeworkId)}),_.Ub(2,"div",2),_.Ub(3,"div",3),_.Pb(4,"img",4),_.Tb(),_.Ub(5,"div",5),_.Ub(6,"h4",6),_.Pc(7),_.Tb(),_.Ub(8,"div",2),_.Ub(9,"p",7),_.Pc(10),_.gc(11,"date"),_.Tb(),_.Nc(12,dt,2,0,"span",8),_.Tb(),_.Ub(13,"p",9),_.Pc(14),_.gc(15,"date"),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Ub(16,"div",10),_.Ub(17,"div",11),_.Ub(18,"div"),_.Nc(19,ht,2,0,"span",12),_.Tb(),_.Ub(20,"div"),_.Ub(21,"h4",13),_.Pc(22,"\xa0"),_.Tb(),_.Tb(),_.Ub(23,"div"),_.Ub(24,"p",14),_.Pc(25,"\xa0"),_.Tb(),_.Tb(),_.Ub(26,"div"),_.Ub(27,"button",15),_.bc("click",function(){return e.showCopySuccess()}),_.Ub(28,"mat-icon",16),_.Pc(29,"file_copy"),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb()),2&t&&(_.Cb(6),_.nc("matTooltip",e.name),_.Cb(1),_.Qc(e.name),_.Cb(3),_.Rc("Ng\xe0y t\u1ea1o : ",_.ic(11,7,e.dateCreated,"dd/MM/yyyy HH:mm"),""),_.Cb(2),_.mc("ngIf",1==e.isNew&&0==e.isMobile),_.Cb(2),_.Rc("H\u1ea1n n\u1ed9p : ",null!==e.deadLine?_.ic(15,10,e.deadLine,"dd/MM/yyyy HH:mm"):"Kh\xf4ng th\u1eddi h\u1ea1n"," "),_.Cb(5),_.mc("ngIf",1==e.isNew&&1==e.isMobile),_.Cb(8),_.mc("cdkCopyToClipboard",e.copyLinkToClipboard(e.name)))},directives:[j.a,o.m,bt.a,I.a],pipes:[o.e],styles:[".home-work-file[_ngcontent-%COMP%]{background-color:#fff;box-shadow:none;border:1px solid #ececec;border-radius:5px;cursor:pointer}.home-work-name[_ngcontent-%COMP%]{font-weight:500;margin:0!important}.home-work-text[_ngcontent-%COMP%]{color:#a2a2a2;font-size:12px}.font-size-12[_ngcontent-%COMP%]{font-size:12px}.btn-copy[_ngcontent-%COMP%]{padding:0;border:none;background-color:#fff;text-transform:inherit;margin:2px 0 0}.ellipsis-text[_ngcontent-%COMP%]{display:inline-block;text-overflow:ellipsis;overflow:hidden;max-width:99%;white-space:nowrap}.block-home[_ngcontent-%COMP%]{position:relative}@media screen and (max-width:480px){.home-copy[_ngcontent-%COMP%]{display:none}}"]}),t})();function gt(t,e){1&t&&_.Pb(0,"azt-loading-effect")}function ut(t,e){if(1&t){const t=_.Vb();_.Ub(0,"a",18),_.bc("click",function(){_.Cc(t);const e=_.fc().$implicit;return _.fc(3).viewAllHomework(e.id)}),_.Pc(1,"Xem t\u1ea5t c\u1ea3"),_.Tb()}}function pt(t,e){1&t&&(_.Ub(0,"div"),_.Ub(1,"div",19),_.Ub(2,"div",20),_.Ub(3,"p",21),_.Pc(4,"Ch\u01b0a giao b\xe0i t\u1eadp"),_.Tb(),_.Tb(),_.Tb(),_.Tb())}function ft(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div"),_.Ub(1,"azt-home-work-file",23),_.bc("redirectId",function(e){_.Cc(t);const n=_.fc(2).$implicit;return _.fc(3).redirectHomework(e,n.id)}),_.Tb(),_.Tb()}if(2&t){const t=e.$implicit,n=_.fc(2).$implicit;_.Cb(1),_.mc("name",t.name)("dateCreated",t.createdAt)("deadLine",t.deadline)("totalTakeTest",t.count)("totalStudent",n.countStudents)("hashId",t.hashId)("homeworkId",t.id)}}function vt(t,e){if(1&t&&_.Nc(0,ft,2,7,"div",22),2&t){const t=_.fc().$implicit;_.mc("ngForOf",t.homeworks)}}const Ct=function(t){return{"pb-0":t}};function kt(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",10),_.Ub(1,"div",11),_.Ub(2,"div",12),_.Ub(3,"div",13),_.Ub(4,"p",14),_.bc("click",function(){return _.Cc(t),_.fc(3).goToStudentList()}),_.Pc(5),_.Tb(),_.Tb(),_.Ub(6,"div",15),_.Nc(7,ut,2,0,"a",16),_.Tb(),_.Tb(),_.Nc(8,pt,5,0,"div",1),_.Nc(9,vt,1,1,"ng-template",null,17,_.Oc),_.Tb(),_.Tb()}if(2&t){const t=e.$implicit,n=_.yc(10);_.Cb(1),_.mc("ngClass",_.rc(6,Ct,1==t.homeworks.length)),_.Cb(3),_.nc("matTooltip",t.name),_.Cb(1),_.Qc(t.name),_.Cb(2),_.mc("ngIf",0!=t.homeworks.length),_.Cb(1),_.mc("ngIf",0==t.homeworks.length)("ngIfElse",n)}}function wt(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",5),_.Ub(1,"div",6),_.Ub(2,"div",7),_.Ub(3,"a",8),_.bc("click",function(){return _.Cc(t),_.fc(2).goToAddHomework()}),_.Pc(4,"+ T\u1ea1o b\xe0i t\u1eadp"),_.Tb(),_.Tb(),_.Tb(),_.Ub(5,"div",6),_.Nc(6,kt,11,8,"div",9),_.Tb(),_.Tb()}if(2&t){const t=_.fc(2);_.Cb(6),_.mc("ngForOf",t.classObj)}}function xt(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",24),_.Pc(1,' B\u1ea1n ch\u01b0a t\u1ea1o l\u1edbp h\u1ecdc n\xe0o, vui l\xf2ng click v\xe0o "'),_.Ub(2,"a",25),_.bc("click",function(){return _.Cc(t),_.fc(2).redirectToClassList()}),_.Pc(3," T\u1ea1o l\u1edbp "),_.Tb(),_.Pc(4,'" tr\u01b0\u1edbc khi giao b\xe0i t\u1eadp. '),_.Tb()}}function _t(t,e){if(1&t&&(_.Nc(0,wt,7,1,"div",3),_.Nc(1,xt,5,0,"div",4)),2&t){const t=_.fc();_.mc("ngIf",0!=t.classObj.length),_.Cb(1),_.mc("ngIf",0==t.classObj.length)}}let Tt=(()=>{class t{constructor(t,e,n,o,i,s){this.activeRoute=t,this.apiService=e,this.location=n,this.router=o,this.commonService=i,this.localizeService=s,this.isLoading=!1,this.video_objs=[{href:"/faq/0/1_0",title:"H\u01b0\u1edbng d\u1eabn t\u1ea1o b\xe0i t\u1eadp",backLink:"/admin/homework/classes"}]}getAllClass(){this.isLoading=!0,this.apiService.getAllClassInfos().subscribe(t=>{1==t.success?(this.isLoading=!1,this.classObj=t.data):(this.isLoading=!1,this.commonService.myTranslate([t.message]).subscribe(e=>{this.commonService.snackError(e[t.message],"")}))})}goToAddHomework(){this.commonService.myNavigation("/admin/homework/add-new-homework/0")}redirectToClassList(){this.commonService.myNavigation("/admin/student/student-list")}redirectHomework(t,e){this.commonService.myNavigation("/admin/homework/score-list/"+e+"/"+t)}viewAllHomework(t){this.commonService.myNavigation("/admin/homework/homework-list/"+t)}goToStudentList(){this.commonService.myNavigation("/admin/student/student-list")}redirectToStudentList(){this.commonService.myNavigation("/admin/student/student-list")}ngOnInit(){this.video_objs=[{href:"/faq/1_0",title:"H\u01b0\u1edbng d\u1eabn t\u1ea1o b\xe0i t\u1eadp",backLink:"/admin/homework/classes"}],Object(x.b)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.getAllClass()}),this.commonService.translateMetaData({title:"lang_cms_homework_class_list_title",description:"lang_cms_homework_class_list_description",image:"lang_cms_test_image"})}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(c.a),_.Ob(T.a),_.Ob(o.i),_.Ob(c.i),_.Ob(P.a),_.Ob(h.e))},t.\u0275cmp=_.Ib({type:t,selectors:[["app-classes"]],decls:4,vars:5,consts:[[3,"headerTitle","video_links","back_link"],[4,"ngIf","ngIfElse"],["doneLoading",""],["class","container my-3 pb-80",4,"ngIf"],["class","text-center p-5",4,"ngIf"],[1,"container","my-3","pb-80"],[1,"row"],[1,"col-12","text-right"],[1,"btn","btn-success",3,"click"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"classes-remake",3,"ngClass"],[1,"row","m-0","p-0","align-items-center"],[1,"col-8","text-left","text-ellipsis"],[1,"m-0","p-0","text-ellipsis","clickable",3,"matTooltip","click"],[1,"col-4","text-right"],["class","text-right m-0 p-0",3,"click",4,"ngIf"],["homework",""],[1,"text-right","m-0","p-0",3,"click"],[1,"row","text-center",2,"height","86px","align-items","center"],[1,"col-12"],[1,"p-0","m-0"],[4,"ngFor","ngForOf"],[3,"name","dateCreated","deadLine","totalTakeTest","totalStudent","hashId","homeworkId","redirectId"],[1,"text-center","p-5"],[2,"color","#2361ae","font-weight","bold",3,"click"]],template:function(t,e){if(1&t&&(_.Pb(0,"header-backend",0),_.Nc(1,gt,1,0,"azt-loading-effect",1),_.Nc(2,_t,2,2,"ng-template",null,2,_.Oc)),2&t){const t=_.yc(3);_.mc("headerTitle","Danh s\xe1ch b\xe0i t\u1eadp c\xe1c l\u1edbp")("video_links",e.video_objs)("back_link","/admin/testbank/dashboard"),_.Cb(1),_.mc("ngIf",1==e.isLoading)("ngIfElse",t)}},directives:[D.a,o.m,U.a,o.l,o.k,j.a,mt],styles:[".classes-remake[_ngcontent-%COMP%]{box-shadow:0 0 5px rgba(0,0,0,.08);border-radius:5px;background-color:#f3f3f3;padding:10px;margin-bottom:15px;margin-top:15px}.pb-0[_ngcontent-%COMP%]{padding-bottom:.5px!important}.pb-80[_ngcontent-%COMP%]{padding-bottom:80px}.block-else[_ngcontent-%COMP%]{height:50vh;display:flex;flex-direction:column;justify-content:center;align-items:center}.block-else-text[_ngcontent-%COMP%]{font-size:19px;margin-bottom:25px}.text-ellipsis[_ngcontent-%COMP%]{display:inline-block;text-overflow:ellipsis;overflow:hidden;max-width:99%;white-space:nowrap}"]}),t})();var Pt=n("jhN1"),Ot=n("d3UM"),Ut=n("gaSO");function yt(t,e){if(1&t&&(_.Ub(0,"span"),_.Pc(1),_.Tb()),2&t){const t=_.fc(2);_.Cb(1),_.Tc(" ",t.user_obj.id,".",t.user_obj.fullName,".Zalo:",t.user_obj.zalo_id," ")}}function St(t,e){if(1&t&&(_.Ub(0,"span"),_.Pc(1),_.gc(2,"anonymousFullName"),_.gc(3,"anonymousPhone"),_.Tb()),2&t){const t=_.fc(2);_.Cb(1),_.Tc(" ",t.user_obj.id,".",_.hc(2,3,t.user_obj),".",_.hc(3,5,t.user_obj.phone)," ")}}const Mt=function(t){return[t]};function It(t,e){if(1&t&&(_.Ub(0,"div",1),_.Ub(1,"p"),_.Ub(2,"a",2),_.gc(3,"localize"),_.Pc(4,"V\xe0o m\xe0n h\xecnh h\u1ecdc sinh"),_.Tb(),_.Tb(),_.Ub(5,"p"),_.Pc(6," T\xe0i kho\u1ea3n: "),_.Nc(7,yt,2,3,"span",3),_.Nc(8,St,4,7,"span",3),_.Tb(),_.Ub(9,"p"),_.Pc(10,"Tham gia nh\xf3m h\u1ed7 tr\u1ee3 s\u1eed d\u1ee5ng n\u1ec1n t\u1ea3ng Azota: "),_.Ub(11,"a",4),_.Pc(12,"https://facebook.com/groups/azota.vn"),_.Tb(),_.Tb(),_.Ub(13,"p"),_.Ub(14,"a",5),_.Pb(15,"img",6),_.Tb(),_.Ub(16,"a",7),_.Pb(17,"img",8),_.Tb(),_.Tb(),_.Tb()),2&t){const t=_.fc();_.Cb(2),_.mc("routerLink",_.rc(5,Mt,_.hc(3,3,"/student/dashboard/0"))),_.Cb(5),_.mc("ngIf",t.user_obj.zalo_id),_.Cb(1),_.mc("ngIf",!t.user_obj.zalo_id)}}let jt=(()=>{class t{constructor(t,e){this.apiService=t,this.commonService=e,this.user_obj={id:0}}ngOnInit(){this.user_obj=this.apiService.getUserObj(),this.commonService.loginMessage.subscribe(t=>{this.user_obj=this.apiService.getUserObj()})}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(T.a),_.Ob(P.a))},t.\u0275cmp=_.Ib({type:t,selectors:[["homework-backend-footer"]],decls:1,vars:1,consts:[["class","text-center mt-3",4,"ngIf"],[1,"text-center","mt-3"],[3,"routerLink"],[4,"ngIf"],["href","https://www.facebook.com/groups/azota.vn","target","_blank"],["href","https://play.google.com/store/apps/details?id=azt.azt","target","_blank","rel","noopener"],["alt","Get it on Google Play","src","https://play.google.com/intl/en_us/badges/images/generic/en_badge_web_generic.png","width","150px",1,"play-store-badge"],["href","https://apps.apple.com/ua/app/azota/id1556025594","target","_blank","rel","noopener"],["alt","Download on the App Store","src","https://5002373-s3user.cloudstorage.com.vn/viwewiin/storage_public/azota_assets/images/2928664.svg","width","130px",1,"app-store-badge"]],template:function(t,e){1&t&&_.Nc(0,It,18,7,"div",0),2&t&&_.mc("ngIf",0!=e.user_obj.id)},directives:[o.m,c.k],pipes:[h.d,Ut.a,Ut.b],encapsulation:2}),t})();function Nt(t,e){if(1&t&&(_.Ub(0,"mat-option",15),_.Pc(1),_.Tb()),2&t){const t=e.$implicit;_.mc("value",t.id),_.Cb(1),_.Rc(" ",t.name," ")}}function Dt(t,e){1&t&&_.Pb(0,"azt-loading-effect")}function Ft(t,e){1&t&&(_.Ub(0,"div",18),_.Ub(1,"span",19),_.Pc(2,"Kh\xf4ng c\xf3 n\u1ed9i dung b\u1ea1n \u0111ang t\xecm ki\u1ebfm!"),_.Tb(),_.Tb())}function Et(t,e){1&t&&(_.Ub(0,"span",33),_.Pc(1,"Mi\u1ec5n ph\xed"),_.Tb())}function Ht(t,e){if(1&t&&(_.Ub(0,"span",34),_.Pc(1),_.gc(2,"number"),_.Tb()),2&t){const t=_.fc().$implicit;_.Cb(1),_.Rc("",_.hc(2,1,t.amount)," Azo")}}function zt(t,e){1&t&&(_.Ub(0,"span",35),_.Pc(1,"\u0110\xe3 mua"),_.Tb())}function Lt(t,e){if(1&t&&(_.Ub(0,"a",36),_.Ub(1,"mat-icon",37),_.Pc(2,"save_alt"),_.Tb(),_.Pc(3," T\u1ea3i v\u1ec1 "),_.Tb()),2&t){const t=_.fc().$implicit;_.mc("href",t.linkDownload,_.Gc)("download",t.linkDownload)}}function Rt(t,e){if(1&t){const t=_.Vb();_.Ub(0,"a",38),_.bc("click",function(){_.Cc(t);const e=_.fc().$implicit,n=_.fc(3);return n.openBuyContentDialog(e,n.user_obj.amount)}),_.Ub(1,"mat-icon",37),_.Pc(2,"shopping_cart"),_.Tb(),_.Pc(3," Mua "),_.Tb()}}function At(t,e){if(1&t&&(_.Ub(0,"div",22),_.Ub(1,"div",23),_.Pb(2,"img",24),_.gc(3,"mycdn"),_.Ub(4,"div",25),_.Ub(5,"p",26),_.Pc(6),_.Tb(),_.Ub(7,"div",27),_.Nc(8,Et,2,0,"span",28),_.Nc(9,Ht,3,3,"span",29),_.Nc(10,zt,2,0,"span",30),_.Nc(11,Lt,4,2,"a",31),_.Nc(12,Rt,4,0,"a",32),_.Tb(),_.Tb(),_.Tb(),_.Tb()),2&t){const t=e.$implicit;_.Cb(2),_.nc("src",_.hc(3,7,t.thumb),_.Gc),_.Cb(4),_.Qc(t.name),_.Cb(2),_.mc("ngIf",0==t.amount),_.Cb(1),_.mc("ngIf",0!=t.amount&&-1!=t.amount),_.Cb(1),_.mc("ngIf",-1==t.amount),_.Cb(1),_.mc("ngIf",0==t.amount||-1==t.amount),_.Cb(1),_.mc("ngIf",t.amount>0)}}function Bt(t,e){if(1&t&&(_.Ub(0,"div",20),_.Nc(1,At,13,9,"div",21),_.Tb()),2&t){const t=_.fc(2);_.Cb(1),_.mc("ngForOf",t.objs)}}function Vt(t,e){if(1&t&&(_.Nc(0,Ft,3,0,"div",16),_.Nc(1,Bt,2,1,"ng-template",null,17,_.Oc)),2&t){const t=_.yc(2),e=_.fc();_.mc("ngIf",e.isNullData)("ngIfElse",t)}}function Gt(t,e){if(1&t&&(_.Ub(0,"div",12),_.Ub(1,"p",13),_.Pc(2,"B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n mua"),_.Tb(),_.Ub(3,"p"),_.Ub(4,"span",5),_.Pc(5),_.Tb(),_.Tb(),_.Ub(6,"span",14),_.Pc(7," V\u1edbi gi\xe1 "),_.Ub(8,"span",15),_.Pc(9),_.gc(10,"number"),_.Tb(),_.Pc(11," kh\xf4ng?"),_.Tb(),_.Tb()),2&t){const t=_.fc();_.Cb(5),_.Rc(" ",t.content.name,""),_.Cb(4),_.Rc("",_.hc(10,2,t.content.amount)," Azo")}}function Wt(t,e){if(1&t&&(_.Ub(0,"div",12),_.Ub(1,"p",13),_.Pc(2,"B\u1ea1n kh\xf4ng \u0111\u1ee7 Azo \u0111\u1ec3 mua"),_.Tb(),_.Ub(3,"p"),_.Ub(4,"span",5),_.Pc(5),_.Tb(),_.Tb(),_.Ub(6,"span",14),_.Pc(7," V\u1edbi gi\xe1 "),_.Ub(8,"span",15),_.Pc(9),_.gc(10,"number"),_.Tb(),_.Tb(),_.Tb()),2&t){const t=_.fc();_.Cb(5),_.Rc(" ",t.content.name,""),_.Cb(4),_.Rc("",_.hc(10,2,t.content.amount)," Azo")}}function $t(t,e){1&t&&(_.Ub(0,"div",4),_.Ub(1,"span",16),_.Pc(2," Vui l\xf2ng n\u1ea1p th\xeam Azo!"),_.Tb(),_.Tb())}function Jt(t,e){if(1&t){const t=_.Vb();_.Ub(0,"button",17),_.bc("click",function(){return _.Cc(t),_.fc().buyContent()}),_.Ub(1,"mat-icon",18),_.Pc(2,"shopping_cart"),_.Tb(),_.Pc(3," Mua "),_.Tb()}}function Yt(t,e){if(1&t){const t=_.Vb();_.Ub(0,"button",17),_.bc("click",function(){return _.Cc(t),_.fc().gotoPack()}),_.Ub(1,"mat-icon",18),_.Pc(2,"account_balance_wallet"),_.Tb(),_.Pc(3," N\u1ea1p th\xeam "),_.Tb()}}let Qt=(()=>{class t{constructor(t,e,n,o,s,c,r,a){this.activeRoute=t,this.commonService=e,this.apiService=n,this.formBuilder=o,this.router=s,this.dialog=c,this.localize=r,this.dom=a,this.error_msg="",this.error=!1,this.options={path:"https://assets8.lottiefiles.com/packages/lf20_eebdoe5f.json"},this.isNullData=!1,this.form=new i.k({}),this.subscriptions=new u.a,this.status_obj={loading:!1,error:!1,error_obj:{message:""}},this.objs=[],this.categories=[],this.user_obj={},this.selectedValue=""}getData(){this.status_obj={loading:!0,error:!1,error_obj:{message:""}},this.subscriptions.add(this.apiService.getAllFileContent().subscribe(t=>{1==t.success?(this.objs=t.data,this.status_obj={loading:!1,error:!1,error_obj:{message:""}}):this.status_obj={loading:!1,error:!0,error_obj:{message:t.message}}}))}getInfo(){this.status_obj={loading:!0,error:!1,error_obj:{message:""}},this.subscriptions.add(this.apiService.getInfo().subscribe(t=>{1==t.success?(this.user_obj=t.data,this.status_obj={loading:!1,error:!1,error_obj:{message:""}}):this.status_obj={loading:!1,error:!0,error_obj:{message:t.message}}}))}getCategories(){this.status_obj={loading:!0,error:!1,error_obj:{message:""}},this.subscriptions.add(this.apiService.getCategoryFileContent().subscribe(t=>{1==t.success?(this.categories=t.data,this.status_obj={loading:!1,error:!1,error_obj:{message:""}}):this.status_obj={loading:!1,error:!0,error_obj:{message:t.message}}}))}openBuyContentDialog(t,e){this.openDialog(!(t.amount>e),t,e)}openDialog(t,e,n){this.dialog.open(qt,{width:"380px",panelClass:"buyContentDialogBox",data:{status:t,content:e,userAmount:n}}).afterClosed().subscribe(t=>{})}selectValue(t){this.status_obj={loading:!0,error:!1,error_obj:{message:""}},this.subscriptions.add(this.apiService.getFileContent(t).subscribe(t=>{1==t.success?t.data.length>0?(this.isNullData=!1,this.objs=t.data,this.status_obj={loading:!1,error:!1,error_obj:{message:""}}):(this.isNullData=!0,this.status_obj={loading:!1,error:!1,error_obj:{message:""}}):this.status_obj={loading:!1,error:!0,error_obj:{message:t.message}}}))}onSearch(){var t=this.commonService.getFormObj(this.form);this.status_obj={loading:!0,error:!1,error_obj:{message:""}},""==t.searchContent?(this.isNullData=!1,this.subscriptions.add(this.apiService.getAllFileContent().subscribe(t=>{1==t.success?(this.objs=t.data,this.status_obj={loading:!1,error:!1,error_obj:{message:""}}):this.status_obj={loading:!1,error:!0,error_obj:{message:t.message}}}))):this.subscriptions.add(this.apiService.searchFileContent(t.searchContent).subscribe(t=>{1==t.success?(0==t.data.length?this.isNullData=!0:this.objs=t.data,this.status_obj={loading:!1,error:!1,error_obj:{message:""}}):this.status_obj={loading:!1,error:!0,error_obj:{message:t.message}}}))}ngOnInit(){Object(x.b)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([t,e])=>{this.getData(),this.getInfo(),this.getCategories()}),this.form=this.formBuilder.group({searchContent:new i.h("",i.z.required)}),this.commonService.translateMetaData({title:"lang_cms_homework_content_store_title",description:"lang_cms_homework_content_store_description",image:"lang_cms_test_image"})}ngOnDestroy(){this.subscriptions.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(c.a),_.Ob(P.a),_.Ob(T.a),_.Ob(i.g),_.Ob(c.i),_.Ob(s.b),_.Ob(h.e),_.Ob(Pt.b))},t.\u0275cmp=_.Ib({type:t,selectors:[["app-content-store"]],decls:19,vars:6,consts:[[3,"headerTitle","back_link"],[1,"container-fluid","component-wrap","W1200","m-auto","mt-3"],[3,"formGroup"],[1,"row","justify-content-between"],[1,"col-md-8","mt-2"],[1,"search-bar","form-group"],[1,"input-group-append"],["type","text","formControlName","searchContent","placeholder","T\xecm ki\u1ebfm",1,"form-control",3,"keyup.enter"],["id","basic-addon2",1,"input-group-text",3,"click"],[1,"col-md-4","content-store-select"],["appearance","fill"],["placeholder","T\u1ea5t c\u1ea3","name","category",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["doneLoading",""],[3,"value"],["class","text-center mt-3 mb-3",4,"ngIf","ngIfElse"],["HasData",""],[1,"text-center","mt-3","mb-3"],[1,"h3"],[1,"row","mt-2"],["class","col-12 col-sm-4 col-md-4 col-lg-4 mb-2",4,"ngFor","ngForOf"],[1,"col-12","col-sm-4","col-md-4","col-lg-4","mb-2"],[1,"card"],["alt","thumbnail",1,"card-img-top",3,"src"],[1,"card-body"],[1,"truncate","card-text"],[1,"d-flex","justify-content-between","actionZone"],["class","azo-price text-warning",4,"ngIf"],["class","azo-price text-danger",4,"ngIf"],["class","azo-price ",4,"ngIf"],["class","actionBtn","target","_blank",3,"href","download",4,"ngIf"],["class","actionBtn","style","cursor: pointer;",3,"click",4,"ngIf"],[1,"azo-price","text-warning"],[1,"azo-price","text-danger"],[1,"azo-price"],["target","_blank",1,"actionBtn",3,"href","download"],[2,"vertical-align","sub"],[1,"actionBtn",2,"cursor","pointer",3,"click"]],template:function(t,e){if(1&t&&(_.Pb(0,"header-backend",0),_.Ub(1,"div",1),_.Ub(2,"form",2),_.Ub(3,"div",3),_.Ub(4,"div",4),_.Ub(5,"div",5),_.Ub(6,"div",6),_.Ub(7,"input",7),_.bc("keyup.enter",function(){return e.onSearch()}),_.Tb(),_.Ub(8,"button",8),_.bc("click",function(){return e.onSearch()}),_.Ub(9,"mat-icon"),_.Pc(10,"search"),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Ub(11,"div",9),_.Ub(12,"mat-form-field",10),_.Ub(13,"mat-select",11),_.bc("selectionChange",function(t){return e.selectValue(t.value)}),_.Nc(14,Nt,2,2,"mat-option",12),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Nc(15,Dt,1,0,"azt-loading-effect",13),_.Nc(16,Vt,3,2,"ng-template",null,14,_.Oc),_.Tb(),_.Pb(18,"homework-backend-footer")),2&t){const t=_.yc(17);_.mc("headerTitle","Ng\xe2n h\xe0ng n\u1ed9i dung")("back_link","/admin/homework/classes"),_.Cb(2),_.mc("formGroup",e.form),_.Cb(12),_.mc("ngForOf",e.categories),_.Cb(1),_.mc("ngIf",e.status_obj.loading)("ngIfElse",t)}},directives:[D.a,i.B,i.s,i.l,i.d,i.r,i.j,I.a,y.d,Ot.a,o.l,o.m,jt,v.n,U.a],pipes:[Ut.g,o.f],styles:[".dashboard__header[_ngcontent-%COMP%]{background-color:#0089a7;border-radius:5px}.border-test[_ngcontent-%COMP%]{border:1px solid red;min-height:50px}.azo-price[_ngcontent-%COMP%]{padding-top:5px;font-weight:500;font-size:1.2rem}.content-store-select[_ngcontent-%COMP%]{margin-top:5px}.card-text[_ngcontent-%COMP%]{display:block!important;max-width:245px!important}.content-header[_ngcontent-%COMP%]{background:inherit;background-color:#0089a7;padding:20px 0}.user_amount[_ngcontent-%COMP%]{background:inherit;background-color:#009cbe;border:none;border-radius:5px;padding:10px;box-shadow:none}.user_amount[_ngcontent-%COMP%]:hover{text-decoration:none}.mat-card-avatar[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%;flex-shrink:0;object-fit:cover}@media (max-width:992px){.dashboard__header[_ngcontent-%COMP%]{background-color:#0089a7;margin-top:-15px;margin-left:-15px;margin-right:-15px;border-radius:0}}@media (max-width:768px){.azo-price[_ngcontent-%COMP%]{padding-top:5px;font-weight:400;font-size:14px;text-align:center;position:absolute;left:20px}.actionZone[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center!important}.card-text[_ngcontent-%COMP%]{display:block!important;max-width:120px}.header-col-center[_ngcontent-%COMP%]{text-align:center!important;display:block!important}.header-col-center[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{margin-left:auto!important;margin-right:auto!important;margin-bottom:10px!important;text-align:center!important;display:inline-flex!important}.user_amount[_ngcontent-%COMP%]{margin-left:0!important;margin-bottom:10px!important}.content-header[_ngcontent-%COMP%]{padding:20px 0 0}}"]}),t})(),qt=(()=>{class t{constructor(t,e,n,o,i){this.dialogRef=t,this.apiService=e,this.commonService=n,this.router=o,this.data=i,this.status_obj={loading:!1,error:!1,error_obj:{message:""}},this.subscriptions=new u.a,this.content={}}getData(){this.status_obj={loading:!0,error:!1,error_obj:{message:""}},this.data.content?(this.content=this.data.content,this.status_obj={loading:!1,error:!1,error_obj:{message:""}}):this.status_obj={loading:!1,error:!0,error_obj:{message:"Kh\xf4ng t\u1ea3i \u0111\u01b0\u1ee3c d\u1eef li\u1ec7u"}}}buyContent(){this.status_obj={loading:!0,error:!1,error_obj:{message:""}},this.subscriptions.add(this.apiService.buyFileContent(this.content.id).subscribe(t=>{1==t.success?(this.status_obj={loading:!1,error:!1,error_obj:{message:""}},this.commonService.snackSuccess("B\u1ea1n \u0111\xe3 mua th\xe0nh c\xf4ng!",""),this.onNoClick(),setTimeout(()=>{document.location.reload()},3e3)):(this.status_obj={loading:!1,error:!0,error_obj:{message:t.message}},this.commonService.snackError("Thanh to\xe1n kh\xf4ng th\xe0nh c\xf4ng!",""),this.onNoClick(),setTimeout(()=>{document.location.reload()},3e3))}))}gotoPack(){this.onNoClick(),this.commonService.myNavigation("/admin/homework/azo-pack")}ngOnInit(){this.getData()}onNoClick(){this.dialogRef.close()}ngOnDestroy(){this.subscriptions.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(s.g),_.Ob(T.a),_.Ob(P.a),_.Ob(c.i),_.Ob(s.a))},t.\u0275cmp=_.Ib({type:t,selectors:[["buy-content-dialog"]],decls:19,vars:10,consts:[[3,"hidden"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"text-center"],[1,"h5"],["class","text-left","style","border: 1px dashed red; padding: 10px 5px; border-radius: 5px;",4,"ngIf"],["class","text-center",4,"ngIf"],["mat-dialog-actions","",1,"float-right"],[1,"zalo-share-button"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-secondary",2,"margin-left","15px",3,"click"],[1,"text-left",2,"border","1px dashed red","padding","10px 5px","border-radius","5px"],[1,"h5","text-danger"],[1,"h5","mt-1"],[1,"text-danger"],[1,"h6","mt-2","mb-1"],[1,"btn","btn-primary",3,"click"],[2,"font-size","23px","vertical-align","sub"]],template:function(t,e){1&t&&(_.Ub(0,"div",0),_.Ub(1,"div",1),_.Ub(2,"div",2),_.Ub(3,"span",3),_.Pc(4,"..."),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Ub(5,"div",0),_.Ub(6,"div",4),_.Ub(7,"p",5),_.Pc(8),_.gc(9,"number"),_.Tb(),_.Tb(),_.Nc(10,Gt,12,4,"div",6),_.Nc(11,Wt,11,4,"div",6),_.Nc(12,$t,3,0,"div",7),_.Tb(),_.Ub(13,"div",8),_.Ub(14,"div",9),_.Nc(15,Jt,4,0,"button",10),_.Nc(16,Yt,4,0,"button",10),_.Tb(),_.Ub(17,"button",11),_.bc("click",function(){return e.onNoClick()}),_.Pc(18,"H\u1ee7y"),_.Tb(),_.Tb()),2&t&&(_.mc("hidden",!e.status_obj.loading),_.Cb(5),_.mc("hidden",e.status_obj.loading),_.Cb(3),_.Rc("B\u1ea1n \u0111ang c\xf3 ",_.hc(9,8,e.data.userAmount)," Azo"),_.Cb(2),_.mc("ngIf",e.data.status),_.Cb(1),_.mc("ngIf",!e.data.status),_.Cb(1),_.mc("ngIf",!e.data.status),_.Cb(3),_.mc("ngIf",e.data.status),_.Cb(1),_.mc("ngIf",!e.data.status))},directives:[o.m,s.c,I.a],pipes:[o.f],encapsulation:2}),t})();var Kt=n("xOOu"),Xt=n("Iab2"),Zt=n("sYmb");function te(t,e){1&t&&_.Pb(0,"azt-loading-effect")}function ee(t,e){1&t&&_.Pb(0,"span",27)}function ne(t,e){1&t&&(_.Ub(0,"mat-icon",28),_.Pc(1," check_circle "),_.Tb())}function oe(t,e){if(1&t&&(_.Ub(0,"div",10),_.Nc(1,ee,1,0,"span",25),_.Nc(2,ne,2,0,"mat-icon",26),_.Pc(3),_.Tb()),2&t){const t=_.fc(3);_.Cb(1),_.mc("ngIf",t.countDonePdf<t.cur_export_arr.length),_.Cb(1),_.mc("ngIf",t.countDonePdf==t.cur_export_arr.length),_.Cb(1),_.Tc(" ",t.countDonePdf<t.cur_export_arr.length?"Vui l\xf2ng kh\xf4ng t\u1ea3i l\u1ea1i ho\u1eb7c cu\u1ed9n trang, \u0111ang x\u1eed l\xfd...":"Ho\xe0n th\xe0nh",": ",t.countDonePdf," / ",t.cur_export_arr.length," ")}}function ie(t,e){if(1&t&&(_.Ub(0,"div",29),_.Ub(1,"span",30),_.Pc(2),_.Tb(),_.Ub(3,"span",23),_.Pc(4,"\u0110i\u1ec3m"),_.Tb(),_.Tb()),2&t){const t=_.fc(3);_.mc("hidden",t.cur_answer.result.hideMark),_.Cb(2),_.Qc(t.cur_answer.result.point)}}function se(t,e){if(1&t&&(_.Sb(0),_.Pc(1),_.Rb()),2&t){const t=_.fc(10);_.Cb(1),_.Rc(" ",t.getJson(t.cur_answer.result.staticTextConfig).textCorrect," ")}}function ce(t,e){if(1&t&&(_.Sb(0),_.Pc(1),_.Rb()),2&t){const t=_.fc(10);_.Cb(1),_.Rc(" ",t.getJson(t.cur_answer.result.staticTextConfig).textWrong," ")}}function re(t,e){if(1&t&&_.Pb(0,"img",43),2&t){const t=_.fc(10);_.nc("src","assets/images/classlive/"+t.getJson(t.cur_answer.result.staticTextConfig).urlImgCorrect,_.Gc)}}function ae(t,e){if(1&t&&_.Pb(0,"img",43),2&t){const t=_.fc(10);_.nc("src","assets/images/classlive/"+t.getJson(t.cur_answer.result.staticTextConfig).urlImgWrong,_.Gc)}}const le=function(t,e,n,o,i){return{"font-family":t,color:e,"font-size":n,position:"absolute","z-index":2,top:o,left:i}};function be(t,e){if(1&t&&(_.Sb(0),_.Ub(1,"span",40),_.Nc(2,se,2,1,"ng-container",41),_.Nc(3,ce,2,1,"ng-container",41),_.Nc(4,re,1,1,"img",42),_.Nc(5,ae,1,1,"img",42),_.Tb(),_.Rb()),2&t){const t=e.$implicit,n=_.fc(9);_.Cb(1),_.mc("ngStyle",_.vc(5,le,n.getJson(n.cur_answer.result.staticTextConfig).fontText,n.getJson(n.cur_answer.result.staticTextConfig).fontColor,n.getJson(n.cur_answer.result.staticTextConfig).fontSize+"px",t.y+"px",t.x+"px")),_.Cb(1),_.mc("ngIf",n.getJson(n.cur_answer.result.staticTextConfig).useCorrectText&&"correct"==t.value),_.Cb(1),_.mc("ngIf",n.getJson(n.cur_answer.result.staticTextConfig).useCorrectText&&"wrong"==t.value),_.Cb(1),_.mc("ngIf",!n.getJson(n.cur_answer.result.staticTextConfig).useCorrectText&&"correct"==t.value),_.Cb(1),_.mc("ngIf",!n.getJson(n.cur_answer.result.staticTextConfig).useWrongText&&"wrong"==t.value)}}function de(t,e){if(1&t&&_.Nc(0,be,6,11,"ng-container",33),2&t){const t=_.fc(4).index,e=_.fc(4);_.mc("ngForOf",e.cur_answer.result.pages[t].staticText)}}const he=function(t,e,n,o,i,s,c){return{"font-family":t,color:e,"font-size":n,display:"block",width:o,"line-height":1.3,position:"absolute","z-index":3,"text-align":i,top:s,left:c}};function me(t,e){if(1&t&&(_.Sb(0),_.Pb(1,"span",44),_.gc(2,"formatNoteBreak"),_.Rb()),2&t){const t=e.$implicit,n=_.fc(5).index,o=_.fc(4);_.Cb(1),_.mc("ngStyle",_.wc(4,he,t.textStyle.font,t.textStyle.color,t.textStyle.size+"px",o.cur_answer.result.pages[n].width-t.x+"px",t.textStyle.align,t.y+"px",t.x+"px"))("innerHtml",_.hc(2,2,t.value),_.Dc)}}function ge(t,e){if(1&t&&_.Nc(0,me,3,12,"ng-container",33),2&t){const t=_.fc(4).index,e=_.fc(4);_.mc("ngForOf",e.cur_answer.result.pages[t].objText)}}const ue=function(t){return{"rotated-img":t}},pe=function(t,e,n){return{"width.px":t,"aspect-ratio":e,transform:n}};function fe(t,e){if(1&t&&(_.Pb(0,"img",38),_.Pb(1,"img",39),_.Nc(2,de,1,1,"ng-template",37),_.Nc(3,ge,1,1,"ng-template",37)),2&t){const t=_.fc(3),e=t.$implicit,n=t.index,o=_.fc(4);_.nc("src",e.url,_.Gc),_.mc("ngClass",_.rc(7,ue,o.isRightRotation(o.cur_answer.result.pages[n].rotation)))("ngStyle",_.tc(9,pe,o.isRightRotation(o.cur_answer.result.pages[n].rotation)?o.cur_answer.result.pages[n].height:o.cur_answer.result.pages[n].width,o.cur_answer.result.pages[n].width/o.cur_answer.result.pages[n].height,"rotate("+o.cur_answer.result.pages[n].rotation+"deg)")),_.Db("data-ratio",o.cur_answer.result.pages[n].width/o.cur_answer.result.pages[n].height),_.Cb(1),_.nc("src",o.cur_answer.result.pages[n].draw,_.Gc),_.Cb(1),_.mc("ngIf",o.cur_answer.result.pages[n].staticText.length>0),_.Cb(1),_.mc("ngIf",o.cur_answer.result.pages[n].objText.length>0)}}function ve(t,e){if(1&t&&(_.Sb(0),_.Nc(1,fe,4,13,"ng-template",37),_.Rb()),2&t){const t=_.fc(6);_.Cb(1),_.mc("ngIf",t.cur_answer.result.pages)}}function Ce(t,e){if(1&t&&(_.Ub(0,"div",45),_.Ub(1,"em"),_.Pc(2,"File t\u1ea3i l\xean c\xf3 d\u1ea1ng "),_.Ub(3,"b"),_.Pc(4),_.Tb(),_.Pc(5,", h\u1ec7 th\u1ed1ng kh\xf4ng h\u1ed7 tr\u1ee3 xu\u1ea5t pdf \u0111\u1ecbnh d\u1ea1ng n\xe0y."),_.Tb(),_.Tb()),2&t){const t=_.fc(2).$implicit,e=_.fc(4);_.Cb(4),_.Rc(".",e.getExtensionFile(t.url),"")}}const ke=function(t,e){return{position:"relative","width.px":t,"height.px":e,display:"flex","justify-content":"center","align-items":"center"}},we=function(){return["png","jpg","jpeg","pdf"]};function xe(t,e){if(1&t&&(_.Ub(0,"div",35),_.Nc(1,ve,2,1,"ng-container",0),_.Nc(2,Ce,6,1,"ng-template",null,36,_.Oc),_.Tb()),2&t){const t=_.yc(3),e=_.fc(),n=e.index,o=e.$implicit,i=_.fc(4);_.mc("ngStyle",_.sc(3,ke,i.cur_answer.result.pages[n].width,i.cur_answer.result.pages[n].height)),_.Cb(1),_.mc("ngIf",_.qc(6,we).includes(i.getExtensionFile(o.url))||-1!==o.url.indexOf("data:image"))("ngIfElse",t)}}function _e(t,e){if(1&t&&(_.Sb(0),_.Nc(1,xe,4,7,"div",34),_.Rb()),2&t){const t=_.fc(4);_.Cb(1),_.mc("ngIf",t.cur_answer.result.pages)}}function Te(t,e){if(1&t&&(_.Ub(0,"div",31),_.Ub(1,"div",32),_.Pc(2,"B\xe0i l\xe0m:"),_.Tb(),_.Nc(3,_e,2,1,"ng-container",33),_.Tb()),2&t){const t=_.fc(3);_.Cb(3),_.mc("ngForOf",t.cur_answer.files)}}function Pe(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",4),_.Ub(1,"div",5),_.Ub(2,"div",6),_.Ub(3,"div",7),_.Ub(4,"div",8),_.Ub(5,"h1",9),_.Pc(6,"Xu\u1ea5t b\xe0i l\xe0m ra PDF"),_.Tb(),_.Ub(7,"div",10),_.Pc(8),_.Tb(),_.Ub(9,"div",10),_.Ub(10,"button",11),_.bc("click",function(){_.Cc(t);const e=_.fc(2);return e.openDialog(e.submited_students)}),_.Pc(11," Ti\u1ebfp t\u1ee5c"),_.Tb(),_.Tb(),_.Nc(12,oe,4,5,"div",12),_.Ub(13,"div",13),_.Ub(14,"div",14),_.Ub(15,"h2",15),_.Pc(16),_.Tb(),_.Ub(17,"div",16),_.Ub(18,"div"),_.Ub(19,"h3",17),_.Pc(20),_.Tb(),_.Ub(21,"h3",17),_.Pc(22),_.Tb(),_.Tb(),_.Ub(23,"div"),_.Ub(24,"h3",17),_.Pc(25),_.Tb(),_.Tb(),_.Tb(),_.Ub(26,"div",18),_.Ub(27,"div",19),_.Nc(28,ie,5,2,"div",20),_.Ub(29,"div",21),_.Ub(30,"textarea",22),_.Pc(31,"                        "),_.Tb(),_.Ub(32,"span",23),_.Pc(33,"L\u1eddi ph\xea c\u1ee7a gi\xe1o vi\xean"),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Nc(34,Te,4,1,"div",24),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb()}if(2&t){const t=_.fc(2);_.Cb(8),_.Rc(" S\u1ed1 h\u1ecdc sinh \u0111\xe3 \u0111\u01b0\u1ee3c ch\u1ea5m b\xe0i: ",t.submited_students.length," "),_.Cb(4),_.mc("ngIf",t.isProcessingPdf),_.Cb(4),_.Rc("H\u1ecd v\xe0 t\xean: ",t.cur_answer.fullName,""),_.Cb(4),_.Rc("L\u1edbp: ",t.data.classroomObj.name,""),_.Cb(2),_.Rc("B\xe0i t\u1eadp: ",t.data.homeworkObj.name,""),_.Cb(3),_.Rc("M\xe3 b\xe0i l\xe0m: ",t.cur_answer.id,""),_.Cb(3),_.mc("ngIf",t.cur_answer.result),_.Cb(2),_.mc("value",t.cur_answer.result.comment),_.Cb(4),_.mc("ngIf",t.cur_answer.result)}}function Oe(t,e){1&t&&(_.Ub(0,"div",46),_.Ub(1,"div",47),_.Pc(2,"B\u1ea1n ch\u01b0a ch\u1ea5m b\xe0i cho b\u1ea5t k\xec h\u1ecdc sinh n\xe0o trong l\u1edbp n\xe0y, b\u1ea1n ch\u1ec9 xu\u1ea5t \u0111\u01b0\u1ee3c PDF khi \u0111\xe3 ch\u1ea5m \xedt nh\u1ea5t m\u1ed9t h\u1ecdc sinh"),_.Tb(),_.Tb())}function Ue(t,e){if(1&t&&(_.Nc(0,Pe,35,9,"div",2),_.Nc(1,Oe,3,0,"ng-template",null,3,_.Oc)),2&t){const t=_.yc(2),e=_.fc();_.mc("ngIf",e.submited_students.length>0)("ngIfElse",t)}}function ye(t,e){if(1&t&&(_.Ub(0,"mat-checkbox",10),_.Pc(1),_.Tb()),2&t){const t=e.index,n=_.fc();_.mc("checked",n.form.value.exports[t])("formControlName",t),_.Cb(1),_.Sc(" ",t+1,". ",n.data.resultsArr[t].fullName," ")}}const Se=function(t){return{selects:t}};let Me=(()=>{class t{constructor(t,e,n,o,i,s,c,r){this.cd=t,this.apiService=e,this.dialog=n,this.commonService=o,this.translate=i,this.localize=s,this.activeRoute=c,this.router=r,this.cur_answer={id:12345},this.data={},this.submited_students=[],this.countDonePdf=0,this.myZip=new Kt,this.cur_export_arr=[],this.doneConvertUserFiles=!1,this.doneConvertUserResults=!1,this.studentsInClassResults=[],this.studentsNotInClassResults=[],this.isLoading=!1,this.isProcessingPdf=!1,this.convertUrlToBase64_ForUserFiles=t=>Object(g.a)(this,void 0,void 0,function*(){if(["png","jpg","jpeg","pdf"].includes(this.getExtensionFile(t.url)))try{const e=yield fetch(t.url+"?t="+(new Date).getTime()),n=yield e.blob();return new Promise(t=>{const e=new FileReader;e.readAsDataURL(n),e.onloadend=()=>{t(e.result)}}).then(e=>{t.url=e})}catch(e){console.log("Kh\xf4ng th\u1ec3 fetch url n\xe0y, \u1ea3nh n\xe0y s\u1ebd kh\xf4ng \u0111\u01b0\u1ee3c hi\u1ec3n th\u1ecb tr\xean file pdf: "+t.url)}else console.log("Kh\xf4ng h\u1ed7 tr\u1ee3 export \u0111\u1ecbnh d\u1ea1ng n\xe0y: "+t.url)}),this.convertUrlToBase64_ForUserResult=t=>Object(g.a)(this,void 0,void 0,function*(){try{const e=yield fetch(t.draw+"?t="+(new Date).getTime()),n=yield e.blob();return new Promise(t=>{const e=new FileReader;e.readAsDataURL(n),e.onloadend=()=>{t(e.result)}}).then(e=>{t.draw=e})}catch(e){console.log("Kh\xf4ng th\u1ec3 fetch url n\xe0y, \u1ea3nh n\xe0y s\u1ebd kh\xf4ng \u0111\u01b0\u1ee3c hi\u1ec3n th\u1ecb tr\xean file pdf: "+t.url)}})}get class_id(){return this.activeRoute.snapshot.paramMap.get("class_id")}get homework_id(){return this.activeRoute.snapshot.paramMap.get("id")}isRightRotation(t){return 1==Math.abs(t/90%2)}changeSizeHeightImage(t,e){var n=e.children;for(let o=0;o<n.length;o++)"IMG"===n[o].tagName&&(n[o].style.height=t+"px",n[o].style.width="auto")}floorSizeImage(t){var e=t.children;for(let o=0;o<e.length;o++)if("IMG"===e[o].tagName){let t=e[o].getBoundingClientRect();if(e[o].classList.contains("rotated-img")){e[o].style.width=Math.floor(t.width)+"px";var n=e[o].getAttribute("data-ratio");e[o].style.height=Math.floor(t.width/n)+"px"}else e[o].style.height=Math.floor(t.height)+"px",e[o].style.width=Math.floor(t.width)+"px"}}convertMargitPagePdf(){var t,e=document.getElementById("multipleChoiceWrap");if(e){const c=(null==e?void 0:e.getBoundingClientRect().width)/210*297;var n=!1;n=null===(t=document.getElementById("multipleChoiceWrapHeader"))||void 0===t?void 0:t.getBoundingClientRect().height;var o=document.getElementById("essayPdfTitle");if(o){n+=o.getBoundingClientRect().height;var i=document.getElementsByClassName("essayPdfImage"),s=0;for(let t=0;t<i.length;t++)i[t].getBoundingClientRect().height>0&&(0===s?(i[t].getBoundingClientRect().height>c-n&&this.changeSizeHeightImage(c-n,i[t]),n+=i[t].getBoundingClientRect().height):(i[t].getBoundingClientRect().height>c&&this.changeSizeHeightImage(c-n,i[t]),i[t].style.marginTop=Math.floor(c-n)+"px",n=i[t].getBoundingClientRect().height),this.floorSizeImage(i[t]),s++)}}}handleError(t){this.commonService.myTranslate([t.message,"lang_cms_common_ok"]).subscribe(e=>{this.commonService.snackError(e[t.message],e.lang_cms_common_ok)})}getJson(t){return JSON.parse(t)}getExtensionFile(t){var e=t.split(".");return e.length<=1?"":e[e.length-1].toLocaleLowerCase().split("_")[0]}processUserFilesAsync(){this.cur_answer.files=""!=this.cur_answer.files?JSON.parse(this.cur_answer.files):[];const t=this.cur_answer.files.map(this.convertUrlToBase64_ForUserFiles);return Promise.all(t).then(()=>{console.log("done process all files")})}processUserResultAsync(){this.cur_answer.result=JSON.parse(this.cur_answer.result);const t=this.cur_answer.result.pages.map(this.convertUrlToBase64_ForUserResult);return Promise.all(t).then(()=>{console.log("done process all result images")})}openDialog(t){this.dialog.open(Ie,{width:"1100px",data:{resultsArr:t}}).afterClosed().subscribe(e=>{if(e){const n=[];for(let o=0;o<e.selects.length;o++)e.selects[o]&&n.push(t[o]);this.zipAll(n)}})}create_pdf(){return Object(g.a)(this,void 0,void 0,function*(){this.convertMargitPagePdf();var t=document.getElementById("multipleChoiceWrap");if(t)return yield html2pdf().set({pagebreak:{mode:"avoid-all"},image:{type:"jpeg",quality:1},html2canvas:{logging:!0,useCORS:!0},jsPDF:{unit:"in",format:"a4",orientation:"p"}}).from(t).output("blob")})}finalSaveAll(){this.myZip.generateAsync({type:"blob"}).then(t=>{this.countDonePdf++;let e=this.data.classroomObj.name+"_"+this.data.homeworkObj.name+"_homework_result.zip";Object(Xt.saveAs)(t,e)},t=>{console.log(t)})}zipAll(t){return Object(g.a)(this,void 0,void 0,function*(){this.isProcessingPdf=!0,this.countDonePdf=0,this.cur_export_arr=t,this.myZip=new Kt,console.log(t);for(const n of t){const o=yield this.apiService.getSubmittedAnswersAsync(n.answer.id);if(1==o.success){this.cur_answer=o.data.answerObj,this.cur_answer.fullName=n.fullName,yield this.processUserFilesAsync(),this.cur_answer.result&&(yield this.processUserResultAsync()),console.log("start create pdf");try{const t=yield this.create_pdf();this.myZip.file(`results/${this.cur_answer.fullName}_${this.cur_answer.id}.pdf`,t)}catch(e){console.log(e)}this.countDonePdf<t.length-1&&this.countDonePdf++}else this.handleError(o)}console.log("YAHHH, ALL DONE!!!!!"),this.finalSaveAll()})}getData(){this.class_id&&this.homework_id?this.apiService.GetStudentsHomework(parseInt(this.homework_id),parseInt(this.class_id)).subscribe(t=>{1==t.success?(this.data=t.data,this.submited_students=t.data.studentObjs.filter(t=>t.confirmedAt),this.submited_students.length>0?this.apiService.getSubmittedAnswers(this.submited_students[0].answer.id).subscribe(e=>{if(1==e.success){if(this.cur_answer=e.data.answerObj,this.cur_answer.fullName=this.submited_students[0].fullName,this.cur_answer.files){this.cur_answer.files=this.getJson(this.cur_answer.files);for(let t=0;t<this.cur_answer.files.length;t++)this.cur_answer.files[t].url&&(this.cur_answer.files[t].url=this.commonService.getMyCdn(this.cur_answer.files[t].url)),this.cur_answer.files[t].thumb&&(this.cur_answer.files[t].thumb=this.commonService.getMyCdn(this.cur_answer.files[t].thumb))}if(this.cur_answer.result){this.cur_answer.result=this.getJson(this.cur_answer.result);for(let t=0;t<this.cur_answer.result.pages.length;t++)this.cur_answer.result.pages[t].backgroundImage&&(this.cur_answer.result.pages[t].backgroundImage=this.commonService.getMyCdn(this.cur_answer.result.pages[t].backgroundImage)),this.cur_answer.result.pages[t].draw&&(this.cur_answer.result.pages[t].draw=this.commonService.getMyCdn(this.cur_answer.result.pages[t].draw))}this.isLoading=!1}else this.isLoading=!1,this.handleError(t)}):(this.isLoading=!1,console.log("Ch\u01b0a c\xf3 h\u1ecdc sinh n\xe0o n\u1ed9p b\xe0i!"))):(this.isLoading=!1,this.handleError(t))}):(this.isLoading=!1,this.commonService.snackError("Kh\xf4ng l\u1ea5y \u0111\u01b0\u1ee3c th\xf4ng tin l\u1edbp h\u1ecdc, b\xe0i t\u1eadp",""))}ngOnInit(){this.isLoading=!0,this.commonService.loadScriptPromises([{source:"https://wewiin.nyc3.cdn.digitaloceanspaces.com/storage_public/azota_assets/js/html2pdf.bundle.js",name:"html2pdf.bundle.js"}]).then(()=>{this.commonService.translateMetaData({title:"Xu\u1ea5t PDF b\xe0i t\u1eadp",description:"Xu\u1ea5t pdf b\xe0i t\u1eadp",image:"lang_cms_test_image"}),this.getData()})}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(_.h),_.Ob(T.a),_.Ob(s.b),_.Ob(P.a),_.Ob(Zt.c),_.Ob(h.e),_.Ob(c.a),_.Ob(c.i))},t.\u0275cmp=_.Ib({type:t,selectors:[["app-export-homework"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],["id","test_review_container","class","container-fluid mt-2",4,"ngIf","ngIfElse"],["noSubmit",""],["id","test_review_container",1,"container-fluid","mt-2"],["id","tabRowExam",1,"row",2,"margin-bottom","10px"],["id","test_review_area",1,"col"],["id","col_examContent_wrap",2,"width","1100px!important","margin","0 auto"],["id","mbTestContent"],[1,"text-center"],[1,"buttons-area","mb-3","text-center"],[1,"btn","btn-info",3,"click"],["class","buttons-area mb-3 text-center",4,"ngIf"],["id","multipleChoiceWrap",1,"exportPdfModeIndex"],["id","multipleChoiceWrapHeader"],[1,"mb-1","text-center"],[1,"d-flex","justify-content-between"],[1,"mb-0"],["id","teacherMessage",1,"mt-5"],[1,"contentNote"],["class","box-point",3,"hidden",4,"ngIf"],[1,"box-msg"],["readonly","",1,"note",3,"value"],[1,"cap"],["style","text-align: -webkit-center;",4,"ngIf"],["style","color: darkgrey;","class","spinner-border spinner-border-sm","role","status",4,"ngIf"],["style","color: green; vertical-align: bottom;",4,"ngIf"],["role","status",1,"spinner-border","spinner-border-sm",2,"color","darkgrey"],[2,"color","green","vertical-align","bottom"],[1,"box-point",3,"hidden"],[1,"point"],[2,"text-align","-webkit-center"],["id","essayPdfTitle",1,"h4","my-3"],[4,"ngFor","ngForOf"],["class","mb-2 essayPdfImage",3,"ngStyle",4,"ngIf"],[1,"mb-2","essayPdfImage",3,"ngStyle"],["noSupportMedia",""],[3,"ngIf"],["alt","",1,"user-img","img_respon",3,"ngClass","ngStyle","src"],["alt","",1,"user-img","img_respon",2,"position","absolute","z-index","1","top","0","left","0",3,"src"],[3,"ngStyle"],[4,"ngIf"],["alt","",3,"src",4,"ngIf"],["alt","",3,"src"],[3,"ngStyle","innerHtml"],["id","unsupportFallback"],[2,"padding","50px"],[1,"alert","alert-info"]],template:function(t,e){if(1&t&&(_.Nc(0,te,1,0,"azt-loading-effect",0),_.Nc(1,Ue,3,2,"ng-template",null,1,_.Oc)),2&t){const t=_.yc(2);_.mc("ngIf",e.isLoading)("ngIfElse",t)}},directives:[o.m,U.a,I.a,o.l,o.n,o.k],pipes:[Ut.f],styles:["#test_review_container[_ngcontent-%COMP%]{background:#ecf0f5;flex:auto;padding-top:15px}#tester-info[_ngcontent-%COMP%]{width:300px;padding:15px;background-color:#fff;margin:0 auto;position:sticky;top:10px;max-height:calc(100vh - 10px);display:flex;flex-direction:column;max-width:100%;border-radius:3px;border:1px solid #f1f1f1}#short_cut_mobile[_ngcontent-%COMP%]{display:none}#fullPoint[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid #f1f1f1;background-color:#fafafa;padding:10px;margin-top:15px;align-items:center}#fullPoint[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{font-weight:500;font-size:130%}.tested-times[_ngcontent-%COMP%]{margin-top:15px}.tested-times[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{border:1px solid #f1f1f1;background-color:#fafafa;padding:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;border:1px solid #f1f1f1;border-top:none;margin-bottom:0;background-color:#fff;padding:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.select[_ngcontent-%COMP%]{font-weight:500}.tested-times[_ngcontent-%COMP%]:last-child{flex:auto;overflow:auto}#multipleChoiceWrapHeader[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px}.exportPdfModeIndex[_ngcontent-%COMP%]{background-color:#fff;padding-top:30px;padding-bottom:30px}#unsupportFallback[_ngcontent-%COMP%]{width:750px;height:350px;border:1px solid grey;border-radius:3px;display:flex;align-items:center;justify-content:center}#teacherMessage[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]{display:flex}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]   .cap[_ngcontent-%COMP%]{position:absolute;top:-30px;font-family:font_chu_dep;font-weight:700;font-size:25px}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]   .box-point[_ngcontent-%COMP%]{width:200px;min-width:200px;min-height:200px;border:2px solid #333;border-right:none;position:relative;display:flex;align-items:center;justify-content:center;padding:15px}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]   .box-point[_ngcontent-%COMP%]   span.point[_ngcontent-%COMP%]{color:red;font-size:60px;font-family:font_chu_dep}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]   .box-msg[_ngcontent-%COMP%]{border:2px solid #333;padding:15px;position:relative;flex:auto;min-height:200px}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]   .box-msg[_ngcontent-%COMP%]   textarea.note[_ngcontent-%COMP%]{width:100%;height:100%;border:none;color:red;font-family:font_chu_dep;font-size:24px;line-height:1.5}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]   .box-msg[_ngcontent-%COMP%]   .cap[_ngcontent-%COMP%]{left:300px}.fading_layer[_ngcontent-%COMP%]{position:absolute;z-index:9;background-color:hsla(0,0%,100%,.8901960784313725);width:100%;height:100%;top:0;left:0;padding-top:200px;text-align:center;color:#a9a9a9;font-size:16px}#filterWrap[_ngcontent-%COMP%]{position:absolute;right:0;top:-4px;z-index:2}.viewRight[_ngcontent-%COMP%]   .incorrect[_ngcontent-%COMP%], .viewWrong[_ngcontent-%COMP%]   .correct[_ngcontent-%COMP%]{display:none}#col_examContent_wrap[_ngcontent-%COMP%]{width:1100px;margin:0 auto}#col_examContent_wrap[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{position:fixed;right:5px;top:50%;z-index:3;font-size:35px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;background-color:hsla(0,0%,78.8%,.47843137254901963);border-radius:50%;color:#fff;margin-top:-20px}#col_examContent_wrap[_ngcontent-%COMP%] > mat-icon.prev_icon[_ngcontent-%COMP%]{left:5px}#mbTestContent[_ngcontent-%COMP%]{position:relative}#mbTestContent[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{display:none;position:absolute;top:12px;color:#646464;z-index:100}#test_review_container.toggleNavInfo[_ngcontent-%COMP%]   #col_std_info[_ngcontent-%COMP%]{left:0}#close_button[_ngcontent-%COMP%]{color:red;position:absolute;right:5px;top:5px}@media screen and (max-width:320px){#tester-info[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width:480px){#mbTestContent[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{display:inline-block}#test_review_container[_ngcontent-%COMP%]{padding-top:0}#col_std_info[_ngcontent-%COMP%]{position:fixed;top:0;left:-100%;z-index:99999;background:rgba(0,0,0,.611764705882353);bottom:0;padding:0;transition:all .5s}#short_cut_mobile[_ngcontent-%COMP%]{display:flex;font-weight:500;font-size:18px;justify-content:space-between;color:#4a4a4a}#header-app-component[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-child{padding-left:0!important}#tester-info[_ngcontent-%COMP%]{margin:0;position:relative;height:100%;max-height:unset;top:0}#multipleChoiceWrap[_ngcontent-%COMP%]{padding-right:5px;padding-left:5px;padding-top:5px}}.buttons-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-transform:none!important}@media screen and (max-width:1600px){#col_examContent_wrap[_ngcontent-%COMP%]{width:100%}}"]}),t})(),Ie=(()=>{class t{constructor(t,e,n,o,s,c,r){this.dialogRef=t,this.apiService=e,this.router=n,this.commonService=o,this.localizeService=s,this.fb=c,this.data=r,this.form=new i.k({}),this.isSelectAll=!1}get exportsFormArray(){return this.form.controls.exports}get countSelected(){return this.exportsFormArray.value.filter(t=>!0===t).length}selectAll(){const t=[];this.data.resultsArr.forEach(()=>{t.push(this.isSelectAll)}),this.form.controls.exports.setValue(t)}ngOnInit(){this.form=this.fb.group({exports:new i.e([],je(1))}),this.data.resultsArr.forEach(()=>{this.exportsFormArray.push(new i.h(!1))})}onNoClick(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(s.g),_.Ob(T.a),_.Ob(c.i),_.Ob(P.a),_.Ob(h.e),_.Ob(i.g),_.Ob(s.a))},t.\u0275cmp=_.Ib({type:t,selectors:[["what-export-dialog"]],decls:17,vars:9,consts:[[1,"text-center","mb-2"],[1,"h4"],[1,"clickable","d-flex","align-items-center",2,"font-weight","500"],["color","primary",1,"example-margin",3,"ngModel","ngModelChange"],["mat-dialog-content","",1,"mt-3"],[3,"formGroup"],["formArrayName","exports","ngFor","",3,"ngForOf"],[1,"text-right"],["mat-raised-button","",1,"mr-2",3,"click"],["mat-raised-button","","color","warn",3,"disabled","mat-dialog-close"],["color","primary",1,"mr-2","mb-2",3,"checked","formControlName"]],template:function(t,e){1&t&&(_.Ub(0,"div",0),_.Ub(1,"span",1),_.Pc(2," Ch\u1ecdn nh\u1eefng h\u1ecdc sinh c\u1ea7n xu\u1ea5t PDF!"),_.Tb(),_.Tb(),_.Ub(3,"p"),_.Ub(4,"i"),_.Pc(5),_.Tb(),_.Tb(),_.Ub(6,"span",2),_.Ub(7,"mat-checkbox",3),_.bc("ngModelChange",function(t){return e.isSelectAll=t})("ngModelChange",function(){return e.selectAll()}),_.Pc(8),_.Tb(),_.Tb(),_.Ub(9,"div",4),_.Ub(10,"form",5),_.Nc(11,ye,2,4,"ng-template",6),_.Tb(),_.Tb(),_.Ub(12,"div",7),_.Ub(13,"button",8),_.bc("click",function(){return e.onNoClick()}),_.Pc(14,"H\u1ee7y b\u1ecf"),_.Tb(),_.Ub(15,"button",9),_.Pc(16,"\u0110\u1ed3ng \xfd"),_.Tb(),_.Tb()),2&t&&(_.Cb(5),_.Rc("*** Vi\u1ec7c xu\u1ea5t PDF c\u1ea7n nhi\u1ec1u th\u1eddi gian, b\u1ea1n n\xean xu\u1ea5t t\u1ed1i \u0111a m\u1ed7i l\u1ea7n 50 b\xe0i l\xe0m (\u0111\xe3 ch\u1ecdn: ",e.countSelected,")"),_.Cb(2),_.mc("ngModel",e.isSelectAll),_.Cb(1),_.Qc(e.isSelectAll?"B\u1ecf ch\u1ecdn t\u1ea5t c\u1ea3":"Ch\u1ecdn t\u1ea5t c\u1ea3"),_.Cb(2),_.mc("formGroup",e.form),_.Cb(1),_.mc("ngForOf",e.exportsFormArray.controls),_.Cb(4),_.mc("disabled",!e.form.valid)("mat-dialog-close",_.rc(7,Se,e.exportsFormArray.value)))},directives:[N.a,i.r,i.u,s.e,i.B,i.s,i.l,i.f,o.l,M.b,s.d,i.j],encapsulation:2}),t})();function je(t=1){return e=>e.controls.map(t=>t.value).reduce((t,e)=>e?t+e:t,0)>=t?null:{required:!0}}var Ne=n("EUZL");function De(t,e){1&t&&_.Pb(0,"azt-loading-effect")}function Fe(t,e){1&t&&(_.Ub(0,"div"),_.Ub(1,"div",7),_.Ub(2,"div",8),_.Ub(3,"p",9),_.Pc(4,"Ch\u01b0a giao b\xe0i t\u1eadp"),_.Tb(),_.Tb(),_.Tb(),_.Tb())}function Ee(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div"),_.Ub(1,"azt-home-work-file",15),_.bc("redirectId",function(e){return _.Cc(t),_.fc(4).redirectHomework(e)}),_.Tb(),_.Tb()}if(2&t){const t=e.$implicit,n=_.fc(4);_.Cb(1),_.mc("name",t.name)("dateCreated",t.createdAt)("deadLine",t.deadline)("totalTakeTest",t.count)("totalStudent",n.classroomObj.countStudents)("homeworkId",t.id)("isNew",t.isNew)("hashId",t.hashId)}}function He(t,e){if(1&t&&(_.Ub(0,"div",13),_.Nc(1,Ee,2,8,"div",14),_.Tb()),2&t){const t=e.$implicit;_.Cb(1),_.mc("ngForOf",t)}}function ze(t,e){if(1&t){const t=_.Vb();_.Ub(0,"li",21),_.Ub(1,"a",22),_.bc("click",function(){_.Cc(t);const e=_.fc(4);return e.clickPage(e.currentPage-1)}),_.Ub(2,"span",23),_.Pc(3,"\xab"),_.Tb(),_.Ub(4,"span",24),_.Pc(5,"Previous"),_.Tb(),_.Tb(),_.Tb()}}function Le(t,e){if(1&t){const t=_.Vb();_.Ub(0,"a",27),_.bc("click",function(){_.Cc(t);const e=_.fc().$implicit;return _.fc(4).createArrayHomework(e)}),_.Pc(1),_.Tb()}if(2&t){const t=_.fc().$implicit;_.Cb(1),_.Rc("",t," ")}}function Re(t,e){if(1&t){const t=_.Vb();_.Ub(0,"a",28),_.bc("click",function(){_.Cc(t);const e=_.fc().$implicit;return _.fc(4).createArrayHomework(e)}),_.Pc(1),_.Tb()}if(2&t){const t=_.fc().$implicit;_.Cb(1),_.Rc("",t," ")}}function Ae(t,e){if(1&t&&(_.Ub(0,"li",21),_.Nc(1,Le,2,1,"a",25),_.Nc(2,Re,2,1,"a",26),_.Tb()),2&t){const t=e.$implicit,n=_.fc(4);_.Cb(1),_.mc("ngIf",n.currentPage==t),_.Cb(1),_.mc("ngIf",n.currentPage!=t)}}function Be(t,e){if(1&t){const t=_.Vb();_.Ub(0,"li",21),_.Ub(1,"a",29),_.bc("click",function(){_.Cc(t);const e=_.fc(4);return e.clickPage(e.currentPage+1)}),_.Ub(2,"span",23),_.Pc(3,"\xbb"),_.Tb(),_.Ub(4,"span",24),_.Pc(5,"Next"),_.Tb(),_.Tb(),_.Tb()}}function Ve(t,e){if(1&t&&(_.Ub(0,"div",16),_.Ub(1,"nav",17),_.Ub(2,"ul",18),_.Nc(3,ze,6,0,"li",19),_.Nc(4,Ae,3,2,"li",20),_.Nc(5,Be,6,0,"li",19),_.Tb(),_.Tb(),_.Tb()),2&t){const t=_.fc(3);_.Cb(3),_.mc("ngIf",t.currentPage>1),_.Cb(1),_.mc("ngForOf",t.arrayPag),_.Cb(1),_.mc("ngIf",t.lengthPage>t.currentPage&&t.lengthPage>=2)}}function Ge(t,e){if(1&t&&(_.Ub(0,"div",10),_.Nc(1,He,2,1,"div",11),_.Tb(),_.Nc(2,Ve,6,3,"div",12)),2&t){const t=_.fc(2);_.Cb(1),_.mc("ngForOf",t.homeworkObjs),_.Cb(1),_.mc("ngIf",t.lengthPage>1)}}function We(t,e){if(1&t&&(_.Ub(0,"div",3),_.Ub(1,"div",4),_.Nc(2,Fe,5,0,"div",5),_.Nc(3,Ge,3,2,"ng-template",null,6,_.Oc),_.Tb(),_.Tb()),2&t){const t=_.yc(4),e=_.fc();_.Cb(2),_.mc("ngIf",0==e.homeworkObjs.length)("ngIfElse",t)}}let $e=(()=>{class t{constructor(t,e,n){this.activeRoute=t,this.apiService=e,this.commonService=n,this.status_obj={loading:!1,error:!1,error_obj:{message:""}},this.menu_objs=[],this.lengthPage=0,this.arrayPag=[],this.arrayHomeworkData=[],this.currentPage=1,this.checkNew=!1,this.video_objs=[{href:"/faq/51",title:"H\u01b0\u1edbng d\u1eabn t\u1ea1o b\xe0i t\u1eadp",backLink:"/admin/homework/classes"}]}getData(){this.status_obj={loading:!0,error:!1,error_obj:{message:""}},this.apiService.GetObjsAndPermissionsByClassroom(this.classroomId).subscribe(t=>{1==t.success?(this.status_obj={loading:!1,error:!1,error_obj:{message:""}},this.classroomObj=t.data.classroomObj,this.homeworkObj=t.data.homeworkObjs,this.sortObj=t.data.homeworkObjs,this.lengthPage=Math.ceil(t.data.homeworkObjs.length/15),this.createPag(),this.createArrayHomework(1)):(this.status_obj={loading:!1,error:!1,error_obj:{message:""}},this.commonService.snackError("L\u1ed7i: kh\xf4ng load \u0111\u01b0\u1ee3c d\u1eef li\u1ec7u l\u1edbp h\u1ecdc","\u0110\xf3ng"))})}listToMatrix(t,e){var n,o,i=[];for(n=0,o=-1;n<t.length;n++)n%e==0&&(i[++o]=[]),i[o].push(t[n]);return i}createArrayHomework(t){this.currentPage=t,this.arrayHomeworkData=[];for(var e=15*(t-1);e<15*t;e++)this.homeworkObj.length-1>=e&&this.arrayHomeworkData.push(this.homeworkObj[e]);this.homeworkObjs=this.listToMatrix(this.arrayHomeworkData,5)}clickPage(t){this.createArrayHomework(t)}createPag(){for(let t=1;t<=this.lengthPage;t++)this.arrayPag.push(t)}redirectHomework(t){this.commonService.myNavigation("/admin/homework/score-list/"+this.classroomId+"/"+t)}changePermission(){this.getData()}sortByCreatAt(t){return t.sort(function(t,e){return Number(new Date(t.createdAt))-Number(new Date(e.createdAt))}),t.reverse()}saveExcelFile(t,e){const n=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Xt.saveAs(n,e+".xlsx")}callbackMenuEvent(t){"logPoidClass"==t&&this.apiService.ExportDataHomework(this.classroomId).subscribe(t=>{if(1==t.success){var e=[],n=this.commonService.sortExportDataByStudents(t.data),o=0;n.forEach(t=>{o+=1;var n={},i=0;t.dataHomework.forEach(t=>{for(var e="Nh\u1eadn x\xe9t "+ ++i,o=this.commonService.getFormartDate(t.createdAt),s=1;n[""+o];)s++,o=`${this.commonService.getFormartDate(t.createdAt)} (${s})`;if(t.testbankExams&&"[]"!==t.testbankExams){let e=this.commonService.parseJson(t.testbankExams);var c=0,r=0;e.forEach(t=>{c+=Number(t.point),r+=Number(t.total_point)}),n[""+o]=`${t.point};${c}/${r}`}else n[""+o]=""+t.point,n[e]=null==t.result?"":this.commonService.parseJson(t.result).comment}),e.push(Object.assign({STT:o,"H\u1ecd v\xe0 t\xean":t.fullname,"Gi\u1edbi t\xednh":t.gender,"Ng\xe0y sinh":this.commonService.getFormartDate(t.birthday)},n))});let i="T\u1ed5ng k\u1ebft \u0111i\u1ec3m L\u1edbp "+this.classroomObj.name;const s=Ne.utils.json_to_sheet(e),c=Ne.write({Sheets:{"B\u1ea3ng \u0111i\u1ec3m":s},SheetNames:["B\u1ea3ng \u0111i\u1ec3m"]},{bookType:"xlsx",type:"array"});this.saveExcelFile(c,i)}else this.commonService.myTranslate([t.message]).subscribe(e=>{this.commonService.snackError(e[t.message],"")})})}ngOnInit(){Object(x.b)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.classroomId=this.commonService.getMyParam(this.activeRoute,"id"),this.getData(),this.menu_objs=[{code:"logPoidClass",name:"Xu\u1ea5t b\u1ea3ng \u0111i\u1ec3m l\u1edbp h\u1ecdc"}]}),this.commonService.translateMetaData({title:"lang_cms_homework_list_exercise_title",description:"lang_cms_homework_list_exercise_description",image:"lang_cms_test_image"})}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(c.a),_.Ob(T.a),_.Ob(P.a))},t.\u0275cmp=_.Ib({type:t,selectors:[["list-homework"]],decls:3,vars:6,consts:[[3,"menu_objs","video_links","headerTitle","back_link","MenuEvent"],[4,"ngIf"],["class","mb-2 mt-3 pb-80","style","max-width: 1400px; margin: auto;",4,"ngIf"],[1,"mb-2","mt-3","pb-80",2,"max-width","1400px","margin","auto"],[1,"header-box","mt-3","pl-2","pr-2"],[4,"ngIf","ngIfElse"],["homework",""],[1,"row","text-center","py-5"],[1,"col-12"],[1,"p-0","m-0"],[1,"row"],["class","col-md-6 col-xl-4 col-12",4,"ngFor","ngForOf"],["class","row mt-4 justify-content-center",4,"ngIf"],[1,"col-md-6","col-xl-4","col-12"],[4,"ngFor","ngForOf"],[1,"relative",3,"name","dateCreated","deadLine","totalTakeTest","totalStudent","homeworkId","isNew","hashId","redirectId"],[1,"row","mt-4","justify-content-center"],["aria-label","Page navigation pagination-nav",2,"display","inline-block"],[1,"pagination"],["class","page-item",4,"ngIf"],["class","page-item",4,"ngFor","ngForOf"],[1,"page-item"],["aria-label","Previous",1,"btn","btn-pag","page-link",3,"click"],["aria-hidden","true"],[1,"sr-only"],["style","background-color: #e9ecef;","class","btn btn-pag page-link",3,"click",4,"ngIf"],["class","btn btn-pag page-link",3,"click",4,"ngIf"],[1,"btn","btn-pag","page-link",2,"background-color","#e9ecef",3,"click"],[1,"btn","btn-pag","page-link",3,"click"],["aria-label","Next",1,"btn","btn-pag","page-link",3,"click"]],template:function(t,e){1&t&&(_.Ub(0,"header-backend",0),_.bc("MenuEvent",function(t){return e.callbackMenuEvent(t)}),_.Tb(),_.Nc(1,De,1,0,"azt-loading-effect",1),_.Nc(2,We,5,2,"div",2)),2&t&&(_.mc("menu_objs",e.menu_objs)("video_links",e.video_objs)("headerTitle","Danh s\xe1ch b\xe0i t\u1eadp")("back_link","/admin/homework/classes"),_.Cb(1),_.mc("ngIf",e.status_obj.loading),_.Cb(1),_.mc("ngIf",e.classroomObj))},directives:[D.a,o.m,U.a,o.l,mt],styles:[".header-box[_ngcontent-%COMP%]{border:1px solid #dfdfdf;background-color:#f3f3f3;border-radius:5px;margin:0 15px}.page-item[_ngcontent-%COMP%]{margin:0 3px}.pb-80[_ngcontent-%COMP%]{padding-bottom:80px}.btn-pag[_ngcontent-%COMP%]{padding:5px 8px}.btn-add-teacher[_ngcontent-%COMP%]{border:1px solid #ececec}.relative[_ngcontent-%COMP%]{position:relative}.absolute[_ngcontent-%COMP%]{position:absolute;top:0;right:0}.content-flex[_ngcontent-%COMP%]{display:flex;flex-direction:column}.break[_ngcontent-%COMP%]{flex-basis:100%;width:0}"]}),t})();var Je=n("XhcP");function Ye(t,e){1&t&&(_.Ub(0,"span"),_.Pb(1,"span",12),_.Pc(2,"\xa0"),_.Tb())}function Qe(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",1),_.Ub(1,"div",2),_.Ub(2,"div",3),_.Ub(3,"p",4),_.Pc(4," B\u1ea1n mu\u1ed1n x\xf3a b\xe0i t\u1eadp:"),_.Tb(),_.Ub(5,"p",5),_.Ub(6,"span",6),_.Pc(7),_.Tb(),_.Tb(),_.Tb(),_.Ub(8,"div",7),_.Ub(9,"div",8),_.Ub(10,"button",9),_.bc("click",function(){return _.Cc(t),_.fc().btnCloseDialog()}),_.Pc(11),_.gc(12,"mytranslate"),_.Tb(),_.Tb(),_.Ub(13,"button",10),_.bc("click",function(){return _.Cc(t),_.fc().confirmDelete()}),_.Nc(14,Ye,3,0,"span",11),_.Pc(15),_.gc(16,"mytranslate"),_.Tb(),_.Tb(),_.Tb(),_.Tb()}if(2&t){const t=_.fc();_.Cb(6),_.nc("matTooltip",t.data.homeworkObj.name),_.Cb(1),_.Qc(t.data.homeworkObj.name),_.Cb(4),_.Rc(" ",_.hc(12,6,"lang_cms_common_close_btn")," "),_.Cb(2),_.mc("disabled",t.isLoading),_.Cb(1),_.mc("ngIf",!0===t.isLoading),_.Cb(1),_.Rc(" ",_.hc(16,8,"lang_cms_common_confirm_btn")," ")}}let qe=(()=>{class t{constructor(t,e){this.commonService=t,this.apiService=e,this.closeDialog=new _.o,this.subscriptions=new u.a,this.form=new i.k({}),this.isLoading=!1,this.type=0,this.status_obj={loading:!1,error:!1,success:!1,error_obj:{message:""}}}confirmDelete(){this.status_obj={loading:!0,error:!1,error_obj:{message:""}},this.subscriptions.add(this.apiService.DeleteHomework(this.data.homeworkObj.id).subscribe(t=>{1==t.success?(this.closeDialog.emit(!0),this.status_obj={loading:!1,error:!1},this.commonService.snackSuccess("X\xf3a b\xe0i t\u1eadp th\xe0nh c\xf4ng","")):(this.status_obj={loading:!1,error:!1,error_obj:{message:""}},this.commonService.myTranslate([t.message,"lang_cms_common_ok"]).subscribe(e=>{this.commonService.snackError(e[t.message],e.lang_cms_common_ok)}))}))}btnCloseDialog(){this.closeDialog.emit(!1)}ngOnInit(){}ngOnDestroy(){this.subscriptions.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(P.a),_.Ob(T.a))},t.\u0275cmp=_.Ib({type:t,selectors:[["app-delete-homework"]],inputs:{data:"data"},outputs:{closeDialog:"closeDialog"},decls:1,vars:1,consts:[["class","school-info_bg",4,"ngIf"],[1,"school-info_bg"],[1,"school-info","p-4"],[1,"text-center"],[1,"h5","mb-1"],[1,"h5","text-danger",2,"padding-bottom","21px","border-bottom","1px solid #b2b4b7"],[1,"truncate",3,"matTooltip"],[1,"d-flex","float-right","mt-3"],[1,"zalo-share-button"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","warn",2,"margin-left","15px",3,"disabled","click"],[4,"ngIf"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,e){1&t&&_.Nc(0,Qe,17,10,"div",0),2&t&&_.mc("ngIf",e.data.isShow)},directives:[o.m,j.a,M.b],pipes:[Ut.i],styles:[".school-info_bg[_ngcontent-%COMP%]{z-index:9998;width:100%;display:flex;left:0;top:0;position:fixed;height:100%;min-height:100vh;background:rgba(0,0,0,.5607843137254902)}.school-info[_ngcontent-%COMP%]{z-index:9999;top:50%;left:50%;min-width:30%;transform:translate(-50%,-50%);position:fixed;max-width:600px;background:#fff;margin-left:auto;margin-right:auto;box-shadow:0 0 13px 3px rgba(0,0,0,.58)}.truncate[_ngcontent-%COMP%]{display:inline-block;text-overflow:ellipsis;overflow:hidden;max-width:90%;padding:5px 0;white-space:nowrap}.close-btn[_ngcontent-%COMP%]{position:absolute;top:-8px;right:-7px;padding:5px 10px;background:#dadada;cursor:pointer;border-radius:20px}@media only screen and (max-width:1024px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:95%}}"]}),t})();var Ke=n("STbY"),Xe=n("1jcm");const Ze=["TABLE"];function tn(t,e){if(1&t&&(_.Ub(0,"tr"),_.Ub(1,"td",4),_.Pc(2),_.Tb(),_.Ub(3,"td",4),_.Pc(4),_.gc(5,"date"),_.Tb(),_.Ub(6,"td",4),_.Pc(7),_.Tb(),_.Ub(8,"td",4),_.Pc(9),_.Tb(),_.Tb()),2&t){const t=e.$implicit,n=_.fc();_.Cb(2),_.Qc(t.fullName),_.Cb(2),_.Qc(_.ic(5,4,t.birthday,"dd/MM/yyyy")),_.Cb(3),_.Qc(t.isMarked?t.point:"Ch\u01b0a c\xf3 \u0111i\u1ec3m"),_.Cb(2),_.Qc(n.getComment(t.answer))}}let en=(()=>{class t{constructor(t){this.commonService=t,this.TABLE=_.l,this.studentList=[],this.homeworkObj={},this.currentDate="",this.tableType="homework"}ExportTOExcel(){const t=Ne.utils.table_to_sheet(this.TABLE.nativeElement),e=Ne.utils.book_new();Ne.utils.book_append_sheet(e,t,"Sheet1"),this.homeworkObj.hasOwnProperty("name")?Ne.writeFile(e,this.homeworkObj.name+"-ScoreSheet.xlsx"):Ne.writeFile(e,"ScoreSheet.xlsx")}getComment(t){var e="";return null!=t&&null!=t.result&&(e=this.commonService.parseJson(t.result).comment),e}ngOnInit(){}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(P.a))},t.\u0275cmp=_.Ib({type:t,selectors:[["app-excel-export"]],viewQuery:function(t,e){if(1&t&&_.Wc(Ze,!0),2&t){let t;_.xc(t=_.cc())&&(e.TABLE=t.first)}},inputs:{studentList:"studentList",homeworkObj:"homeworkObj",currentDate:"currentDate",tableType:"tableType"},decls:34,vars:7,consts:[[1,"table","table-bordered","d-none",3,"id","click"],["TABLE",""],[1,"thead-dark"],["colspan","10"],[1,"border-table"],[4,"ngFor","ngForOf"],["colspan","2"]],template:function(t,e){1&t&&(_.Ub(0,"table",0,1),_.bc("click",function(){return e.ExportTOExcel()}),_.Ub(2,"thead",2),_.Ub(3,"tr"),_.Ub(4,"th",3),_.Pc(5),_.Tb(),_.Tb(),_.Ub(6,"tr"),_.Pb(7,"th"),_.Tb(),_.Ub(8,"tr"),_.Ub(9,"th",3),_.Pc(10),_.gc(11,"date"),_.Tb(),_.Tb(),_.Ub(12,"tr"),_.Pb(13,"th"),_.Tb(),_.Ub(14,"tr"),_.Ub(15,"th",4),_.Pc(16,"H\u1ecd t\xean"),_.Tb(),_.Ub(17,"th",4),_.Pc(18,"Ng\xe0y sinh"),_.Tb(),_.Ub(19,"th",4),_.Pc(20,"\u0110i\u1ec3m"),_.Tb(),_.Ub(21,"th",4),_.Pc(22,"Nh\u1eadn x\xe9t"),_.Tb(),_.Tb(),_.Tb(),_.Ub(23,"tbody"),_.Nc(24,tn,10,7,"tr",5),_.Pb(25,"tr"),_.Ub(26,"tr"),_.Pb(27,"td"),_.Pb(28,"td"),_.Pb(29,"td"),_.Pb(30,"td"),_.Ub(31,"td",6),_.Pc(32,"Gi\xe1o vi\xean x\xe1c nh\u1eadn: "),_.Tb(),_.Pb(33,"td"),_.Tb(),_.Tb(),_.Tb()),2&t&&(_.oc("id","table_",e.tableType,""),_.Cb(5),_.Rc("B\xe0i t\u1eadp: ",e.homeworkObj.name,""),_.Cb(5),_.Rc("Th\u1eddi gian xu\u1ea5t k\u1ebft qu\u1ea3: ",_.ic(11,4,e.currentDate,"dd/MM/yyyy"),""),_.Cb(14),_.mc("ngForOf",e.studentList))},directives:[o.l],pipes:[o.e],encapsulation:2}),t})();var nn=n("X2wh");const on=["drawer"],sn=["boxContent"];function cn(t,e){1&t&&_.Pb(0,"azt-loading-effect")}function rn(t,e){if(1&t){const t=_.Vb();_.Ub(0,"app-delete-homework",9),_.bc("closeDialog",function(e){return _.Cc(t),_.fc(2).closeDeleteHomework(e)}),_.Tb()}if(2&t){const t=_.fc(2);_.mc("data",t.deleteHomeworkData)}}function an(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div"),_.Ub(1,"azt-preview-media",10),_.bc("closePreview",function(){return _.Cc(t),_.fc(2).onFileClose()}),_.Tb(),_.Tb()}if(2&t){const t=_.fc(2);_.Cb(1),_.mc("fileOption",t.previewFile)}}function ln(t,e){1&t&&(_.Ub(0,"div",11),_.Ub(1,"span"),_.Pc(2,"Kh\xf4ng t\xecm th\u1ea5y d\u1eef li\u1ec7u b\xe0i t\u1eadp!"),_.Tb(),_.Tb())}function bn(t,e){if(1&t&&(_.Ub(0,"p",90),_.Pc(1),_.gc(2,"date"),_.Tb()),2&t){const t=_.fc(3);_.Cb(1),_.Rc("H\u1ea1n n\u1ed9p: ",_.ic(2,1,t.homeworkObj.deadline,"dd/MM/yyyy HH:mm"),"")}}function dn(t,e){1&t&&(_.Ub(0,"p",90),_.Pc(1,"H\u1ea1n n\u1ed9p: Kh\xf4ng th\u1eddi h\u1ea1n"),_.Tb())}function hn(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",96),_.Ub(1,"div",97),_.bc("click",function(n){_.Cc(t);const o=e.$implicit;return _.fc(5).onShowFile(n,o,-1)}),_.Ub(2,"mat-icon",98),_.Pc(3," text_snippet"),_.Tb(),_.Ub(4,"span",99),_.Pc(5),_.Tb(),_.Tb(),_.Tb()}if(2&t){const t=e.$implicit;_.Cb(4),_.mc("matTooltip",t.name),_.Cb(1),_.Qc(t.name)}}function mn(t,e){if(1&t&&(_.Ub(0,"div",94),_.Nc(1,hn,6,2,"div",95),_.Tb()),2&t){const t=_.fc(4);_.Cb(1),_.mc("ngForOf",t.homeworkObj.files)}}function gn(t,e){if(1&t&&_.Pb(0,"div",100),2&t){const t=_.fc(4);_.mc("innerHTML",t.homeworkObj.content,_.Dc)}}function un(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",101),_.Ub(1,"a",102),_.bc("click",function(){return _.Cc(t),_.fc(4).goToEditHomework()}),_.Ub(2,"mat-icon",103),_.Pc(3,"edit"),_.Tb(),_.Ub(4,"span",80),_.Pc(5,"S\u1eeda"),_.Tb(),_.Tb(),_.Ub(6,"a",104),_.bc("click",function(){return _.Cc(t),_.fc(4).deleteHomework()}),_.Ub(7,"mat-icon",103),_.Pc(8,"delete"),_.Tb(),_.Ub(9,"span",80),_.Pc(10,"X\xf3a"),_.Tb(),_.Tb(),_.Tb()}}function pn(t,e){if(1&t&&(_.Nc(0,mn,2,1,"div",91),_.Nc(1,gn,1,1,"div",92),_.Nc(2,un,11,0,"div",93)),2&t){const t=_.fc(3);_.mc("ngIf",t.homeworkObj.files&&t.homeworkObj.files.length>0),_.Cb(1),_.mc("ngIf",t.homeworkObj.content&&""!=t.homeworkObj.content),_.Cb(1),_.mc("ngIf",0==t.classObj.isShare)}}function fn(t,e){if(1&t){const t=_.Vb();_.Ub(0,"a",105),_.bc("click",function(){return _.Cc(t),_.fc(3).toggleShowActions()}),_.Ub(1,"mat-icon",103),_.Pc(2,"expand_more"),_.Tb(),_.Tb()}}function vn(t,e){if(1&t){const t=_.Vb();_.Ub(0,"a",105),_.bc("click",function(){return _.Cc(t),_.fc(3).toggleShowActions()}),_.Ub(1,"mat-icon",103),_.Pc(2,"expand_less"),_.Tb(),_.Tb()}}function Cn(t,e){if(1&t){const t=_.Vb();_.Ub(0,"a",106),_.bc("click",function(){return _.Cc(t),_.fc(3).toggleDrawer()}),_.Ub(1,"mat-icon",107),_.Pc(2," menu_open"),_.Tb(),_.Tb()}}function kn(t,e){if(1&t){const t=_.Vb();_.Ub(0,"a",108),_.bc("click",function(){return _.Cc(t),_.fc(3).toggleDrawer()}),_.Ub(1,"mat-icon",109),_.Pc(2,"menu_open "),_.Tb(),_.Tb()}}function wn(t,e){if(1&t&&(_.Ub(0,"p",90),_.Pc(1),_.gc(2,"date"),_.Tb()),2&t){const t=_.fc(3);_.Cb(1),_.Rc("H\u1ea1n n\u1ed9p: ",_.ic(2,1,t.homeworkObj.deadline,"dd/MM/yyyy HH:mm"),"")}}function xn(t,e){1&t&&(_.Ub(0,"p",90),_.Pc(1,"H\u1ea1n n\u1ed9p: Kh\xf4ng th\u1eddi h\u1ea1n"),_.Tb())}function _n(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",96),_.Ub(1,"div",97),_.bc("click",function(n){_.Cc(t);const o=e.$implicit;return _.fc(5).onShowFile(n,o,-1)}),_.Ub(2,"mat-icon",98),_.Pc(3," text_snippet"),_.Tb(),_.Ub(4,"span",99),_.Pc(5),_.Tb(),_.Tb(),_.Tb()}if(2&t){const t=e.$implicit;_.Cb(4),_.mc("matTooltip",t.name),_.Cb(1),_.Qc(t.name)}}function Tn(t,e){if(1&t&&(_.Ub(0,"div",94),_.Nc(1,_n,6,2,"div",95),_.Tb()),2&t){const t=_.fc(4);_.Cb(1),_.mc("ngForOf",t.homeworkObj.files)}}function Pn(t,e){if(1&t&&_.Pb(0,"div",100),2&t){const t=_.fc(4);_.mc("innerHTML",t.homeworkObj.content,_.Dc)}}function On(t,e){if(1&t&&(_.Nc(0,Tn,2,1,"div",110),_.Nc(1,Pn,1,1,"div",92)),2&t){const t=_.fc(3);_.mc("ngIf",t.homeworkObj.files&&t.homeworkObj.files.length>0),_.Cb(1),_.mc("ngIf",t.homeworkObj.content&&""!=t.homeworkObj.content)}}function Un(t,e){if(1&t){const t=_.Vb();_.Ub(0,"a",105),_.bc("click",function(){return _.Cc(t),_.fc(3).toggleShowActions()}),_.Ub(1,"mat-icon",103),_.Pc(2,"expand_more "),_.Tb(),_.Tb()}}function yn(t,e){if(1&t){const t=_.Vb();_.Ub(0,"a",105),_.bc("click",function(){return _.Cc(t),_.fc(3).toggleShowActions()}),_.Ub(1,"mat-icon",103),_.Pc(2,"expand_less "),_.Tb(),_.Tb()}}function Sn(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",111),_.Ub(1,"div",75),_.Ub(2,"form",46),_.Ub(3,"input",47),_.bc("keyup.enter",function(){return _.Cc(t),_.fc(3).search()}),_.Tb(),_.Ub(4,"div",48),_.bc("click",function(){return _.Cc(t),_.fc(3).search()}),_.Ub(5,"mat-icon",49),_.Pc(6," search "),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Ub(7,"div",112),_.Ub(8,"div",51),_.Ub(9,"button",113),_.Ub(10,"span",53),_.Pc(11,"B\u1ed9 l\u1ecdc"),_.Tb(),_.Ub(12,"mat-icon",54),_.Pc(13,"filter_alt "),_.Tb(),_.Tb(),_.Tb(),_.Ub(14,"mat-menu",55,56),_.Ub(16,"a",57),_.bc("click",function(t){return t.stopPropagation()}),_.Ub(17,"span",58),_.Pc(18," Hi\u1ec7n h\u1ecdc sinh ch\u01b0a ch\u1ea5m "),_.Tb(),_.Ub(19,"mat-slide-toggle",59),_.bc("change",function(e){return _.Cc(t),_.fc(3).toggleFilterSubmitted(e)}),_.Tb(),_.Tb(),_.Ub(20,"a",57),_.bc("click",function(t){return t.stopPropagation()}),_.Ub(21,"span",58),_.Pc(22," Hi\u1ec7n h\u1ecdc sinh ch\u01b0a n\u1ed9p "),_.Tb(),_.Ub(23,"mat-slide-toggle",59),_.bc("change",function(e){return _.Cc(t),_.fc(3).toggleFilterNotSubmit(e)}),_.Tb(),_.Tb(),_.Ub(24,"a",57),_.bc("click",function(t){return t.stopPropagation()}),_.Ub(25,"span",58),_.Pc(26," Hi\u1ec7n h\u1ecdc sinh \u0111\xe3 ch\u1ea5m "),_.Tb(),_.Ub(27,"mat-slide-toggle",59),_.bc("change",function(e){return _.Cc(t),_.fc(3).toggleFilterMarked(e)}),_.Tb(),_.Tb(),_.Ub(28,"a",57),_.bc("click",function(t){return t.stopPropagation()}),_.Ub(29,"span",58),_.Pc(30," Hi\u1ec7n h\u1ecdc sinh n\u1ed9p l\u1ea1i "),_.Tb(),_.Ub(31,"mat-slide-toggle",59),_.bc("change",function(e){return _.Cc(t),_.fc(3).toggleFilterReSubmit(e)}),_.Tb(),_.Tb(),_.Ub(32,"div",60),_.Ub(33,"a",61),_.bc("click",function(){return _.Cc(t),_.fc(3).confirmFilter()}),_.Ub(34,"span",62),_.Pc(35," \u0110\u1ed3ng \xfd "),_.Tb(),_.Tb(),_.Ub(36,"a",61),_.bc("click",function(){return _.Cc(t),_.fc(3).clearFilter()}),_.Ub(37,"span",53),_.Pc(38," X\xf3a"),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb()}if(2&t){const t=_.yc(15),e=_.fc(3);_.Cb(2),_.mc("formGroup",e.form),_.Cb(7),_.mc("matMenuTriggerFor",t),_.Cb(10),_.mc("checked",e.isSubmitted),_.Cb(4),_.mc("checked",e.isNotSubmit),_.Cb(4),_.mc("checked",e.isMarked),_.Cb(4),_.mc("checked",e.mustReSubmit)}}function Mn(t,e){1&t&&(_.Ub(0,"div",74),_.Ub(1,"p",114),_.Pc(2,"Danh s\xe1ch n\u1ed9p b\xe0i"),_.Tb(),_.Tb())}function In(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",115),_.Ub(1,"div",116),_.Ub(2,"p",114),_.Pc(3,"Danh s\xe1ch n\u1ed9p b\xe0i l\u1edbp : "),_.Ub(4,"span",40),_.bc("click",function(){return _.Cc(t),_.fc(3).goToStudentList()}),_.Pc(5),_.Tb(),_.Tb(),_.Tb(),_.Ub(6,"div",117),_.Ub(7,"div",63),_.Ub(8,"button",64),_.Ub(9,"mat-icon",65),_.Pc(10,"menu"),_.Tb(),_.Tb(),_.Tb(),_.Ub(11,"mat-menu",55,66),_.Ub(13,"a",67),_.bc("click",function(){return _.Cc(t),_.fc(3).exportToExcel("homework")}),_.Ub(14,"mat-icon",68),_.Pc(15,"file_download"),_.Tb(),_.Ub(16,"span",69),_.Pc(17," Xu\u1ea5t Excel"),_.Tb(),_.Tb(),_.Ub(18,"a",67),_.bc("click",function(){return _.Cc(t),_.fc(3).exportToPDF()}),_.Ub(19,"mat-icon",68),_.Pc(20,"picture_as_pdf"),_.Tb(),_.Ub(21,"span",70),_.Pc(22," Xu\u1ea5t PDF"),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb()}if(2&t){const t=_.yc(12),e=_.fc(3);_.Cb(4),_.nc("matTooltip",e.classObj.name),_.Cb(1),_.Rc(" ",e.classObj.name," "),_.Cb(3),_.mc("matMenuTriggerFor",t)}}function jn(t,e){1&t&&(_.Ub(0,"div",31),_.Ub(1,"div",118),_.Ub(2,"p",119),_.Pc(3,"Kh\xf4ng t\xecm th\u1ea5y b\u1ea3n ghi b\u1ea1n \u0111ang t\xecm ki\u1ebfm!"),_.Tb(),_.Tb(),_.Tb())}function Nn(t,e){if(1&t){const t=_.Vb();_.Ub(0,"app-student-result-view",120),_.bc("goToResult",function(e){return _.Cc(t),_.fc(3).goToTestReview(e)}),_.Tb()}if(2&t){const t=_.fc(3);_.mc("studentLists",t.homeworkUserList)("isNotTestedYet",t.isNotTestedYet)("isOpenSideNav",t.isOpenSideNav)("isHomeworkFlow",t.isHomeworkFlow)("obj",t.homeworkObj)}}const Dn=function(t,e){return{"w-60":t,"w-30":e}},Fn=function(t){return{"px-0":t}},En=function(t){return{"justify-content-center":t}};function Hn(t,e){if(1&t){const t=_.Vb();_.Ub(0,"mat-drawer-container",12),_.Ub(1,"mat-drawer",13,14),_.Ub(3,"div",15),_.Ub(4,"div",16),_.Ub(5,"div",17),_.Ub(6,"div",18),_.Ub(7,"p",19),_.Pc(8),_.Tb(),_.Tb(),_.Tb(),_.Ub(9,"div",20),_.Ub(10,"div",21),_.Ub(11,"button",22),_.bc("click",function(){return _.Cc(t),_.fc(2).showCopySuccess()}),_.Ub(12,"mat-icon",23),_.Pc(13,"file_copy"),_.Tb(),_.Pc(14," Copy link "),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Ub(15,"div",18),_.Ub(16,"p",24),_.Pc(17),_.gc(18,"date"),_.Tb(),_.Tb(),_.Ub(19,"div",18),_.Nc(20,bn,3,4,"p",25),_.Nc(21,dn,2,0,"p",25),_.Tb(),_.Nc(22,pn,3,3,"ng-template",26),_.Ub(23,"div",27),_.Nc(24,fn,3,0,"a",28),_.Nc(25,vn,3,0,"a",28),_.Tb(),_.Tb(),_.Tb(),_.Ub(26,"mat-drawer-content",29),_.Ub(27,"div",30),_.Ub(28,"div",31,32),_.Ub(30,"div",33),_.Ub(31,"div",34),_.Ub(32,"div",35),_.Ub(33,"div",36),_.Nc(34,Cn,3,0,"a",37),_.Nc(35,kn,3,0,"a",38),_.Ub(36,"p",39),_.Ub(37,"span",40),_.bc("click",function(){return _.Cc(t),_.fc(2).goToStudentList()}),_.Pc(38),_.gc(39,"slice"),_.Tb(),_.Ub(40,"mat-icon",41),_.Pc(41," chevron_right"),_.Tb(),_.Ub(42,"span",42),_.Pc(43),_.Tb(),_.Tb(),_.Tb(),_.Ub(44,"div",43),_.Ub(45,"div",44),_.Ub(46,"div",45),_.Ub(47,"form",46),_.Ub(48,"input",47),_.bc("keyup.enter",function(){return _.Cc(t),_.fc(2).search()}),_.Tb(),_.Ub(49,"div",48),_.bc("click",function(){return _.Cc(t),_.fc(2).search()}),_.Ub(50,"mat-icon",49),_.Pc(51," search "),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Ub(52,"div",50),_.Ub(53,"div",51),_.Ub(54,"button",52),_.Ub(55,"span",53),_.Pc(56,"B\u1ed9 l\u1ecdc"),_.Tb(),_.Ub(57,"mat-icon",54),_.Pc(58,"filter_alt "),_.Tb(),_.Tb(),_.Tb(),_.Ub(59,"mat-menu",55,56),_.Ub(61,"a",57),_.bc("click",function(t){return t.stopPropagation()}),_.Ub(62,"span",58),_.Pc(63," Hi\u1ec7n h\u1ecdc sinh ch\u01b0a ch\u1ea5m "),_.Tb(),_.Ub(64,"mat-slide-toggle",59),_.bc("change",function(e){return _.Cc(t),_.fc(2).toggleFilterSubmitted(e)}),_.Tb(),_.Tb(),_.Ub(65,"a",57),_.bc("click",function(t){return t.stopPropagation()}),_.Ub(66,"span",58),_.Pc(67," Hi\u1ec7n h\u1ecdc sinh ch\u01b0a n\u1ed9p "),_.Tb(),_.Ub(68,"mat-slide-toggle",59),_.bc("change",function(e){return _.Cc(t),_.fc(2).toggleFilterNotSubmit(e)}),_.Tb(),_.Tb(),_.Ub(69,"a",57),_.bc("click",function(t){return t.stopPropagation()}),_.Ub(70,"span",58),_.Pc(71," Hi\u1ec7n h\u1ecdc sinh \u0111\xe3 ch\u1ea5m "),_.Tb(),_.Ub(72,"mat-slide-toggle",59),_.bc("change",function(e){return _.Cc(t),_.fc(2).toggleFilterMarked(e)}),_.Tb(),_.Tb(),_.Ub(73,"a",57),_.bc("click",function(t){return t.stopPropagation()}),_.Ub(74,"span",58),_.Pc(75," Hi\u1ec7n h\u1ecdc sinh n\u1ed9p l\u1ea1i "),_.Tb(),_.Ub(76,"mat-slide-toggle",59),_.bc("change",function(e){return _.Cc(t),_.fc(2).toggleFilterReSubmit(e)}),_.Tb(),_.Tb(),_.Ub(77,"div",60),_.Ub(78,"a",61),_.bc("click",function(){return _.Cc(t),_.fc(2).confirmFilter()}),_.Ub(79,"span",62),_.Pc(80," \u0110\u1ed3ng \xfd "),_.Tb(),_.Tb(),_.Ub(81,"a",61),_.bc("click",function(){return _.Cc(t),_.fc(2).clearFilter()}),_.Ub(82,"span",53),_.Pc(83," X\xf3a"),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Ub(84,"div"),_.Ub(85,"div",63),_.Ub(86,"button",64),_.Ub(87,"mat-icon",65),_.Pc(88,"menu"),_.Tb(),_.Tb(),_.Tb(),_.Ub(89,"mat-menu",55,66),_.Ub(91,"a",67),_.bc("click",function(){return _.Cc(t),_.fc(2).exportToExcel("homework")}),_.Ub(92,"mat-icon",68),_.Pc(93,"file_download"),_.Tb(),_.Ub(94,"span",69),_.Pc(95," Xu\u1ea5t Excel"),_.Tb(),_.Tb(),_.Ub(96,"a",67),_.bc("click",function(){return _.Cc(t),_.fc(2).exportToPDF()}),_.Ub(97,"mat-icon",68),_.Pc(98,"picture_as_pdf"),_.Tb(),_.Ub(99,"span",70),_.Pc(100," Xu\u1ea5t PDF"),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Ub(101,"div",71),_.Ub(102,"div",16),_.Ub(103,"div",72),_.Ub(104,"div",18),_.Ub(105,"p",19),_.Pc(106),_.Tb(),_.Tb(),_.Tb(),_.Ub(107,"div",73),_.Ub(108,"div",21),_.Ub(109,"button",22),_.bc("click",function(){return _.Cc(t),_.fc(2).showCopySuccess()}),_.Ub(110,"mat-icon",23),_.Pc(111,"file_copy "),_.Tb(),_.Pc(112," Copy link "),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Ub(113,"div",16),_.Ub(114,"div",74),_.Ub(115,"div",18),_.Ub(116,"p",24),_.Pc(117),_.gc(118,"date"),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Ub(119,"div",16),_.Ub(120,"div",75),_.Ub(121,"div",18),_.Nc(122,wn,3,4,"p",25),_.Nc(123,xn,2,0,"p",25),_.Tb(),_.Tb(),_.Ub(124,"div",76),_.Ub(125,"div",77),_.Ub(126,"a",78),_.bc("click",function(){return _.Cc(t),_.fc(2).goToEditHomework()}),_.Ub(127,"mat-icon",79),_.Pc(128," edit"),_.Tb(),_.Ub(129,"span",80),_.Pc(130,"S\u1eeda"),_.Tb(),_.Tb(),_.Ub(131,"a",81),_.bc("click",function(){return _.Cc(t),_.fc(2).deleteHomework()}),_.Ub(132,"mat-icon",82),_.Pc(133," delete"),_.Tb(),_.Ub(134,"span",83),_.Pc(135,"X\xf3a"),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Nc(136,On,2,2,"ng-template",26),_.Ub(137,"div",16),_.Ub(138,"div",74),_.Ub(139,"div",27),_.Nc(140,Un,3,0,"a",28),_.Nc(141,yn,3,0,"a",28),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Nc(142,Sn,39,6,"div",84),_.Ub(143,"div",85),_.Nc(144,Mn,3,0,"div",86),_.Nc(145,In,23,3,"ng-template",null,87,_.Oc),_.Tb(),_.Nc(147,jn,4,0,"div",88),_.Nc(148,Nn,1,5,"ng-template",26),_.Tb(),_.Pb(149,"app-excel-export",89),_.Tb(),_.Tb()}if(2&t){const t=_.yc(60),e=_.yc(90),n=_.yc(146),o=_.fc(2);_.mc("hasBackdrop",o.hasBackdrop),_.Cb(1),_.nc("opened",o.isMobile?"false":"true"),_.mc("mode",o.mode)("ngClass",_.sc(56,Dn,o.isMobile,!o.isMobile)),_.Cb(7),_.Qc(o.homeworkObj.name),_.Cb(3),_.mc("cdkCopyToClipboard",o.copylinkToClipboard(o.homeworkObj.hashId)),_.Cb(6),_.Rc("Ng\xe0y t\u1ea1o: ",_.ic(18,46,o.homeworkObj.createdAt,"dd/MM/yyyy HH:mm"),""),_.Cb(3),_.mc("ngIf",o.hasDeadline),_.Cb(1),_.mc("ngIf",!o.hasDeadline),_.Cb(1),_.mc("ngIf",o.isShowActions),_.Cb(2),_.mc("ngIf",!o.isShowActions),_.Cb(1),_.mc("ngIf",o.isShowActions),_.Cb(2),_.mc("ngClass",_.rc(59,Fn,o.isMobile)),_.Cb(3),_.mc("ngClass",_.rc(61,En,o.isMobile)),_.Cb(2),_.mc("hidden",1==o.isMobile),_.Cb(2),_.mc("ngIf",!o.isOpenSideNav||o.isMobile),_.Cb(1),_.mc("ngIf",o.isOpenSideNav&&!o.isMobile),_.Cb(2),_.nc("matTooltip",o.classObj.name),_.Cb(1),_.Rc("",o.classObj.name.length>20?_.jc(39,49,o.classObj.name,0,20)+"..":o.classObj.name," "),_.Cb(4),_.nc("matTooltip",o.homeworkObj.name),_.Cb(1),_.Rc(" ",o.homeworkObj.name," "),_.Cb(4),_.mc("formGroup",o.form),_.Cb(7),_.mc("matMenuTriggerFor",t),_.Cb(10),_.mc("checked",o.isSubmitted),_.Cb(4),_.mc("checked",o.isNotSubmit),_.Cb(4),_.mc("checked",o.isMarked),_.Cb(4),_.mc("checked",o.mustReSubmit),_.Cb(10),_.mc("matMenuTriggerFor",e),_.Cb(15),_.mc("hidden",0==o.isMobile),_.Cb(5),_.Qc(o.homeworkObj.name),_.Cb(3),_.mc("cdkCopyToClipboard",o.copylinkToClipboard(o.homeworkObj.hashId)),_.Cb(8),_.Rc("Ng\xe0y t\u1ea1o: ",_.ic(118,53,o.homeworkObj.createdAt,"dd/MM/yyyy HH:mm"),""),_.Cb(5),_.mc("ngIf",o.hasDeadline),_.Cb(1),_.mc("ngIf",!o.hasDeadline),_.Cb(13),_.mc("ngIf",o.isShowActions),_.Cb(4),_.mc("ngIf",!o.isShowActions),_.Cb(1),_.mc("ngIf",o.isShowActions),_.Cb(1),_.mc("ngIf",o.isMobile),_.Cb(2),_.mc("ngIf",0==o.isMobile)("ngIfElse",n),_.Cb(3),_.mc("ngIf",o.isNullSearchData),_.Cb(1),_.mc("ngIf",!o.isNullSearchData),_.Cb(1),_.mc("studentList",o.studentObjs)("homeworkObj",o.homeworkObj)("currentDate",o.currentDate)("typeTable","homework")}}function zn(t,e){1&t&&_.Pb(0,"div",121)}function Ln(t,e){if(1&t){const t=_.Vb();_.Nc(0,rn,1,1,"app-delete-homework",3),_.Nc(1,an,2,1,"div",4),_.Ub(2,"div",5),_.bc("resize",function(e){return _.Cc(t),_.fc().onResize(e)},!1,_.Bc),_.Nc(3,ln,3,0,"div",6),_.Nc(4,Hn,150,63,"mat-drawer-container",7),_.Tb(),_.Nc(5,zn,1,0,"div",8)}if(2&t){const t=_.fc();_.mc("ngIf",t.deleteHomeworkData.isShow),_.Cb(1),_.mc("ngIf",t.isShowPreviewFile),_.Cb(2),_.mc("ngIf",""!=t.errorMessage),_.Cb(1),_.mc("ngIf",""==t.errorMessage),_.Cb(1),_.mc("ngIf",1==t.isMobile)}}let Rn=(()=>{class t{constructor(t,e,n,o,s,c,r,a){this.apiService=t,this.dialog=e,this.commonService=n,this.translate=o,this.localize=s,this.activeRoute=c,this.router=r,this.fb=a,this.drawer=Je.a,this.box_content=_.l,this.currentDate=new Date,this.back_link="",this.classId=0,this.objs=[],this.status_obj={loading:!1,error:!1,error_obj:{message:""}},this.subscriptions=new u.a,this.form=new i.k({}),this.contentHeight=null,this.backUpHeight=null,this.hasBackdrop=!1,this.mode="side",this.isMobile=!1,this.isShowActions=!0,this.isOpenSideNav=!0,this.isHomeworkFlow=!0,this.deleteHomeworkData={homeworkObj:"",isShow:!1},this.homeworkUserList=[],this.studentObjs=[],this.homeworkObj={},this.classObj={},this.files=[],this.isNotTestedYet=!1,this.isNullSearchData=!1,this.hasDeadline=!1,this.isShowPreviewFile=!1,this.previewFile={},this.errorMessage="",this.isSubmitted=!1,this.isNotSubmit=!1,this.isMarked=!1,this.mustReSubmit=!1}getData(){this.status_obj={loading:!0,error:!1,error_obj:{message:""}},this.subscriptions.add(this.apiService.GetStudentsHomework(this.homeworkId,this.classId).subscribe(t=>{if(1==t.success){if(this.errorMessage="",this.homeworkUserList=this.checkStatusStudent(t.data.studentObjs),this.homeworkObj=this.parseHomeworkData(t.data.homeworkObj),this.classObj=t.data.classroomObj,this.back_link="/admin/homework/homework-list/"+this.classObj.id,this.homeworkObj.deadline&&null!=this.homeworkObj.deadline&&""!=this.homeworkObj.deadline&&(this.hasDeadline=!0),0==this.homeworkUserList.length)return this.isNotTestedYet=!0,void(this.status_obj={loading:!1,error:!1,error_obj:{message:"NO_TESTED_YET"}});this.studentObjs=this.homeworkUserList,this.isNullSearchData=!1,this.status_obj={loading:!1,error:!1}}else this.errorMessage=t.message,this.status_obj={loading:!1,error:!1},this.commonService.myTranslate([t.message,"lang_cms_common_ok"]).subscribe(e=>{this.commonService.snackError(e[t.message],e.lang_cms_common_ok)})}))}checkStatusStudent(t){for(var e=[],n=0;n<t.length;n++)t[n].confirmedAt&&t[n].confirmedAt?t[n].isMarked=!0:null==t[n].answer||t[n].confirmedAt?null==t[n].answer&&null!=t[n].answerHistory?t[n].mustReSubmit=!0:t[n].isNotSubmit=!0:t[n].isSubmitted=!0,t[n]=Object.assign(Object.assign({},t[n]),{index:n}),e.push(t[n]);return e}parseHomeworkData(t){return t.files&&(t.files=this.commonService.parseJson(t.files)),t}search(){var t=this.commonService.getFormObj(this.form);""!=t.searchContent?this.subscriptions.add(this.apiService.searchStudentHomework(this.homeworkObj.id,this.classObj.id,t.searchContent).subscribe(t=>{if(1==t.success){if(t.data.studentObjs&&0!=t.data.studentObjs.length){if(this.homeworkUserList=this.checkStatusStudent(t.data.studentObjs),0==this.homeworkUserList.length)return this.isNotTestedYet=!0,void(this.status_obj={loading:!1,error:!1,error_obj:{message:"NO_TESTED_YET"}});this.isNullSearchData=!1}else this.isNullSearchData=!0,this.homeworkUserList=[];this.status_obj={loading:!1,error:!1}}else this.isNotTestedYet=!0,this.status_obj={loading:!1,error:!1,error_obj:{message:"NO_TESTED_YET"}}})):(this.homeworkUserList=this.studentObjs,this.isNullSearchData=!1,this.status_obj={loading:!1,error:!1,error_obj:{message:"NO_TESTED_YET"}})}toggleFilterSubmitted(t){this.isSubmitted=!!t.checked}toggleFilterNotSubmit(t){this.isNotSubmit=!!t.checked}toggleFilterMarked(t){this.isMarked=!!t.checked}toggleFilterReSubmit(t){this.mustReSubmit=!!t.checked}confirmFilter(){var t=[],e=[],n=[],o=[];this.isSubmitted&&(t=this.studentObjs.filter(t=>1==t.isSubmitted)),this.isNotSubmit&&(e=this.studentObjs.filter(t=>1==t.isNotSubmit)),this.isMarked&&(n=this.studentObjs.filter(t=>1==t.isMarked)),this.mustReSubmit&&(o=this.studentObjs.filter(t=>1==t.mustReSubmit)),this.isSubmitted||this.isNotSubmit||this.isMarked||this.mustReSubmit?this.homeworkUserList=this.sortIndex([...t,...e,...n,...o]):this.clearFilter()}clearFilter(){this.isSubmitted=!1,this.isNotSubmit=!1,this.isMarked=!1,this.mustReSubmit=!1,this.homeworkUserList=this.studentObjs}exportToExcel(t){setTimeout(function(){var e;null===(e=document.getElementById("table_"+t))||void 0===e||e.click()},1e3)}exportToPDF(){this.commonService.gaEvent("go_to_exp_pdf_homework");const t=this.localize.translateRoute("/admin/homework/export-homework")+"/"+this.classId+"/"+this.homeworkId;window.open(t,"_blank")}resizeImg(t,e,n){var o=document.getElementById("media_content_"+t),i=null==o?void 0:o.offsetWidth;return o?i/e<=1?Math.round(n*(i/e)):Math.round(n):0}sortIndex(t){return t.sort(function(t,e){return t-e})}sortByName(){this.homeworkUserList=this.commonService.sortFirstNameStudents(this.studentObjs)}onResize(t){t.target.innerWidth<768?(this.contentHeight=this.box_content.nativeElement.offsetHeight+45,this.isMobile=!0,this.mode="over",this.hasBackdrop=!0,this.isOpenSideNav=!0):(this.contentHeight=166,this.isMobile=!1,this.mode="side",this.hasBackdrop=!1,this.isOpenSideNav=!0)}checkWitdh(){window.innerWidth<768?(this.isMobile=!0,this.mode="over",this.hasBackdrop=!0):(this.isMobile=!1,this.mode="side",this.hasBackdrop=!1)}isEmpty(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}goToTestReview(t){this.commonService.myNavigationWithQueryString("/admin/homework/mark-exercise/"+t.answer.id,"?backto="+encodeURIComponent("/admin/homework/score-list/"+this.classId+"/"+this.homeworkId))}goToEditHomework(){this.commonService.myNavigation("/admin/homework/add-new-homework/"+this.homeworkObj.id)}disableScroll(){let t=window.pageYOffset||document.documentElement.scrollLeft,e=window.pageXOffset||document.documentElement.scrollTop;window.onscroll=function(){window.scrollTo(t,e)}}enableScroll(){window.onscroll=function(){}}deleteHomework(){this.deleteHomeworkData={homeworkObj:this.homeworkObj,isShow:!0}}closeDeleteHomework(t){t?(this.deleteHomeworkData={homeworkObj:"",isShow:!1},this.commonService.myNavigation("/admin/homework/homework-list/"+this.classObj.id)):this.deleteHomeworkData={homeworkObj:"",isShow:!1}}onFileClose(){this.enableScroll(),this.isShowPreviewFile=!1,this.previewFile=null}onShowFile(t,e,n){this.isShowPreviewFile=!0,this.disableScroll(),this.previewFile=Object.assign(Object.assign({},e),{index:n})}toggleDrawer(){this.drawer.toggle(),this.isOpenSideNav=!this.isOpenSideNav}toggleShowActions(){this.isShowActions=!this.isShowActions,this.isMobile&&(this.contentHeight=0==this.isShowActions?200:this.backUpHeight)}showCopySuccess(){this.commonService.snackSuccess("Sao ch\xe9p th\xe0nh c\xf4ng \u0111\u01b0\u1eddng d\u1eabn n\u1ed9p b\xe0i","")}copylinkToClipboard(t){return`${location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}/bai-tap/${t}`}goToStudentList(){this.commonService.myNavigation("/admin/student/student-list")}ngOnInit(){this.status_obj={loading:!0,error:!1,error_obj:{message:""}},this.homeworkId=this.activeRoute.snapshot.paramMap.get("id"),this.classId=this.activeRoute.snapshot.paramMap.get("class_id"),this.form=this.fb.group({searchContent:new i.h("",i.z.required)}),this.getData(),this.checkWitdh(),this.commonService.translateMetaData({title:"lang_cms_homework_submit_list_title",description:"lang_cms_homework_submit_list_description",image:"lang_cms_homework_image"})}ngAfterViewInit(){this.isMobile?setTimeout(()=>{this.contentHeight=this.box_content.nativeElement.offsetHeight+45,this.backUpHeight=this.box_content.nativeElement.offsetHeight+45},1e3):this.contentHeight=166}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(T.a),_.Ob(s.b),_.Ob(P.a),_.Ob(Zt.c),_.Ob(h.e),_.Ob(c.a),_.Ob(c.i),_.Ob(i.g))},t.\u0275cmp=_.Ib({type:t,selectors:[["app-homework-submit-list"]],viewQuery:function(t,e){if(1&t&&(_.Wc(on,!0),_.Wc(sn,!0)),2&t){let t;_.xc(t=_.cc())&&(e.drawer=t.first),_.xc(t=_.cc())&&(e.box_content=t.first)}},decls:4,vars:4,consts:[[3,"headerTitle","back_link"],[4,"ngIf","ngIfElse"],["doneLoading",""],[3,"data","closeDialog",4,"ngIf"],[4,"ngIf"],[1,"container-fluid","py-3","mt-md-3",3,"resize"],["class","alert alert-danger",4,"ngIf"],["class","tested_list_container","style","border-radius: 5px;",3,"hasBackdrop",4,"ngIf"],["class","py-4",4,"ngIf"],[3,"data","closeDialog"],[3,"fileOption","closePreview"],[1,"alert","alert-danger"],[1,"tested_list_container",2,"border-radius","5px",3,"hasBackdrop"],[1,"test",2,"background-color","#ecf0f5","border","none",3,"mode","opened","ngClass"],["drawer",""],[1,"container-fluid","box-content","pt-2","pb-2"],[1,"row"],[1,"col-md-6"],[1,"text-left"],[1,"homework_title","mt-2","mb-2"],[1,"col-md-6","block-btn"],[1,"d-flex","justify-content-end","align-self-end"],["tabindex","-1","mat-button","",1,"btn",2,"font-size","10px","padding-top","0","color","#0eafc0",3,"cdkCopyToClipboard","click"],[2,"font-size","12px","padding-top","5px"],[1,"mb-1",2,"font-size","14px","color","#8E8E8E"],["class","mb-1","style","font-size: 14px; color: #0EAFC0;",4,"ngIf"],[3,"ngIf"],[1,"text-center"],["class","clickable","style","user-select: none;",3,"click",4,"ngIf"],[2,"background-color","#ecf0f5","overflow","hidden"],[1,"container-fluid","content-zone",2,"background-color","#ecf0f5",3,"ngClass"],[1,"box-content","py-2"],["boxContent",""],[1,"row","pl-0","pr-0","ml-0","mr-0",3,"ngClass"],[1,"col-md-12","pl-0","pr-0"],[1,"row","pl-0","pr-0","ml-0","mr-0","justify-content-between",3,"hidden"],[1,"col-sm-6","d-flex"],["class","clickable","matTooltip","M\u1edf menu",3,"click",4,"ngIf"],["class","clickable","matTooltip","\u0110\xf3ng menu",3,"click",4,"ngIf"],[1,"mb-0","ml-3","align-self-center"],[1,"clickable","link-stu",2,"vertical-align","middle",3,"matTooltip","click"],[2,"vertical-align","middle","color","#646464a1","height","20px","font-size","20px","width","20px"],[1,"truncate_custom",2,"vertical-align","middle",3,"matTooltip"],[1,"col-sm-6","align-self-center"],[1,"d-flex","justify-content-end"],[1,"col-6","pl-0","pr-0","text-right"],[2,"position","relative",3,"formGroup"],["type","text","formControlName","searchContent","placeholder","T\xecm ki\u1ebfm",1,"input-search",3,"keyup.enter"],[1,"search-icon","clickable",3,"click"],[1,"search-ver",2,"vertical-align","middle","font-size","18px","height","16px","width","18px"],[1,"ml-2","mr-2","text-center"],[1,"filter_btn"],["mat-button","",1,"menu-button",3,"matMenuTriggerFor"],[2,"vertical-align","middle","color","#828282"],[2,"font-size","16px","height","16px"],["xPosition","before"],["beforeMenu","matMenu"],["mat-menu-item","",1,"cursorDefault","mb-2",2,"height","30px","line-height","30px",3,"click"],[2,"vertical-align","middle"],["color","primary",2,"vertical-align","middle","margin-left","5px",3,"checked","change"],[1,"d-flex","justify-content-end","px-2"],["mat-menu-item","",1,"clickable",2,"height","30px","line-height","30px",3,"click"],[2,"vertical-align","middle","color","#0EAFC0"],[1,"filter_btn","bg-light"],["mat-button","",1,"menu-button","pl-0","pr-0","pb-0",2,"min-width","auto",3,"matMenuTriggerFor"],[2,"vertical-align","middle","color","#333333"],["menu","matMenu"],["mat-menu-item","",1,"clickable","mb-2",2,"height","30px","line-height","30px",3,"click"],[1,"menu-icon"],["matTooltip","Xu\u1ea5t Excel",2,"vertical-align","middle","color","#828282"],["matTooltip","Xu\u1ea5t PDF",2,"vertical-align","middle","color","#828282"],[1,"col-12",3,"hidden"],[1,"col-6"],[1,"col-6","block-btn"],[1,"col-12"],[1,"col-8"],[1,"col-4"],[1,"d-flex","justify-content-end","align-self-center"],[1,"clickable","d-flex","align-items-center",2,"user-select","none","font-size","16px",3,"click"],[2,"vertical-align","middle","color","#8E8E8E","font-size","19px"],[2,"vertical-align","middle","color","#8E8E8E","font-size","14px"],[1,"clickable","ml-3","d-flex","align-items-center",2,"user-select","none","font-size","16px",3,"click"],[2,"vertical-align","middle","color","#bd3737","font-size","19px"],[2,"vertical-align","middle","color","#bd3737","font-size","14px"],["class","row mt-3",4,"ngIf"],[1,"row","mt-3","ml-0","mr-0",2,"width","100%"],["class","col-12",4,"ngIf","ngIfElse"],["dd",""],["class","box-content py-2",4,"ngIf"],[3,"studentList","homeworkObj","currentDate","typeTable"],[1,"mb-1",2,"font-size","14px","color","#0EAFC0"],["class","row ml-0 mr-0 files_zone mt-3",4,"ngIf"],["class","description text-left align-self-center py-2 px-3",3,"innerHTML",4,"ngIf"],["class","d-flex justify-content-end align-self-center mt-2",4,"ngIf"],[1,"row","ml-0","mr-0","files_zone","mt-3"],["class","col-12 col-sm-12 col-md-12 align-self-center",4,"ngFor","ngForOf"],[1,"col-12","col-sm-12","col-md-12","align-self-center"],[1,"file_obj","d-flex","text-left","py-2","clickable",3,"click"],[2,"font-size","18px","vertical-align","middle","color","#3C8DBC","margin-right","3px","height","20px","width","20px"],[1,"truncate",2,"vertical-align","middle","color","#3C8DBC",3,"matTooltip"],[1,"description","text-left","align-self-center","py-2","px-3",3,"innerHTML"],[1,"d-flex","justify-content-end","align-self-center","mt-2"],[1,"clickable",2,"user-select","none","font-size","16px",3,"click"],[2,"vertical-align","middle","color","#8E8E8E"],[1,"clickable","ml-3",2,"user-select","none","font-size","16px",3,"click"],[1,"clickable",2,"user-select","none",3,"click"],["matTooltip","M\u1edf menu",1,"clickable",3,"click"],[2,"vertical-align","middle","color","#646464","transform","rotateY(180deg)"],["matTooltip","\u0110\xf3ng menu",1,"clickable",3,"click"],[2,"vertical-align","middle","color","#646464"],["class","row ml-0 mr-0  files_zone mt-3",4,"ngIf"],[1,"row","mt-3"],[1,"col-4","pl-0"],["mat-button","",1,"menu-button","menu-button-mb",3,"matMenuTriggerFor"],[1,"mb-1","h6",2,"font-weight","400","font-size","14px"],[1,"row","align-items-center","mx-auto",2,"width","100%"],[1,"col-10","p-0","text-left"],[1,"col-2","p-0","pb-2","d-flex","justify-content-end"],[1,"text-center","mt-3"],[1,"h4"],[3,"studentLists","isNotTestedYet","isOpenSideNav","isHomeworkFlow","obj","goToResult"],[1,"py-4"]],template:function(t,e){if(1&t&&(_.Pb(0,"header-backend",0),_.Nc(1,cn,1,0,"azt-loading-effect",1),_.Nc(2,Ln,6,5,"ng-template",null,2,_.Oc)),2&t){const t=_.yc(3);_.mc("headerTitle",e.homeworkObj.name)("back_link",e.back_link),_.Cb(1),_.mc("ngIf",e.status_obj.loading)("ngIfElse",t)}},directives:[D.a,o.m,U.a,qe,F.a,Je.b,Je.a,o.k,M.b,bt.a,I.a,Je.c,j.a,i.B,i.s,i.l,i.d,i.r,i.j,Ke.d,Ke.a,Ke.b,Xe.a,en,o.l,nn.a],pipes:[o.e,o.u],styles:[".tested_list_container[_ngcontent-%COMP%]{overflow:hidden;height:calc(100vh - 77px - .5rem)}  .mat-drawer-inner-container::-webkit-scrollbar{width:8px;margin:5px}  .mat-drawer-inner-container::-webkit-scrollbar-thumb{background:#cfcece;border-radius:10px}  .mat-drawer-inner-container{overflow:auto!important}.link-stu[_ngcontent-%COMP%]:hover{color:#007bff}.box-content[_ngcontent-%COMP%]{background:inherit;background-color:#f9f9f9;box-sizing:border-box;border:1px solid #e9e9e9;border-radius:5px;box-shadow:none}.exam_info[_ngcontent-%COMP%]{padding:8px 16px}.exam_title[_ngcontent-%COMP%]{font-size:16px;color:#646464}.w-30[_ngcontent-%COMP%]{width:30%}.w-60[_ngcontent-%COMP%]{width:60%}.search-icon[_ngcontent-%COMP%]{position:absolute;right:5px;top:2px;color:#0eafc0}.input-search[_ngcontent-%COMP%]{width:100%;border:1px solid hsla(0,0%,91.8%,.8901960784313725);padding:.1rem .55rem;border-radius:3px;font-size:12px}.input-search[_ngcontent-%COMP%]::placeholder{opacity:.7}.input-search[_ngcontent-%COMP%]:focus{border:1px solid #0eafc0;outline:none}.btn_action[_ngcontent-%COMP%]{background:inherit;background-color:#fafafa;box-sizing:border-box;border:1px solid #f1f1f1;border-radius:0;box-shadow:none}.filter_btn[_ngcontent-%COMP%]   .menu-button[_ngcontent-%COMP%]{font-size:12px;font-weight:400!important;border:1px solid hsla(0,0%,91.8%,.8901960784313725);border-radius:3px;text-transform:none;padding-right:6px;padding-bottom:3px;color:#414141;line-height:20px}.content-zone[_ngcontent-%COMP%]{height:100%}.scrollable-content[_ngcontent-%COMP%]{height:calc(100vh - 466px);overflow-y:scroll;padding-bottom:80px!important}.box-item[_ngcontent-%COMP%]{background-color:#fff;padding:10px;border:1px solid #ccc;border-radius:4px;margin-bottom:10px}.student-item[_ngcontent-%COMP%]{display:flex;position:relative}.student-item[_ngcontent-%COMP%]   .deleteBtn[_ngcontent-%COMP%], .student-item[_ngcontent-%COMP%]   .enterClsWrap[_ngcontent-%COMP%]{display:flex}.stdimg[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-right:10px}.stdinfo[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:auto}.menu-icon[_ngcontent-%COMP%]{vertical-align:middle;color:#828282}.truncate_custom[_ngcontent-%COMP%]{max-width:80%;display:inline-block;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.homework_title[_ngcontent-%COMP%]{font-size:16px;color:#646464;word-break:break-word}.description[_ngcontent-%COMP%], .files_zone[_ngcontent-%COMP%]{background:inherit;background-color:#fafafa;box-sizing:border-box;border:1px solid #f1f1f1;border-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:0;box-shadow:none;font-size:13px;word-break:break-word}.cursorDefault[_ngcontent-%COMP%]{cursor:default}@media (max-width:756px){.tested_list_container[_ngcontent-%COMP%]{height:auto}.truncate_custom[_ngcontent-%COMP%]{max-width:70%}}.input-search-mb[_ngcontent-%COMP%]{width:100%;padding:2px}.menu-button-mb[_ngcontent-%COMP%]{text-align:center;width:100%}  .truncate{word-break:break-word!important;white-space:unset!important}"]}),t})();var An=n("AytR");let Bn=(()=>{class t{constructor(t,e,n,o,s,c,r){this.dialogRef=t,this.apiService=e,this.fb=n,this.commonService=o,this.router=s,this.localizeService=c,this.data=r,this.status_obj={loading:!1,error:!1,error_obj:{message:""}},this.subscriptions=new u.a,this.form=new i.k({}),this.result=!1}getData(){this.status_obj={loading:!0,error:!1,error_obj:{message:""}},this.status_obj=this.data.status?{loading:!1,error:!1,error_obj:{message:""}}:{loading:!1,error:!0,error_obj:{message:"Kh\xf4ng t\u1ea3i \u0111\u01b0\u1ee3c d\u1eef li\u1ec7u"}}}cleanResult(){var t=this.commonService.getFormObj(this.form),e={id:this.data.ans_id,resendNote:t.reason};this.status_obj={loading:!0,error:!1,error_obj:{message:""}},this.subscriptions.add(this.apiService.ResendAnswer(e).subscribe(t=>{1==t.success?(this.commonService.snackSuccess("G\u1eedi y\xeau c\u1ea7u th\xe0nh c\xf4ng",""),this.result=!0,this.onSubmit({result:this.result,id:this.data.ans_id,itemHomework:this.data.itemHomework}),this.data.redirect&&this.commonService.myNavigation("/admin/homework/score-list/"+this.data.classID+"/"+this.data.itemHomework.id),this.status_obj={loading:!1,error:!1,error_obj:{message:""}}):(this.commonService.snackError("G\u1eedi y\xeau c\u1ea7u kh\xf4ng th\xe0nh c\xf4ng",""),this.result=!1,this.onSubmit({result:this.result,id:this.data.ans_id,itemHomework:this.data.itemHomework}),this.status_obj={loading:!1,error:!0,error_obj:{message:t.message}})}))}ngOnInit(){this.getData(),this.form=this.fb.group({reason:new i.h("",i.z.required)})}onNoClick(){this.dialogRef.close()}onSubmit(t){this.dialogRef.close(t)}ngOnDestroy(){this.subscriptions.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(s.g),_.Ob(T.a),_.Ob(i.g),_.Ob(P.a),_.Ob(c.i),_.Ob(h.e),_.Ob(s.a))},t.\u0275cmp=_.Ib({type:t,selectors:[["clean-result-dialog"]],decls:32,vars:8,consts:[[3,"hidden"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],["enctype","multipart/form-data",1,"form-horizontal","text-center",3,"formGroup"],[1,"text-center"],[1,"h5"],[1,"text-left",2,"border","1px dashed red","padding","10px 5px","border-radius","5px"],[1,"h5","text-danger","text-center"],[1,"h5","mb-1"],[1,"text-danger"],[1,"h5","text-danger","mt-1","mb-1"],["type","text","id","reason","formControlName","reason",1,"form-control"],["mat-dialog-actions","",1,"d-flex","float-right","mt-3"],[1,"zalo-share-button"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",2,"margin-left","15px",3,"click"]],template:function(t,e){1&t&&(_.Ub(0,"div",0),_.Ub(1,"div",1),_.Ub(2,"div",2),_.Ub(3,"span",3),_.Pc(4,"..."),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Ub(5,"div",0),_.Ub(6,"form",4),_.Ub(7,"div",5),_.Ub(8,"p",6),_.Pc(9,"Y\xeau c\u1ea7u n\u1ed9p l\u1ea1i b\xe0i"),_.Tb(),_.Tb(),_.Ub(10,"div",7),_.Ub(11,"p",8),_.Pc(12,"(*) L\u01b0u \xfd:"),_.Tb(),_.Ub(13,"p",9),_.Pc(14,"Khi \u1ea5n x\xe1c nh\u1eadn, c\xe2u tr\u1ea3 l\u1eddi c\u1ee7a "),_.Ub(15,"span",10),_.Pc(16),_.Tb(),_.Pc(17," trong b\xe0i t\u1eadp ng\xe0y\xa0"),_.Ub(18,"span",10),_.Pc(19),_.gc(20,"date"),_.Tb(),_.Pc(21,"\xa0s\u1ebd b\u1ecb x\xf3a!"),_.Tb(),_.Pb(22,"hr"),_.Ub(23,"p",11),_.Pc(24,"L\xfd do y\xeau c\u1ea7u n\u1ed9p l\u1ea1i"),_.Tb(),_.Pb(25,"input",12),_.Tb(),_.Tb(),_.Tb(),_.Ub(26,"div",13),_.Ub(27,"div",14),_.Ub(28,"button",15),_.bc("click",function(){return e.cleanResult()}),_.Pc(29," X\xe1c nh\u1eadn "),_.Tb(),_.Tb(),_.Ub(30,"button",16),_.bc("click",function(){return e.onNoClick()}),_.Pc(31,"H\u1ee7y"),_.Tb(),_.Tb()),2&t&&(_.mc("hidden",!e.status_obj.loading),_.Cb(5),_.mc("hidden",e.status_obj.loading),_.Cb(1),_.mc("formGroup",e.form),_.Cb(10),_.Rc(" ",e.data.name," "),_.Cb(3),_.Qc(_.ic(20,5,e.data.deadline?e.data.deadline:e.data.itemHomework.createdAt,"dd/MM/yyyy")))},directives:[i.B,i.s,i.l,i.d,i.r,i.j,s.c],pipes:[o.e],encapsulation:2}),t})(),Vn=(()=>{class t{constructor(t,e,n,o,i,s){this.dialogRef=t,this.apiService=e,this.router=n,this.commonService=o,this.localizeService=i,this.data=s,this.success=!1}ngOnInit(){this.success=this.data.status}checkNextAns(){this.apiService.GetNextObjByHomework(this.data.homeWorkID).subscribe(t=>{0==t.success?(this.dialogRef.close(),this.commonService.myNavigation("/admin/homework/score-list/"+this.data.classID+"/"+this.data.homeWorkID)):(this.dialogRef.close(),this.commonService.myNavigationWithQueryString("/admin/homework/mark-exercise/"+t.data.id,"?backto="+encodeURIComponent(this.data.backtoLink)),setTimeout(()=>{document.location.reload()},500))})}onNoClick(){this.dialogRef.close(),document.location.reload()}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(s.g),_.Ob(T.a),_.Ob(c.i),_.Ob(P.a),_.Ob(h.e),_.Ob(s.a))},t.\u0275cmp=_.Ib({type:t,selectors:[["notice-dialog"]],decls:9,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content","",2,"margin-bottom","20px"],["mat-dialog-actions",""],[1,"btn","btn-primary",2,"margin-right","15px",3,"click"],[1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&(_.Ub(0,"h2",0),_.Pc(1,"Ch\u1ea5m b\xe0i th\xe0nh c\xf4ng!"),_.Tb(),_.Ub(2,"div",1),_.Pc(3),_.Tb(),_.Ub(4,"div",2),_.Ub(5,"button",3),_.bc("click",function(){return e.onNoClick()}),_.Pc(6,"OK"),_.Tb(),_.Ub(7,"button",4),_.bc("click",function(){return e.checkNextAns()}),_.Pc(8,"Ch\u1ea5m ti\u1ebfp"),_.Tb(),_.Tb()),2&t&&(_.Cb(3),_.Rc("B\xe0i l\xe0m n\xe0y \u0111\u01b0\u1ee3c ch\u1ea5m ",e.data.score," \u0111i\u1ec3m"))},directives:[s.h,s.e,s.c],encapsulation:2}),t})();var Gn=n("wZkO"),Wn=n("5RNC");const $n=function(t,e){return{"font-family":"font_chu_dep","font-size.px":t,color:e}};function Jn(t,e){if(1&t&&(_.Ub(0,"div"),_.Ub(1,"div",28),_.Ub(2,"div",29),_.Ub(3,"div",2),_.Ub(4,"h2"),_.Pc(5,"M\u1ed9t ch\u1ea1m th\xeam icon : "),_.Tb(),_.Pb(6,"input",30),_.Tb(),_.Tb(),_.Ub(7,"div",31),_.Ub(8,"div",2),_.Ub(9,"h2"),_.Pc(10,"Hai ch\u1ea1m th\xeam icon : "),_.Tb(),_.Pb(11,"input",32),_.Tb(),_.Tb(),_.Tb(),_.Tb()),2&t){const t=_.fc();_.Cb(1),_.mc("ngStyle",_.sc(1,$n,t.f.fontSize.value,t.f.fontColor.value))}}const Yn=function(t,e){return{"font-family":"font_chu_in","font-size.px":t,color:e}};function Qn(t,e){if(1&t&&(_.Ub(0,"div"),_.Ub(1,"div",28),_.Ub(2,"div",29),_.Ub(3,"div",2),_.Ub(4,"h2"),_.Pc(5,"M\u1ed9t ch\u1ea1m th\xeam icon : "),_.Tb(),_.Pb(6,"input",30),_.Tb(),_.Tb(),_.Ub(7,"div",31),_.Ub(8,"div",2),_.Ub(9,"h2"),_.Pc(10,"Hai ch\u1ea1m th\xeam icon : "),_.Tb(),_.Pb(11,"input",32),_.Tb(),_.Tb(),_.Tb(),_.Tb()),2&t){const t=_.fc();_.Cb(1),_.mc("ngStyle",_.sc(1,Yn,t.f.fontSize.value,t.f.fontColor.value))}}const qn=function(t,e){return{"font-family":"font_chu_nghieng","font-size.px":t,color:e}};function Kn(t,e){if(1&t&&(_.Ub(0,"div"),_.Ub(1,"div",33),_.Ub(2,"div",29),_.Ub(3,"div",2),_.Ub(4,"h2"),_.Pc(5,"M\u1ed9t ch\u1ea1m th\xeam icon : "),_.Tb(),_.Pb(6,"input",30),_.Tb(),_.Tb(),_.Ub(7,"div",31),_.Ub(8,"div",2),_.Ub(9,"h2"),_.Pc(10,"Hai ch\u1ea1m th\xeam icon : "),_.Tb(),_.Pb(11,"input",32),_.Tb(),_.Tb(),_.Tb(),_.Tb()),2&t){const t=_.fc();_.Cb(1),_.mc("ngStyle",_.sc(1,qn,t.f.fontSize.value,t.f.fontColor.value))}}const Xn=function(t,e){return{"font-family":"font_chu_dam","font-size.px":t,color:e}};function Zn(t,e){if(1&t&&(_.Ub(0,"div"),_.Ub(1,"div",28),_.Ub(2,"div",29),_.Ub(3,"div",2),_.Ub(4,"h2"),_.Pc(5,"M\u1ed9t ch\u1ea1m th\xeam icon : "),_.Tb(),_.Pb(6,"input",30),_.Tb(),_.Tb(),_.Ub(7,"div",31),_.Ub(8,"div",2),_.Ub(9,"h2"),_.Pc(10,"Hai ch\u1ea1m th\xeam icon : "),_.Tb(),_.Pb(11,"input",32),_.Tb(),_.Tb(),_.Tb(),_.Tb()),2&t){const t=_.fc();_.Cb(1),_.mc("ngStyle",_.sc(1,Xn,t.f.fontSize.value,t.f.fontColor.value))}}function to(t,e){if(1&t&&(_.Ub(0,"mat-option",34),_.Pc(1),_.Tb()),2&t){const t=e.$implicit;_.mc("value",t.value),_.Cb(1),_.Rc(" ",t.viewValue," ")}}function eo(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",35),_.Ub(1,"img",36),_.bc("click",function(){_.Cc(t);const n=e.index,o=_.fc();return o.changeSrcImg(o.imgTrueArr,n,1)}),_.Tb(),_.Tb()}if(2&t){const t=e.$implicit,n=_.fc();_.Cb(1),_.pc("src","",n.urlImg,"",t.src,"",_.Gc)}}function no(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",35),_.Ub(1,"img",36),_.bc("click",function(){_.Cc(t);const n=e.index,o=_.fc();return o.changeSrcImg(o.imgFalseArr,n,0)}),_.Tb(),_.Tb()}if(2&t){const t=e.$implicit,n=_.fc();_.Cb(1),_.pc("src","",n.urlImg,"",t.src,"",_.Gc)}}let oo=(()=>{class t{constructor(t,e,n){this.fb=t,this.apiService=e,this.commonService=n,this.ChangeEvent=new _.o,this.isShow=!1,this.disabled=!1,this.color="primary",this.touchUi=!1,this.subscription=new u.a,this.dataSettings="",this.form=new i.k({}),this.srcImgTrue="",this.srcImgFalse="",this.base_s3_api="",this.urlImg="/assets/images/classlive/",this.fontFamilies=[{id:0,value:"font_chu_dep",viewValue:"Ch\u1eef \u0111\u1eb9p"},{id:1,value:"font_chu_in",viewValue:"Ch\u1eef in"},{id:2,value:"font_chu_nghieng",viewValue:"Ch\u1eef nghi\xeang"},{id:3,value:"font_chu_dam",viewValue:"Ch\u1eef \u0111\u1eadm"}],this.imgTrueArr=[{id:0,src:"images/rightwrong/right1.png"},{id:1,src:"images/rightwrong/right2.png"},{id:2,src:"images/rightwrong/right3.png"},{id:3,src:"images/rightwrong/right4.png"},{id:4,src:"images/rightwrong/right5.png"}],this.imgFalseArr=[{id:0,src:"images/rightwrong/wrong1.png"},{id:1,src:"images/rightwrong/wrong2.png"},{id:2,src:"images/rightwrong/wrong3.png"},{id:3,src:"images/rightwrong/wrong4.png"},{id:4,src:"images/rightwrong/wrong5.png"}],this.colorArr=[{id:0,name:"red",hashCode:""},{id:1,name:"yellow",hashCode:""},{id:2,name:"green",hashCode:""},{id:3,name:"blue",hashCode:""},{id:4,name:"black",hashCode:""}]}saveConfig(){var t=this.commonService.getFormObj(this.form);this.sharePermissionForTeacherId(JSON.stringify(t)),this.ChangeEvent.emit(t)}get f(){return this.form.controls}sharePermissionForTeacherId(t){this.apiService.SaveClassliveTrueFalseIcon(t).subscribe(t=>{1==t.success||this.commonService.myTranslate([t.message]).subscribe(e=>{this.commonService.snackError(e[t.message],"\u0110\xf3ng")})})}changeFontSize(t){this.form.controls.fontSize.setValue(t.value)}changeUseText(t){0==t.index&&(this.form.controls.useWrongText.setValue(!0),this.form.controls.useCorrectText.setValue(!0)),1==t.index&&(this.form.controls.useWrongText.setValue(!1),this.form.controls.useCorrectText.setValue(!1))}changeSrcImg(t,e,n){1==n&&this.form.controls.urlImgCorrect.setValue(t[e].src),0==n&&this.form.controls.urlImgWrong.setValue(t[e].src)}changeColor(t,e){this.form.controls.fontColor.setValue(t[e].name)}ngOnInit(){this.base_s3_api=An.a.base_s3_api,this.form=this.fb.group({urlImgCorrect:new i.h(this.classliveTrueFalseIcon.urlImgCorrect),urlImgWrong:new i.h(this.classliveTrueFalseIcon.urlImgWrong),textCorrect:new i.h(this.classliveTrueFalseIcon.textCorrect),textWrong:new i.h(this.classliveTrueFalseIcon.textWrong),useCorrectText:new i.h(this.classliveTrueFalseIcon.useCorrectText),useWrongText:new i.h(this.classliveTrueFalseIcon.useWrongText),correctWidth:new i.h(this.classliveTrueFalseIcon.correctWidth),correctHeight:new i.h(this.classliveTrueFalseIcon.correctHeight),wrongWidth:new i.h(this.classliveTrueFalseIcon.wrongWidth),wrongHeight:new i.h(this.classliveTrueFalseIcon.wrongHeight),fontSize:new i.h(this.classliveTrueFalseIcon.fontSize),fontColor:new i.h(this.classliveTrueFalseIcon.fontColor),fontText:new i.h(this.classliveTrueFalseIcon.fontText)}),1==this.classliveTrueFalseIcon.useCorrectText&&this.classliveTrueFalseIcon.useWrongText&&(this.selected=new i.h(0)),0==this.classliveTrueFalseIcon.useCorrectText&&0==this.classliveTrueFalseIcon.useWrongText&&(this.selected=new i.h(1))}ngOnChanges(){}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(i.g),_.Ob(T.a),_.Ob(P.a))},t.\u0275cmp=_.Ib({type:t,selectors:[["azt-settings-mark"]],inputs:{classliveTrueFalseIcon:"classliveTrueFalseIcon",isShow:"isShow"},outputs:{ChangeEvent:"ChangeEvent"},features:[_.Ab],decls:45,vars:13,consts:[[1,"container","py-3","p-0"],[1,"row","p-0","m-0","position-row"],[1,"col-12"],[3,"formGroup","click"],[3,"selectedIndex","selectedTabChange"],["label","Icon Ch\u1eef"],[1,"pt-4"],[4,"ngIf"],[1,"row","m-0","p-0"],[1,"font-size-title","m-0","pt-4"],["step","1","min","12","formControlName","fontSize","max","50","thumbLabel","","color","primary",1,"px-0",2,"width","100%",3,"change"],[1,"font-size-title","m-0","pt-3","pb-3"],["appearance","fill"],["formControlName","fontText"],[3,"value",4,"ngFor","ngForOf"],["label","Icon \u1ea2nh"],[1,"row","p-0","m-0","pt-4"],[1,"d-flex","align-items-center","pb-3"],[1,"m-0","pr-3"],[1,"img-border"],["width","30px","height","30px",3,"src"],[1,"d-flex","pb-3"],["class","pl-3",4,"ngFor","ngForOf"],[1,"hr-line"],[1,"d-flex","align-items-center","pb-3","pt-3"],[1,"d-flex"],[1,"row","p-0","m-0","mt-5"],[1,"button-confirm",3,"click"],[3,"ngStyle"],[1,"row","p-0","m-0","mb-3"],["type","text","formControlName","textCorrect",1,"input-control"],[1,"row","p-0","m-0"],["type","text","formControlName","textWrong",1,"input-control"],[2,"font-style","italic",3,"ngStyle"],[3,"value"],[1,"pl-3"],["width","30px","height","30px",1,"clickable",3,"src","click"]],template:function(t,e){1&t&&(_.Ub(0,"div",0),_.Ub(1,"div",1),_.Ub(2,"div",2),_.Ub(3,"form",3),_.bc("click",function(t){return t.stopPropagation()}),_.Ub(4,"mat-tab-group",4),_.bc("selectedTabChange",function(t){return e.changeUseText(t)}),_.Ub(5,"mat-tab",5),_.Ub(6,"div",6),_.Nc(7,Jn,12,4,"div",7),_.Nc(8,Qn,12,4,"div",7),_.Nc(9,Kn,12,4,"div",7),_.Nc(10,Zn,12,4,"div",7),_.Ub(11,"div",8),_.Ub(12,"div",2),_.Ub(13,"h4",9),_.Pc(14," C\u1ee1 ch\u1eef "),_.Tb(),_.Ub(15,"mat-slider",10),_.bc("change",function(t){return e.changeFontSize(t)}),_.Tb(),_.Tb(),_.Tb(),_.Ub(16,"div",8),_.Ub(17,"div",2),_.Ub(18,"h4",11),_.Pc(19," Ch\u1ecdn font ch\u1eef "),_.Tb(),_.Ub(20,"mat-form-field",12),_.Ub(21,"mat-select",13),_.Nc(22,to,2,2,"mat-option",14),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Ub(23,"mat-tab",15),_.Ub(24,"div",16),_.Ub(25,"div",2),_.Ub(26,"div",17),_.Ub(27,"h2",18),_.Pc(28,"M\u1ed9t ch\u1ea1m th\xeam icon : "),_.Tb(),_.Ub(29,"div",19),_.Pb(30,"img",20),_.Tb(),_.Tb(),_.Ub(31,"div",21),_.Nc(32,eo,2,2,"div",22),_.Tb(),_.Pb(33,"hr",23),_.Ub(34,"div",24),_.Ub(35,"h2",18),_.Pc(36,"Hai ch\u1ea1m th\xeam icon : "),_.Tb(),_.Ub(37,"div",19),_.Pb(38,"img",20),_.Tb(),_.Tb(),_.Ub(39,"div",25),_.Nc(40,no,2,2,"div",22),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Ub(41,"div",26),_.Ub(42,"div",2),_.Ub(43,"button",27),_.bc("click",function(){return e.saveConfig()}),_.Pc(44,"\xc1P D\u1ee4NG"),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb()),2&t&&(_.Cb(3),_.mc("formGroup",e.form),_.Cb(1),_.mc("selectedIndex",e.selected.value),_.Cb(3),_.mc("ngIf","font_chu_dep"==e.f.fontText.value),_.Cb(1),_.mc("ngIf","font_chu_in"==e.f.fontText.value),_.Cb(1),_.mc("ngIf","font_chu_nghieng"==e.f.fontText.value),_.Cb(1),_.mc("ngIf","font_chu_dam"==e.f.fontText.value),_.Cb(12),_.mc("ngForOf",e.fontFamilies),_.Cb(8),_.pc("src","",e.urlImg,"",e.f.urlImgCorrect.value,"",_.Gc),_.Cb(2),_.mc("ngForOf",e.imgTrueArr),_.Cb(6),_.pc("src","",e.urlImg,"",e.f.urlImgWrong.value,"",_.Gc),_.Cb(2),_.mc("ngForOf",e.imgFalseArr))},directives:[i.B,i.s,i.l,Gn.b,Gn.a,o.m,Wn.a,i.r,i.j,y.d,Ot.a,o.l,o.n,i.d,v.n],styles:['@font-face{font-family:font_chu_in;src:url(https://5002373-s3user.cloudstorage.com.vn/viwewiin/storage_public/azota_assets/fonts/Symbola.ttf) format("true-type"),url(https://5002373-s3user.cloudstorage.com.vn/viwewiin/storage_public/azota_assets/fonts/Symbola.eot),url(https://5002373-s3user.cloudstorage.com.vn/viwewiin/storage_public/azota_assets/fonts/Symbola.woff) format("woff"),url(https://5002373-s3user.cloudstorage.com.vn/viwewiin/storage_public/azota_assets/fonts/Symbola.svg) format("svg")}@font-face{font-family:font_chu_dep;src:url(https://5002373-s3user.cloudstorage.com.vn/viwewiin/storage_public/azota_assets/fonts/HP001_5_hang_bold.ttf)}@font-face{font-family:font_chu_nghieng;src:url(https://5002373-s3user.cloudstorage.com.vn/viwewiin/storage_public/azota_assets/fonts/MyriadPro-It.otf)}@font-face{font-family:font_chu_dam;src:url(https://5002373-s3user.cloudstorage.com.vn/viwewiin/storage_public/azota_assets/fonts/MyriadPro-BoldIt.otf)}.input-control[_ngcontent-%COMP%]{display:block;margin-left:20px;min-height:50px;height:50px;width:50px;min-width:50px;padding:10px;border:1px dashed red;text-align:center;background-color:transparent}.input-control[_ngcontent-%COMP%]:focus{background-color:#fff;border-color:#e3e3e3;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.color-picker[_ngcontent-%COMP%]{display:inline-block;width:50px;height:50px;border-radius:50%;border:1px solid #665;margin-right:10px}.font-size-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.button-confirm[_ngcontent-%COMP%]{width:99%;max-width:99%;height:54px;line-height:54px;font-size:15px;padding:0 28px;text-decoration:none;color:#fff;background-color:#26a69a;text-align:center;letter-spacing:.5px;transition:background-color .2s ease-out;cursor:pointer;outline:0;border:1px solid #26a69a;border-radius:6px}.position-row[_ngcontent-%COMP%]{position:relative}.position-button[_ngcontent-%COMP%]{position:absolute;top:0;right:0}.input-number[_ngcontent-%COMP%]{width:50px!important;height:40px!important}[type=number][_ngcontent-%COMP%]{-moz-appearance:none;appearance:none;appearance:textfield;-webkit-appearance:none;-moz-appearance:textfield}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}  .mat-tab-body-content{height:100%;max-height:100%;overflow-y:scroll}.hr-line[_ngcontent-%COMP%]{border-top:3px solid #e3e3e3}.img-border[_ngcontent-%COMP%]{border:1px dashed red;padding:4px}h2[_ngcontent-%COMP%]{font-size:19px}@media screen and (max-width:380px){  .mat-tab-body-content{height:100%;max-height:100%;overflow-y:scroll;min-height:65vh}}']}),t})();function io(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",11),_.Ub(1,"span"),_.Pc(2,"M\u1ed9t ch\u1ea1m \u0111\u1ec3 th\xeam: \u0110. "),_.Pb(3,"br"),_.Pc(4," Hai ch\u1ea1m \u0111\u1ec3 th\xeam: S \xa0\xa0"),_.Tb(),_.Ub(5,"a",12),_.bc("click",function(){return _.Cc(t),_.fc().ClickHide()}),_.Pc(6,"T\xd4I \u0110\xc3 HI\u1ec2U"),_.Tb(),_.Tb()}}let so=(()=>{class t{constructor(t,e){this.dialog=t,this.commonService=e,this.ChangeEvent=new _.o,this.clickHide=!0}ClickHide(){this.clickHide=!1}changeZoom(t){this.ChangeEvent.emit({type:t})}goBack(){this.ChangeEvent.emit({type:"goBack"})}changeSaveSettingMark(t){this.ChangeEvent.emit({event:t,type:"changeSaveSettingMark"})}ngOnInit(){this.classliveTrueFalseIcon=this.data.classliveTrueFalseIcon}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(s.b),_.Ob(P.a))},t.\u0275cmp=_.Ib({type:t,selectors:[["app-header-mark-exercise"]],inputs:{data:"data"},outputs:{ChangeEvent:"ChangeEvent"},decls:24,vars:4,consts:[[1,"view-left"],[1,"menu-button",2,"float","left"],["mat-icon-button","",2,"border-radius","50% !important",3,"click"],[1,"bg-white",2,"font-size","24px","color","#646464","border-radius","50% !important"],["mat-icon-button","",2,"border-radius","50% !important",3,"matMenuTriggerFor"],[1,"class-lits-menu"],["reorder","matMenu"],[3,"classliveTrueFalseIcon","ChangeEvent"],[1,"click-hide","ml-2"],[1,"view-right"],["class","click-hide d-flex justify-content-between",4,"ngIf"],[1,"click-hide","d-flex","justify-content-between"],[3,"click"]],template:function(t,e){if(1&t&&(_.Ub(0,"div",0),_.Ub(1,"div",1),_.Ub(2,"button",2),_.bc("click",function(){return e.goBack()}),_.Ub(3,"mat-icon",3),_.Pc(4,"keyboard_arrow_left"),_.Tb(),_.Tb(),_.Tb(),_.Ub(5,"div",1),_.Ub(6,"button",4),_.Ub(7,"mat-icon",3),_.Pc(8,"reorder"),_.Tb(),_.Tb(),_.Ub(9,"mat-menu",5,6),_.Ub(11,"azt-settings-mark",7),_.bc("ChangeEvent",function(t){return e.changeSaveSettingMark(t)}),_.Tb(),_.Tb(),_.Tb(),_.Ub(12,"div",1),_.Ub(13,"button",2),_.bc("click",function(){return e.changeZoom("zoom_in")}),_.Ub(14,"mat-icon",3),_.Pc(15,"zoom_in"),_.Tb(),_.Tb(),_.Tb(),_.Ub(16,"div",1),_.Ub(17,"button",2),_.bc("click",function(){return e.changeZoom("zoom_out")}),_.Ub(18,"mat-icon",3),_.Pc(19,"zoom_out"),_.Tb(),_.Tb(),_.Tb(),_.Ub(20,"div",8),_.Pc(21),_.Tb(),_.Tb(),_.Ub(22,"div",9),_.Nc(23,io,7,0,"div",10),_.Tb()),2&t){const t=_.yc(10);_.Cb(6),_.mc("matMenuTriggerFor",t),_.Cb(5),_.mc("classliveTrueFalseIcon",e.classliveTrueFalseIcon),_.Cb(10),_.Rc(" ",e.data.fullName," "),_.Cb(2),_.mc("ngIf",1==e.clickHide)}},directives:[M.b,I.a,Ke.d,Ke.a,oo,o.m],styles:[".click-hide[_ngcontent-%COMP%]{justify-content:space-around;padding:9px;border-radius:5px;border:1px solid #fff;background-color:hsla(0,0%,100%,.8470588235);float:left}.click-hide[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:13px;color:#00a7d0}.mat-icon[_ngcontent-%COMP%]{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:33px;width:33px}.mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .mat-icon-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{line-height:33px}@media screen and (min-width:1000px){.view-left[_ngcontent-%COMP%]{max-width:400px;position:fixed;margin:10px;top:0}.view-right[_ngcontent-%COMP%]{max-width:445px;position:fixed;top:0;margin:10px 10px 10px 615px}.click-hide[_ngcontent-%COMP%]   br[_ngcontent-%COMP%]{display:none}}@media screen and (max-width:1000px) and (min-width:700px){.view-left[_ngcontent-%COMP%]{max-width:400px;position:fixed;margin:10px;top:0;left:0}.view-right[_ngcontent-%COMP%]{max-width:445px;position:fixed;top:0;right:0;margin:10px 15px 10px 10px}.click-hide[_ngcontent-%COMP%]   br[_ngcontent-%COMP%]{display:none}}@media screen and (max-width:700px) and (min-width:600px){.view-left[_ngcontent-%COMP%]{max-width:400px;position:fixed;margin:10px;top:0;left:0}.view-right[_ngcontent-%COMP%]{max-width:445px;position:fixed;top:0;right:0;margin:10px 15px 10px 10px}.view-right[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:20px}}@media screen and (max-width:600px){.view-left[_ngcontent-%COMP%]{max-width:400px;position:fixed;margin:10px;top:0;left:0}.view-right[_ngcontent-%COMP%]{max-width:445px;position:fixed;margin:15px;top:45px}.view-right[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:20px}}"]}),t})();function co(t,e){if(1&t&&(_.Ub(0,"div",11),_.Ub(1,"div",12),_.Pc(2,"\u0110i\u1ec3m"),_.Tb(),_.Ub(3,"div",13),_.Pc(4),_.Tb(),_.Tb()),2&t){const t=_.fc();_.Cb(4),_.Rc(" ",t.pointNumber,"")}}function ro(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",16),_.Ub(1,"div",17),_.bc("click",function(){_.Cc(t);const n=e.$implicit,o=e.index;return _.fc(2).ChangeAmoji(n,!1,o)}),_.Pb(2,"img",18),_.Tb(),_.Tb()}if(2&t){const t=e.$implicit;_.Cb(2),_.nc("src",t,_.Gc)}}function ao(t,e){if(1&t&&(_.Ub(0,"div",14),_.Nc(1,ro,3,1,"div",15),_.Tb()),2&t){const t=_.fc();_.Cb(1),_.mc("ngForOf",t.changeAmoji)}}function lo(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",16),_.Ub(1,"div",17),_.bc("click",function(){_.Cc(t);const n=e.$implicit;return _.fc(2).ChangeAmoji(n,!0,!1)}),_.Pb(2,"img",18),_.Tb(),_.Tb()}if(2&t){const t=e.$implicit;_.Cb(2),_.nc("src",t,_.Gc)}}function bo(t,e){if(1&t&&(_.Ub(0,"div",19),_.Nc(1,lo,3,1,"div",15),_.Tb()),2&t){const t=_.fc();_.Cb(1),_.mc("ngForOf",t.emojiObj)}}let ho=(()=>{class t{constructor(t){this.dialog=t,this.ChangeEvent=new _.o,this.emojiObj=[],this.showIconMoji=!1,this.changeAmoji=[]}ShowIconMoji(t){0==t?this.showIconMoji=!0:1==t&&(this.showIconMoji=!1)}ChangeAmoji(t,e,n){1==e?(this.changeAmoji.push(t),this.changeEvent()):0==e&&(this.changeAmoji.splice(n,1),this.changeEvent())}MyTextarea(t){this.getComment=t.target.value,this.changeEvent()}autoResize(t,e){if(1==e){var n=document.getElementById("text");console.log(n),setTimeout(function(){n.style.cssText="height:auto;",n.style.cssText="height:"+n.scrollHeight+"px"},0)}else n=document.getElementById("text"),setTimeout(function(){n.style.cssText="height:auto;",n.style.cssText="height:"+n.scrollHeight+"px"},0)}changeEvent(){this.ChangeEvent.emit({comment:this.getComment,changeAmoji:this.changeAmoji})}ngOnInit(){for(let t=1;t<20;t++)this.emojiObj.push("https://classlive.stume.net/images/emoji/emoji"+t+".gif");if(this.jsonDataResult.commentEmoji)for(let t=0;t<this.jsonDataResult.commentEmoji.length;t++)this.changeAmoji.push(this.jsonDataResult.commentEmoji[t]);this.getComment=this.jsonDataResult.comment,this.autoResize(1,0)}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(s.b))},t.\u0275cmp=_.Ib({type:t,selectors:[["app-comment-score"]],inputs:{pointNumber:"pointNumber",jsonDataResult:"jsonDataResult",ShowChangePoint:"ShowChangePoint"},outputs:{ChangeEvent:"ChangeEvent"},decls:15,vars:7,consts:[[1,"body","row","m-0"],["class","col-3 point-view",4,"ngIf"],[1,"pl-3","pr-3"],[2,"color","#747474","padding","10px 0","font-size","20px","font-family","handwriting_font"],[2,"font-family","'Arial Bold', 'Arial'","font-weight","700","font-style","normal","font-size","26px","color","red"],["id","text",3,"keyup","change"],["class","show-icon-smoji p-0 m-0",4,"ngIf"],[2,"float","right"],["mat-icon-button","",2,"border-radius","50% !important",3,"click"],[1,"bg-white",2,"font-size","24px","color","#646464","border-radius","50% !important"],["class","show-icon-smoji",4,"ngIf"],[1,"col-3","point-view"],[2,"color","#747474","padding","10px","font-size","20px","font-family","handwriting_font"],[2,"font-family","'Arial Bold', 'Arial'","font-weight","700","font-style","normal","font-size","35px","color","red","position","absolute","top","50%","width","100%","margin-left","-15px"],[1,"show-icon-smoji","p-0","m-0"],["class","icon-smoji",4,"ngFor","ngForOf"],[1,"icon-smoji"],[3,"click"],["alt","","width","50",3,"src"],[1,"show-icon-smoji"]],template:function(t,e){1&t&&(_.Ub(0,"div",0),_.Nc(1,co,5,1,"div",1),_.Ub(2,"div"),_.Ub(3,"div",2),_.Ub(4,"div",3),_.Pc(5,"Nh\u1eadn x\xe9t c\u1ee7a gi\xe1o vi\xean"),_.Tb(),_.Ub(6,"div",4),_.Ub(7,"textarea",5),_.bc("keyup",function(t){return e.autoResize(t,1)})("change",function(t){return e.MyTextarea(t)}),_.Pc(8),_.Tb(),_.Tb(),_.Tb(),_.Nc(9,ao,2,1,"div",6),_.Ub(10,"div",7),_.Ub(11,"button",8),_.bc("click",function(){return e.ShowIconMoji(e.showIconMoji)}),_.Ub(12,"mat-icon",9),_.Pc(13," sentiment_satisfied"),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Nc(14,bo,2,1,"div",10)),2&t&&(_.Cb(1),_.mc("ngIf",1==e.ShowChangePoint),_.Cb(1),_.Fb("",1==e.ShowChangePoint?"col-9":"col-12"," p-0 comment-view"),_.Cb(6),_.Qc(e.jsonDataResult.comment),_.Cb(1),_.mc("ngIf",e.changeAmoji),_.Cb(5),_.mc("ngIf",1==e.showIconMoji))},directives:[o.m,M.b,I.a,o.l],styles:[".body[_ngcontent-%COMP%]{width:100%;min-height:130px;background:inherit;background-color:#fff;box-sizing:border-box;border:2px solid red;border-radius:5px;box-shadow:none}.point-view[_ngcontent-%COMP%]{border-right:2px solid red;text-align:center}.comment-view[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:none;line-height:1.15;overflow-y:hidden;padding:0 7px}.show-icon-smoji[_ngcontent-%COMP%]{width:100%;overflow-y:hidden;margin-top:20px;background-color:#fff;margin-bottom:10px;border-radius:5px;padding:15px}.icon-smoji[_ngcontent-%COMP%]{float:left;margin:0 5px}.icon-smoji[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{background-color:#d1d1d1;border-radius:5px}"]}),t})();function mo(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",5),_.bc("click",function(){_.Cc(t);const e=_.fc().$implicit;return _.fc().changePoint(e)}),_.Pc(1),_.Tb()}if(2&t){const t=_.fc().$implicit;_.Cb(1),_.Rc(" ",t," ")}}function go(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",6),_.bc("click",function(){_.Cc(t);const e=_.fc().$implicit;return _.fc().changePoint(e)}),_.Pc(1),_.Tb()}if(2&t){const t=_.fc().$implicit;_.Cb(1),_.Rc(" ",t," ")}}function uo(t,e){if(1&t&&(_.Ub(0,"div"),_.Nc(1,mo,2,1,"div",3),_.Nc(2,go,2,1,"div",4),_.Tb()),2&t){const t=e.$implicit,n=_.fc();_.Cb(1),_.mc("ngIf",n.checkPoint==t),_.Cb(1),_.mc("ngIf",n.checkPoint!=t)}}let po=(()=>{class t{constructor(t){this.dialog=t,this.pointNumber=[10,9,8,7,6,5,4,3,2,1,0],this.checkPoint="",this.ChangeEvent=new _.o}changePoint(t){this.ChangeEvent.emit(t)}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(s.b))},t.\u0275cmp=_.Ib({type:t,selectors:[["app-point-ladder"]],inputs:{checkPoint:"checkPoint"},outputs:{ChangeEvent:"ChangeEvent"},decls:3,vars:1,consts:[[1,"body","row","m-0"],[1,"col-12","row","p-0","m-0"],[4,"ngFor","ngForOf"],["class","point-number clickable","style","background-color: red; color: white;",3,"click",4,"ngIf"],["class","point-number clickable",3,"click",4,"ngIf"],[1,"point-number","clickable",2,"background-color","red","color","white",3,"click"],[1,"point-number","clickable",3,"click"]],template:function(t,e){1&t&&(_.Ub(0,"div",0),_.Ub(1,"div",1),_.Nc(2,uo,3,2,"div",2),_.Tb(),_.Tb()),2&t&&(_.Cb(2),_.mc("ngForOf",e.pointNumber))},directives:[o.l,o.m],styles:[".point-number[_ngcontent-%COMP%]{height:42px;width:42px;background-color:#fff;border-radius:50%;display:flex;justify-content:center;align-items:center;font-family:Arial Bold,Arial;font-weight:700;font-style:normal;font-size:17px;margin-right:10px;margin-bottom:5px}.point-number[_ngcontent-%COMP%]:hover{background-color:#d1d1d1}"]}),t})();function fo(t,e){1&t&&_.Pb(0,"azt-loading-effect")}function vo(t,e){if(1&t&&(_.Ub(0,"div"),_.Ub(1,"div",5),_.Ub(2,"div",6),_.Ub(3,"div",7),_.Pc(4),_.gc(5,"mytranslate"),_.Tb(),_.Tb(),_.Tb(),_.Tb()),2&t){const t=_.fc(2);_.Cb(4),_.Qc(_.hc(5,1,t.errorMessage))}}function Co(t,e){if(1&t&&(_.Ub(0,"div"),_.Pc(1),_.Ub(2,"span",24),_.Pc(3),_.Tb(),_.Ub(4,"span",25),_.Pc(5),_.Tb(),_.Tb()),2&t){const t=_.fc(3);_.Cb(1),_.Tc(" Tr\u1ea3 l\u1eddi \u0111\xfang ",t.countRight,"/",t.markCount," = ",t.pointfix," \u0111i\u1ec3m . "),_.Cb(2),_.Rc("\xa0\u0111 : ",t.countRight," "),_.Cb(2),_.Rc("\xa0 s : ",t.countWrong,"")}}function ko(t,e){1&t&&(_.Ub(0,"div"),_.Pc(1," Ch\u01b0a c\xf3 s\u1ed1 c\xe2u \u0111\xfang, c\xe2u sai "),_.Tb())}function wo(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div"),_.Ub(1,"app-header-mark-exercise",8),_.bc("ChangeEvent",function(e){return _.Cc(t),_.fc(2).changeEvent(e,"header")}),_.Tb(),_.Ub(2,"div",9),_.Pb(3,"iframe",10),_.gc(4,"safe"),_.Tb(),_.Ub(5,"div",11),_.Nc(6,Co,6,5,"div",4),_.Nc(7,ko,2,0,"div",4),_.Tb(),_.Ub(8,"div",12),_.Ub(9,"app-comment-score",13),_.bc("ChangeEvent",function(e){return _.Cc(t),_.fc(2).changeEvent(e,"commentScore")}),_.Tb(),_.Tb(),_.Ub(10,"div",14),_.Ub(11,"div",15),_.Ub(12,"span",16),_.Pc(13),_.Tb(),_.Ub(14,"mat-slide-toggle",17),_.bc("change",function(){return _.Cc(t),_.fc(2).ShowChangePoint()}),_.Tb(),_.Tb(),_.Pb(15,"br"),_.Ub(16,"div",18),_.Ub(17,"button",19),_.bc("click",function(){return _.Cc(t),_.fc(2).saveMark()}),_.Pc(18,"L\u01afU"),_.Tb(),_.Ub(19,"button",20),_.bc("click",function(){return _.Cc(t),_.fc(2).handleOpenReSubmit()}),_.Pc(20,"Y\xcaU C\u1ea6U N\u1ed8P L\u1ea0I"),_.Tb(),_.Tb(),_.Tb(),_.Ub(21,"div",12),_.Ub(22,"app-point-ladder",21),_.bc("ChangeEvent",function(e){return _.Cc(t),_.fc(2).changeEvent(e,"pointLadder")}),_.Tb(),_.Tb(),_.Ub(23,"div",22),_.Ub(24,"button",23),_.bc("click",function(){return _.Cc(t),_.fc(2).saveMark()}),_.Pc(25,"L\u01afU"),_.Tb(),_.Tb(),_.Tb()}if(2&t){const t=_.fc(2);_.Cb(1),_.mc("data",t.senDataHeader),_.Cb(2),_.mc("src",_.hc(4,10,t.iframeSrc),_.Ec),_.Cb(3),_.mc("ngIf",t.markCount>0),_.Cb(1),_.mc("ngIf",!t.markCount),_.Cb(2),_.mc("ShowChangePoint",!0)("pointNumber",t.score)("jsonDataResult",t.jsonData),_.Cb(4),_.Rc("",t.titleShowPointStudent,"\xa0\xa0"),_.Cb(1),_.mc("checked",1==t.curHideMark),_.Cb(8),_.mc("checkPoint",t.checkPoint)}}function xo(t,e){if(1&t&&(_.Nc(0,vo,6,3,"div",4),_.Nc(1,wo,26,12,"div",4)),2&t){const t=_.fc();_.mc("ngIf",""!=t.errorMessage),_.Cb(1),_.mc("ngIf",1==t.checkView&&""==t.errorMessage)}}function _o(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",26),_.Ub(1,"a",27),_.bc("click",function(){return _.Cc(t),_.fc().goBack()}),_.Ub(2,"mat-icon",28),_.Pc(3,"keyboard_backspace"),_.Tb(),_.Pc(4," Quay l\u1ea1i "),_.Tb(),_.Tb()}}let To=(()=>{class t{constructor(t,e,n,o){this.activeRoute=t,this.apiService=e,this.commonService=n,this.dialog=o,this.subscriptions=new u.a,this.result={},this.isLoading=!1,this.answerID="",this.homeworkID="",this.iframeSrc=An.a.classliveUrl+"?t="+Date.now(),this.isMarked=!1,this.jsonData={},this.files=[],this.classID="",this.homeworkObj={},this.studentName={},this.score="n/a",this.mnoteJsonData={},this.pagesCount=0,this.backtoLink="",this.curHideMark=!0,this.changeAmoji="",this.comment="",this.classliveTrueFalseIcon="",this.titleShowPointStudent="",this.checkView=!0,this.senDataHeader={},this.handleIframe=t=>{if("MNoteJson"==t.data.cmd&&(this.isLoading=!0,this.checkData(t)),"MNoteSize"==t.data.cmd){var e=t.data.data;document.getElementById("mNoteIframe").style.height=e.height+"px",this.sendPositionToIframe()}if("MNoteChangeMark"==t.data.cmd&&this.PointHandling(t.data.data),"MNoteLoadComplete"==t.data){var n=this.result.hasOwnProperty("answerObj")?Object.assign({},this.result.answerObj):{};if(this.result.hasOwnProperty("answerObj")){var o=JSON.parse(n.result);if(null!=o){for(let t=0;t<o.pages.length;t++)o.pages[t].backgroundImage&&(o.pages[t].backgroundImage=this.commonService.getMyCdn(o.pages[t].backgroundImage)),o.pages[t].draw&&(o.pages[t].draw=this.commonService.getMyCdn(o.pages[t].draw));o=JSON.stringify(o),n.result=o}var i=JSON.parse(n.files);if(null!=i){for(let t=0;t<i.length;t++)i[t].url&&(i[t].url=this.commonService.getMyCdn(i[t].url)),i[t].thumb&&(i[t].thumb=this.commonService.getMyCdn(i[t].thumb));i=JSON.stringify(i),n.files=i}}var s=this.result.hasOwnProperty("studentObj")?this.result.studentObj:{},c=this.result.hasOwnProperty("classroomObj")?this.result.classroomObj:{},r=this.result.hasOwnProperty("homeworkObj")?this.result.homeworkObj:{};if(this.jsonData&&this.jsonData.hasOwnProperty("pages"))for(let t=0;t<this.jsonData.pages.length;t++)this.jsonData.pages[t].hasOwnProperty("backgroundImage")&&(this.jsonData.pages[t].backgroundImage=this.commonService.getMyCdn(this.jsonData.pages[t].backgroundImage)),this.jsonData.pages[t].hasOwnProperty("draw")&&(this.jsonData.pages[t].draw=this.commonService.getMyCdn(this.jsonData.pages[t].draw));if(this.isMarked)this.jsonData.cmd="initMNote",this.jsonData.mode="edit",this.jsonData.hideMark=this.curHideMark,this.jsonData.answer_obj=n,this.jsonData.student_obj=s,this.jsonData.classroom_obj=c,this.jsonData.homework_obj=r,this.commonService.sendMessageToIFrame("mNote",this.jsonData);else{let t=[];this.files.forEach(e=>{t.push({backgroundImage:e.url})}),this.commonService.sendMessageToIFrame("mNote",{cmd:"initMNote",mode:"edit",pages:t,answer_obj:n,student_obj:s,classroom_obj:c,homework_obj:r,hideMark:this.curHideMark}),this.changeSettingData(this.classliveTrueFalseIcon)}}}}onWindowScroll(){this.sendPositionToIframe()}sendPositionToIframe(){const t=document.getElementById("mNoteIframe");var e=window.scrollY,n=window.innerHeight,o={cmd:"changeScroll",topOffset:e,iframeTopOffset:t.getBoundingClientRect().top,iframeHeight:t.getBoundingClientRect().height,screenHeight:screen.height,windowHeight:n};this.commonService.sendMessageToIFrame("mNote",o)}checkData(t){var e=this.commonService.parseJson(this.answerObj.result);null!=this.answerObj.result&&(""==this.comment&&(this.comment=e.comment),""==this.changeAmoji&&(this.changeAmoji=e.commentEmoji)),this.mnoteJsonData={comment:this.comment,commentEmoji:this.changeAmoji,hideMark:this.curHideMark,pages:t.data.data.pages,point:this.score,staticTextConfig:t.data.data.staticTextConfig},this.uploadAll(this.mnoteJsonData.pages,this.score)}changeSettingData(t){this.commonService.sendMessageToIFrame("mNote",{cmd:"changeStaticSetting",staticTextConfig:t})}changeEvent(t,e){"commentScore"==e?(this.changeAmoji=t.changeAmoji,this.comment=t.comment):"pointLadder"==e?(this.score=t,this.checkPoint=t):"header"==e&&("goBack"==t.type?this.goBack():"changeSaveSettingMark"==t.type?this.changeSettingData(t.event):"zoom_in"==t.type?alert("zoom_in"):"zoom_out"==t.type&&alert("zoom_out"))}ShowChangePoint(){1==this.curHideMark?(this.curHideMark=!1,this.titleShowPointStudent="Hi\u1ec7n \u0111i\u1ec3m v\u1edbi HS"):0==this.curHideMark&&(this.curHideMark=!0,this.titleShowPointStudent="\u1ea8n \u0111i\u1ec3m v\u1edbi HS")}uploadDrawBase64ToCDN(t,e,n){var o=this.apiService.dataURItoBlob(t),i=An.a.base_upload_api+"get_public_upload_url";i+="?file_name="+encodeURIComponent(`essay_note_${e}_${this.answerID}.png`),i+="&file_size="+encodeURIComponent("10000"),i+="&minetype="+encodeURIComponent("image/png");const s={Authorization:"Bearer "+this.apiService.getToken()};this.apiService.commonHttp(i,s,!1).subscribe(t=>{if(1!=t.success)throw"L\u01b0u d\u1eef li\u1ec7u ch\u1ea5m b\xe0i kh\xf4ng th\xe0nh c\xf4ng!";var i=t.data.url;this.apiService.commonPutHttp(t.data.upload_url,{"Content-Type":"image/png","x-amz-acl":"public-read"},o).subscribe(t=>{if(t&&t.success&&0==t.success)throw"L\u01b0u d\u1eef li\u1ec7u ch\u1ea5m b\xe0i kh\xf4ng th\xe0nh c\xf4ng!";this.mnoteJsonData.pages[e].draw=this.commonService.getMyCdn(i),this.pagesCount--,0==this.pagesCount&&this.remark(parseInt(this.answerID),n,JSON.stringify(this.mnoteJsonData))})})}uploadAll(t,e){this.pagesCount=0;for(let n=0;n<t.length;n++)t[n].draw&&this.pagesCount++;if(0==this.pagesCount)this.remark(parseInt(this.answerID),e,JSON.stringify(this.mnoteJsonData));else for(let n=0;n<t.length;n++)t[n].draw&&this.uploadDrawBase64ToCDN(t[n].draw,n,e)}PointHandling(t){this.countRight=t.countRight,this.countWrong=t.countWrong,this.markCount=this.countRight+this.countWrong,this.markCount>0?(this.pointfix=(10*this.countRight/this.markCount).toFixed(1),"force"==t.type?(this.score=this.pointfix,this.checkPoint=Math.round(this.pointfix)):this.checkPoint=this.answerObj.point):this.score=this.answerObj.point}saveMark(){this.commonService.sendMessageToIFrame("mNote",{cmd:"getMNoteJson"})}goBack(){this.commonService.myNavigation(this.backtoLink?this.backtoLink:"/admin/homework/score-list/"+this.classID+"/"+this.homeworkID)}getData(t){this.isLoading=!0,this.errorMessage="",this.answerID=t,this.apiService.getSubmittedAnswers(t).subscribe(t=>{if(1==t.success){if(this.isLoading=!1,this.result=t.data,this.answerObj=t.data.answerObj,this.score=t.data.answerObj.point,this.homeworkID=t.data.homeworkObj.id,this.classID=t.data.classroomObj.id,this.files=this.commonService.parseJson(t.data.answerObj.files),null!=this.files)for(let t=0;t<this.files.length;t++)this.files[t].url=this.commonService.getMyCdn(this.files[t].url),this.files[t].thumb=this.commonService.getMyCdn(this.files[t].thumb);this.homeworkObj=t.data.homeworkObj,this.studentName=t.data.studentObj.fullName;var e=this.commonService.parseJson(t.data.answerObj.result);this.curHideMark=e&&e.hasOwnProperty("hideMark")?e.hideMark:0!=this.homeworkObj.dontShowMark,1==this.curHideMark?this.titleShowPointStudent="\u1ea8n \u0111i\u1ec3m v\u1edbi HS":0==this.curHideMark&&(this.titleShowPointStudent="Hi\u1ec7n \u0111i\u1ec3m v\u1edbi HS"),t.data.answerObj.confirmedAt&&(this.isMarked=!0,this.jsonData=this.commonService.parseJson(this.commonService.getMyCdn(t.data.answerObj.result)),null==this.jsonData&&(this.isMarked=!1)),this.ClassliveTrueFalseIcon(t)}else this.checkView=!1,this.errorMessage=t.message,this.isLoading=!1})}ClassliveTrueFalseIcon(t){if(null==t.data.answerObj.result)this.classliveTrueFalseIcon=null==t.data.classliveTrueFalseIcon?{correctHeight:50,correctWidth:50,fontColor:"red",fontSize:30,fontText:"font_chu_dep",textCorrect:"\u0111",textWrong:"s",urlImgCorrect:"images/rightwrong/right1.png",urlImgWrong:"images/rightwrong/wrong1.png",useCorrectText:!1,useWrongText:!1,wrongHeight:50,wrongWidth:50}:this.commonService.parseJson(t.data.classliveTrueFalseIcon),this.senDataHeader={fullName:t.data.studentObj.fullName,classId:t.data.classroomObj.id,homeworkId:t.data.homeworkObj.id,classliveTrueFalseIcon:this.classliveTrueFalseIcon};else if(null!=t.data.answerObj.result){var e=this.commonService.parseJson(this.jsonData.staticTextConfig);this.senDataHeader={fullName:t.data.studentObj.fullName,classId:t.data.classroomObj.id,homeworkId:t.data.homeworkObj.id,classliveTrueFalseIcon:e}}}openDialog(t,e){this.dialog.open(Vn,{width:"280px",data:{score:e,status:t,homeWorkID:this.homeworkID,classID:this.classID,backtoLink:this.backtoLink}}).afterClosed().subscribe(t=>{})}handleOpenReSubmit(){this.openDialogReSubmit(!0,this.homeworkObj.deadline,this.homeworkObj,this.answerID,this.studentName)}openDialogReSubmit(t,e,n,o,i){this.dialog.open(Bn,{width:"380px",panelClass:"cleanResultDialogBox",data:{status:t,deadline:e,itemHomework:n,ans_id:o,name:i,redirect:!0,classID:this.classID}}).afterClosed().subscribe(t=>{})}remark(t,e,n){this.apiService.saveResult(t,e.toString(),n).subscribe(t=>{1==t.success?(this.openDialog(!0,t.data.point),this.isLoading=!1):(this.commonService.myTranslate([t.message]).subscribe(e=>{this.commonService.snackError("Ch\u1ea5m \u0111i\u1ec3m kh\xf4ng th\xe0nh c\xf4ng: "+e[t.message],"")}),this.isLoading=!1)})}ngOnInit(){this.iframeSrc=this.commonService.getEnvValue("classliveUrl")+"?t="+Date.now();const t=+this.commonService.getMyParam(this.activeRoute,"id");this.backtoLink=this.commonService.getMyQueryParam("backto"),this.getData(t),this.commonService.translateMetaData({title:"lang_cms_homework_mark_exercise_title",description:"lang_cms_homework_mark_exercise_description",image:"lang_cms_test_image"})}ngAfterViewInit(){window.addEventListener("message",this.handleIframe)}ngOnDestroy(){this.subscriptions.unsubscribe(),window.removeEventListener("message",this.handleIframe)}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(c.a),_.Ob(T.a),_.Ob(P.a),_.Ob(s.b))},t.\u0275cmp=_.Ib({type:t,selectors:[["app-mark-exericse-remake"]],hostBindings:function(t,e){1&t&&_.bc("scroll",function(t){return e.onWindowScroll(t)},!1,_.Bc)},decls:5,vars:3,consts:[["id","markContainer",1,"maxW1000"],[4,"ngIf","ngIfElse"],["doneLoading",""],["style","text-align: center; margin-top: 20%;",4,"ngIf"],[4,"ngIf"],[1,"row","justify-content-center","py-5"],[1,"col-12","text-center"],[1,"alert","alert-danger"],[3,"data","ChangeEvent"],["id","mNoteIframe",1,"card-box","pt-1",2,"height","13000px"],["id","mNote","frameborder","0",2,"width","100%","height","100%",3,"src"],[1,"title","ml-1","mr-1"],[1,"pl-1","pr-1","mt-4"],[3,"ShowChangePoint","pointNumber","jsonDataResult","ChangeEvent"],[1,"row","m-0","pl-1","pr-1","mt-3"],[1,"col-6","p-0"],[1,"show-point"],["color","primary",2,"vertical-align","middle",3,"checked","change"],[1,"col-6","p-0","d-flex","justify-content-end"],["mat-raised-button","",1,"bottom-save",2,"background-color","rgba(22, 155, 213, 1)","margin-right","10px","color","white",3,"click"],["mat-raised-button","",1,"bottom-handle",2,"background-color","rgba(255, 255, 255, 1)",3,"click"],[3,"checkPoint","ChangeEvent"],[1,"mt-4","mb-5","ml-1","mr-1"],["mat-raised-button","",1,"bottom_save",2,"background-color","rgba(22, 155, 213, 1)","width","100%","color","white",3,"click"],[2,"color","#008000"],[2,"color","#ff0000"],[2,"text-align","center","margin-top","20%"],[2,"font-size","20px",3,"click"],[2,"font-size","29px","height","30px","width","30px","vertical-align","middle"]],template:function(t,e){if(1&t&&(_.Ub(0,"div",0),_.Nc(1,fo,1,0,"azt-loading-effect",1),_.Nc(2,xo,2,2,"ng-template",null,2,_.Oc),_.Nc(4,_o,5,0,"div",3),_.Tb()),2&t){const t=_.yc(3);_.Cb(1),_.mc("ngIf",e.isLoading)("ngIfElse",t),_.Cb(3),_.mc("ngIf",0==e.checkView)}},directives:[o.m,U.a,so,ho,Xe.a,M.b,po,I.a],pipes:[Ut.i,Ut.k],styles:["#markContainer[_ngcontent-%COMP%], #titleRow[_ngcontent-%COMP%]{position:relative}#titleRow[_ngcontent-%COMP%]{background-color:#00a7d0;height:40px;align-items:center;display:flex;justify-content:space-between;color:#fff}#titleRow[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{cursor:pointer}#titleRow[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;font-weight:500;font-size:16px;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;display:-webkit-box}#titleRow[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{margin-right:5px}button[_ngcontent-%COMP%]{border:none}.listPhotos[_ngcontent-%COMP%]{width:100%;position:fixed;top:40px;bottom:0}.file[_ngcontent-%COMP%]{background:inherit;background-color:#f2f2f2;box-sizing:border-box;border:1px solid #e5e5e5;border-left:0;border-right:0;border-radius:0;box-shadow:none}.file[_ngcontent-%COMP%]:first-child{margin-top:52px}.file[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.back[_ngcontent-%COMP%]{padding:15px 10px}.back-to[_ngcontent-%COMP%]{color:#fff;display:flex}.back-to[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-bottom:10px}.block[_ngcontent-%COMP%]{padding-top:2px}.mat-expansion-indicator[_ngcontent-%COMP%]:after{color:#fff!important}.add-click[_ngcontent-%COMP%]{display:flex}.add-icon[_ngcontent-%COMP%]{margin-top:5px}.file-custom[_ngcontent-%COMP%]{margin-top:6px}.description__share[_ngcontent-%COMP%]{margin-top:10px}.description__share[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;color:#666;margin-right:15px;padding:5px 10px 0}.row-check[_ngcontent-%COMP%]{border-bottom:1px solid #eee;padding:10px 0}.col-check[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:5px}.exercise[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:25px 0 15px;border-bottom:1px solid #eee}.btn-custom[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff;border-radius:5px;padding:10px 25px}.files-custom[_ngcontent-%COMP%]{margin:0}.btn-share[_ngcontent-%COMP%]{border:1px solid #eee}.score-exercise[_ngcontent-%COMP%]{background-color:#ea3d19;border-radius:50%;padding:3px 5px 3px 7px;color:#fff;font-weight:600;margin:0 10px}#listNumber[_ngcontent-%COMP%]{display:contents}#markNumber[_ngcontent-%COMP%]{position:absolute;top:40px;right:50%;z-index:9;margin-right:-60px;color:#fff;text-transform:uppercase;width:120px}@media (min-width:1000px){.mark-edit[_ngcontent-%COMP%]{width:250px}.file[_ngcontent-%COMP%]:first-child{margin-top:0}.listPhotos[_ngcontent-%COMP%]{width:1000px}}@media screen and (min-width:588px){.title[_ngcontent-%COMP%]{height:80px;background-color:#fff;border-radius:5px;display:flex;justify-content:center;align-items:center;font-family:handwriting_font;font-size:33px}.show-point[_ngcontent-%COMP%]{font-weight:700;font-size:20px;vertical-align:middle}}@media screen and (max-width:587px){.title[_ngcontent-%COMP%]{height:65px;background-color:#fff;border-radius:5px;display:flex;justify-content:center;align-items:center;font-family:handwriting_font;font-size:17px}.show-point[_ngcontent-%COMP%]{font-weight:700;font-size:14px;vertical-align:middle}}@media screen and (max-width:470px){.bottom-save[_ngcontent-%COMP%]{display:none}.bottom-handle[_ngcontent-%COMP%]{padding:0 5px}}@media screen and (min-width:470px){.bottom_save[_ngcontent-%COMP%]{display:none}}"]}),t})();function Po(t,e){if(1&t&&(_.Ub(0,"h4",6),_.Pc(1),_.Tb()),2&t){const t=_.fc();_.Cb(1),_.Sc("",t.result.studentObj.fullName,", ",t.result.classroomObj.name," ")}}function Oo(t,e){1&t&&_.Pb(0,"azt-loading-effect")}function Uo(t,e){if(1&t&&(_.Ub(0,"div"),_.Ub(1,"div",9),_.Ub(2,"div",10),_.Ub(3,"div",11),_.Pc(4),_.gc(5,"mytranslate"),_.Tb(),_.Tb(),_.Tb(),_.Tb()),2&t){const t=_.fc(2);_.Cb(4),_.Qc(_.hc(5,1,t.errorMessage))}}function yo(t,e){if(1&t&&(_.Ub(0,"div",12),_.Pb(1,"iframe",13),_.gc(2,"safe"),_.Tb()),2&t){const t=_.fc(2);_.Cb(1),_.mc("src",_.hc(2,1,t.iframeSrc),_.Ec)}}function So(t,e){if(1&t&&(_.Nc(0,Uo,6,3,"div",7),_.Nc(1,yo,3,3,"div",8)),2&t){const t=_.fc();_.mc("ngIf",""!=t.errorMessage),_.Cb(1),_.mc("ngIf",""==t.errorMessage)}}let Mo=(()=>{class t{constructor(t,e,n,o){this.activeRoute=t,this.apiService=e,this.commonService=n,this.dialog=o,this.subscriptions=new u.a,this.result={},this.isLoading=!1,this.answerID="",this.homeworkID="",this.iframeSrc=An.a.classliveUrl+"?t="+Date.now(),this.isMarked=!1,this.jsonData={},this.files=[],this.classID="",this.homeworkObj={},this.studentName={},this.score="n/a",this.mnoteJsonData={},this.pagesCount=0,this.backtoLink="",this.handleIframe=t=>{if("MNoteJson"==t.data.cmd&&(this.isLoading=!0,this.mnoteJsonData=t.data.data,this.uploadAll(this.mnoteJsonData.pages,t.data.data.point)),"MNoteReSubmit"==t.data.cmd&&(console.log("listend res submit"),this.handleOpenReSubmit()),"MNoteLoadComplete"==t.data){const t=document.getElementById("mNote").contentWindow;if(null!==t){var e=this.result.hasOwnProperty("answerObj")?Object.assign({},this.result.answerObj):{};if(this.result.hasOwnProperty("answerObj")){var n=JSON.parse(e.result);if(null!=n){for(let t=0;t<n.pages.length;t++)n.pages[t].backgroundImage&&(n.pages[t].backgroundImage=this.commonService.getMyCdn(n.pages[t].backgroundImage)),n.pages[t].draw&&(n.pages[t].draw=this.commonService.getMyCdn(n.pages[t].draw));n=JSON.stringify(n),e.result=n}var o=JSON.parse(e.files);if(null!=o){for(let t=0;t<o.length;t++)o[t].url&&(o[t].url=this.commonService.getMyCdn(o[t].url)),o[t].thumb&&(o[t].thumb=this.commonService.getMyCdn(o[t].thumb));o=JSON.stringify(o),e.files=o}}var i=this.result.hasOwnProperty("studentObj")?this.result.studentObj:{},s=this.result.hasOwnProperty("classroomObj")?this.result.classroomObj:{},c=this.result.hasOwnProperty("homeworkObj")?this.result.homeworkObj:{},r=this.commonService.parseJson(e.result);if(this.jsonData&&this.jsonData.hasOwnProperty("pages"))for(let t=0;t<this.jsonData.pages.length;t++)this.jsonData.pages[t].hasOwnProperty("backgroundImage")&&(this.jsonData.pages[t].backgroundImage=this.commonService.getMyCdn(this.jsonData.pages[t].backgroundImage)),this.jsonData.pages[t].hasOwnProperty("draw")&&(this.jsonData.pages[t].draw=this.commonService.getMyCdn(this.jsonData.pages[t].draw));if(this.isMarked)this.jsonData.cmd="initMNote",this.jsonData.mode="edit",this.jsonData.answer_obj=e,this.jsonData.student_obj=i,this.jsonData.classroom_obj=s,this.jsonData.homework_obj=c,r&&r.hasOwnProperty("hideMark")&&(this.jsonData.hideMark=r.hideMark),t.postMessage(this.jsonData,"*");else{let n=[];this.files.forEach(t=>{n.push({backgroundImage:t.url})});var a={cmd:"initMNote",mode:"edit",pages:n,answer_obj:e,student_obj:i,classroom_obj:s,homework_obj:c};r&&r.hasOwnProperty("hideMark")&&(a.hideMark=r.hideMark),t.postMessage(a,"*")}}}}}uploadDrawBase64ToCDN(t,e,n){var o=this.apiService.dataURItoBlob(t),i=An.a.base_upload_api+"get_public_upload_url";i+="?file_name="+encodeURIComponent(`essay_note_${e}_${this.answerID}.png`),i+="&file_size="+encodeURIComponent("10000"),i+="&minetype="+encodeURIComponent("image/png");const s={Authorization:"Bearer "+this.apiService.getToken()};this.apiService.commonHttp(i,s,!1).subscribe(t=>{if(1!=t.success)throw this.commonService.snackError("L\u01b0u d\u1eef li\u1ec7u ch\u1ea5m b\xe0i kh\xf4ng th\xe0nh c\xf4ng!",""),this.isLoading=!1,"L\u01b0u d\u1eef li\u1ec7u ch\u1ea5m b\xe0i kh\xf4ng th\xe0nh c\xf4ng!";var i=t.data.url;this.apiService.commonPutHttp(t.data.upload_url,{"Content-Type":"image/png","x-amz-acl":"public-read"},o).subscribe(t=>{if(t&&t.success&&0==t.success)throw this.commonService.snackError("L\u01b0u d\u1eef li\u1ec7u ch\u1ea5m b\xe0i kh\xf4ng th\xe0nh c\xf4ng!",""),this.isLoading=!1,"L\u01b0u d\u1eef li\u1ec7u ch\u1ea5m b\xe0i kh\xf4ng th\xe0nh c\xf4ng!";this.mnoteJsonData.pages[e].draw=this.commonService.getMyCdn(i),this.pagesCount--,0==this.pagesCount&&this.remark(parseInt(this.answerID),n,JSON.stringify(this.mnoteJsonData))})})}uploadAll(t,e){this.pagesCount=0;for(let n=0;n<t.length;n++)t[n].draw&&this.pagesCount++;if(0==this.pagesCount)this.remark(parseInt(this.answerID),e,JSON.stringify(this.mnoteJsonData));else for(let n=0;n<t.length;n++)t[n].draw&&this.uploadDrawBase64ToCDN(t[n].draw,n,e)}goBack(){this.commonService.myNavigation(this.backtoLink?this.backtoLink:"/admin/homework/score-list/"+this.classID+"/"+this.homeworkID);let t=document.body,e=document.getElementById("azota-app-html");e.classList.remove("overflow-hidden"),e.classList.remove("height-100"),t.classList.remove("overflow-hidden"),t.classList.remove("height-100")}getData(t){this.isLoading=!0,this.errorMessage="",this.answerID=t,this.apiService.getSubmittedAnswers(t).subscribe(t=>{if(1==t.success){if(this.isLoading=!1,this.result=t.data,this.score=t.data.answerObj.point,this.homeworkID=t.data.homeworkObj.id,this.classID=t.data.classroomObj.id,this.files=this.commonService.parseJson(t.data.answerObj.files),null!=this.files)for(let t=0;t<this.files.length;t++)this.files[t].url=this.commonService.getMyCdn(this.files[t].url),this.files[t].thumb=this.commonService.getMyCdn(this.files[t].thumb);this.homeworkObj=t.data.homeworkObj,this.studentName=t.data.studentObj.fullName,t.data.answerObj.confirmedAt&&(this.isMarked=!0,this.jsonData=this.commonService.parseJson(this.commonService.getMyCdn(t.data.answerObj.result)),null==this.jsonData&&(this.isMarked=!1))}else this.errorMessage=t.message,this.isLoading=!1})}openDialog(t,e){this.dialog.open(Vn,{width:"280px",data:{score:e,status:t,homeWorkID:this.homeworkID,classID:this.classID,backtoLink:this.backtoLink}}).afterClosed().subscribe(t=>{})}handleOpenReSubmit(){this.openDialogReSubmit(!0,this.homeworkObj.deadline,this.homeworkObj,this.answerID,this.studentName)}openDialogReSubmit(t,e,n,o,i){this.dialog.open(Bn,{width:"380px",panelClass:"cleanResultDialogBox",data:{status:t,deadline:e,itemHomework:n,ans_id:o,name:i,redirect:!0,classID:this.classID}}).afterClosed().subscribe(t=>{})}remark(t,e,n){this.apiService.saveResult(t,e,n).subscribe(t=>{1==t.success?(this.openDialog(!0,t.data.point),this.isLoading=!1):(this.commonService.myTranslate([t.message]).subscribe(e=>{this.commonService.snackError("Ch\u1ea5m \u0111i\u1ec3m kh\xf4ng th\xe0nh c\xf4ng: "+e[t.message],"")}),this.isLoading=!1)})}ngOnInit(){let t=document.body,e=document.getElementById("azota-app-html");e.classList.add("overflow-hidden"),e.classList.add("height-100"),t.classList.add("overflow-hidden"),t.classList.add("height-100"),this.iframeSrc=this.commonService.getEnvValue("classliveUrl")+"?t="+Date.now();const n=+this.commonService.getMyParam(this.activeRoute,"id");this.backtoLink=this.commonService.getMyQueryParam("backto"),this.getData(n),this.commonService.translateMetaData({title:"lang_cms_homework_mark_exercise_title",description:"lang_cms_homework_mark_exercise_description",image:"lang_cms_test_image"})}ngAfterViewInit(){window.addEventListener("message",this.handleIframe)}ngOnDestroy(){this.subscriptions.unsubscribe(),window.removeEventListener("message",this.handleIframe)}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(c.a),_.Ob(T.a),_.Ob(P.a),_.Ob(s.b))},t.\u0275cmp=_.Ib({type:t,selectors:[["app-mark-exericse"]],decls:8,vars:3,consts:[["id","markContainer",1,"maxW1000"],["id","titleRow"],["mat-button","","title","Quay l\u1ea1i",3,"click"],["class","studentInfo","style","padding-right: 10px;",4,"ngIf"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"studentInfo",2,"padding-right","10px"],[4,"ngIf"],["class","card-box listPhotos",4,"ngIf"],[1,"row","justify-content-center","py-5"],[1,"col-12","text-center"],[1,"alert","alert-danger"],[1,"card-box","listPhotos"],["id","mNote","frameborder","0",2,"width","100%","height","100%",3,"src"]],template:function(t,e){if(1&t&&(_.Ub(0,"div",0),_.Ub(1,"div",1),_.Ub(2,"mat-icon",2),_.bc("click",function(){return e.goBack()}),_.Pc(3,"keyboard_arrow_left"),_.Tb(),_.Nc(4,Po,2,2,"h4",3),_.Tb(),_.Nc(5,Oo,1,0,"azt-loading-effect",4),_.Nc(6,So,2,2,"ng-template",null,5,_.Oc),_.Tb()),2&t){const t=_.yc(7);_.Cb(4),_.mc("ngIf",e.result.classroomObj),_.Cb(1),_.mc("ngIf",e.isLoading)("ngIfElse",t)}},directives:[I.a,o.m,U.a],pipes:[Ut.i,Ut.k],styles:["#markContainer[_ngcontent-%COMP%], #titleRow[_ngcontent-%COMP%]{position:relative}#titleRow[_ngcontent-%COMP%]{background-color:#00a7d0;height:40px;align-items:center;display:flex;justify-content:space-between;color:#fff}#titleRow[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{cursor:pointer}#titleRow[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;font-weight:500;font-size:16px;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;display:-webkit-box}#titleRow[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{margin-right:5px}button[_ngcontent-%COMP%]{border:none}.listPhotos[_ngcontent-%COMP%]{width:100%;position:fixed;top:40px;bottom:0}.file[_ngcontent-%COMP%]{background:inherit;background-color:#f2f2f2;box-sizing:border-box;border:1px solid #e5e5e5;border-left:0;border-right:0;border-radius:0;box-shadow:none}.file[_ngcontent-%COMP%]:first-child{margin-top:52px}.file[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.back[_ngcontent-%COMP%]{padding:15px 10px}.back-to[_ngcontent-%COMP%]{color:#fff;display:flex}.back-to[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-bottom:10px}.block[_ngcontent-%COMP%]{padding-top:2px}.mat-expansion-indicator[_ngcontent-%COMP%]:after{color:#fff!important}.add-click[_ngcontent-%COMP%]{display:flex}.add-icon[_ngcontent-%COMP%]{margin-top:5px}.file-custom[_ngcontent-%COMP%]{margin-top:6px}.description__share[_ngcontent-%COMP%]{margin-top:10px}.description__share[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;color:#666;margin-right:15px;padding:5px 10px 0}.row-check[_ngcontent-%COMP%]{border-bottom:1px solid #eee;padding:10px 0}.col-check[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:5px}.exercise[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:25px 0 15px;border-bottom:1px solid #eee}.btn-custom[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff;border-radius:5px;padding:10px 25px}.files-custom[_ngcontent-%COMP%]{margin:0}.btn-share[_ngcontent-%COMP%]{border:1px solid #eee}.score-exercise[_ngcontent-%COMP%]{background-color:#ea3d19;border-radius:50%;padding:3px 5px 3px 7px;color:#fff;font-weight:600;margin:0 10px}#listNumber[_ngcontent-%COMP%]{display:contents}#markNumber[_ngcontent-%COMP%]{position:absolute;top:40px;right:50%;z-index:9;margin-right:-60px;color:#fff;text-transform:uppercase;width:120px}@media (min-width:1000px){.mark-edit[_ngcontent-%COMP%]{width:250px}.file[_ngcontent-%COMP%]:first-child{margin-top:0}.listPhotos[_ngcontent-%COMP%]{width:1000px}}"]}),t})(),Io=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_.Ib({type:t,selectors:[["homework-master-page"]],decls:2,vars:0,consts:[["id","homework-layout"]],template:function(t,e){1&t&&(_.Ub(0,"div",0),_.Pb(1,"router-outlet"),_.Tb())},directives:[c.m],styles:[""]}),t})();function jo(t,e){if(1&t&&(_.Ub(0,"span",14),_.Pc(1),_.Tb()),2&t){const t=_.fc().$implicit;_.Cb(1),_.Rc("",t.className,", ")}}function No(t,e){if(1&t&&(_.Ub(0,"span",14),_.Pc(1),_.Tb()),2&t){const t=_.fc().$implicit;_.Cb(1),_.Rc(" ",t.className," ")}}function Do(t,e){if(1&t&&(_.Ub(0,"span",7),_.Nc(1,jo,2,1,"span",13),_.Nc(2,No,2,1,"span",13),_.Tb()),2&t){const t=e.index,n=_.fc();_.Cb(1),_.mc("ngIf",t<n.listHomework.length-1),_.Cb(1),_.mc("ngIf",t==n.listHomework.length-1)}}function Fo(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",17),_.Ub(1,"p",18),_.Pc(2),_.Tb(),_.Ub(3,"div",19),_.Ub(4,"button",20),_.bc("click",function(){return _.Cc(t),_.fc(2).showCopySuccess()}),_.Ub(5,"span",21),_.Ub(6,"mat-icon",22),_.Pc(7,"file_copy"),_.Tb(),_.Pc(8," \xa0Copy link "),_.Tb(),_.Tb(),_.Tb(),_.Tb()}if(2&t){const t=e.$implicit,n=_.fc(2);_.Cb(1),_.nc("matTooltip",t.className),_.Cb(1),_.Rc("L\u1edbp : ",t.className,""),_.Cb(2),_.mc("cdkCopyToClipboard",n.copylinkToClipboard(t.hashId))}}function Eo(t,e){if(1&t&&(_.Ub(0,"div",15),_.Nc(1,Fo,9,3,"div",16),_.Tb()),2&t){const t=_.fc();_.Cb(1),_.mc("ngForOf",t.listHomework)}}function Ho(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",24),_.Ub(1,"p",25),_.Pc(2),_.Tb(),_.Ub(3,"div",19),_.Ub(4,"button",20),_.bc("click",function(){return _.Cc(t),_.fc(2).showCopySuccess()}),_.Ub(5,"span",21),_.Ub(6,"mat-icon",22),_.Pc(7,"file_copy"),_.Tb(),_.Pc(8," \xa0Copy link "),_.Tb(),_.Tb(),_.Tb(),_.Tb()}if(2&t){const t=e.$implicit,n=_.fc(2);_.Cb(1),_.nc("matTooltip",t.className),_.Cb(1),_.Rc("L\u1edbp : ",t.className,""),_.Cb(2),_.mc("cdkCopyToClipboard",n.copylinkToClipboard(t.hashId))}}function zo(t,e){if(1&t&&(_.Ub(0,"div",15),_.Nc(1,Ho,9,3,"div",23),_.Tb()),2&t){const t=_.fc();_.Cb(1),_.mc("ngForOf",t.listHomework)}}let Lo=(()=>{class t{constructor(t,e,n,o,i,s){this.activeRoute=t,this.apiService=e,this.location=n,this.router=o,this.commonService=i,this.localizeService=s,this.subscriptions=new u.a,this.isLoading=!0,this.nameExam=""}getListHomeWork(t){this.subscriptions.add(this.apiService.getHomeSuccessHomeWork(t).subscribe(t=>{1==t.success?(this.listHomework=t.data,this.nameExam=this.listHomework[0].name,this.isLoading=!1):(this.commonService.myTranslate([t.message,"lang_cms_common_ok"]).subscribe(e=>{this.commonService.snackError(e[t.message],e.lang_cms_common_ok)}),this.isLoading=!0)}))}callbackMenuEvent(t){}showCopySuccess(){this.commonService.snackSuccess("Sao ch\xe9p th\xe0nh c\xf4ng \u0111\u01b0\u1eddng d\u1eabn n\u1ed9p b\xe0i","")}copylinkToClipboard(t){return`${location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}/bai-tap/${t}`}redirectClasses(){this.commonService.myNavigation("/admin/homework/classes")}redirectHomeworkList(t,e){this.commonService.myNavigation("/admin/homework/score-list/"+t+"/"+e)}ngOnInit(){Object(x.b)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.lstIds=this.commonService.getMyParam(this.activeRoute,"ids"),this.lstIds=this.lstIds.replace("[",""),this.lstIds=this.lstIds.replace("]",""),this.lstIds=this.lstIds.trim(),this.lstIds=this.lstIds.split(",");for(let t=0;t<this.lstIds.length;t++)this.lstIds[t]=parseInt(this.lstIds[t]);this.getListHomeWork(this.lstIds)})}ngOnDestroy(){this.subscriptions.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(c.a),_.Ob(T.a),_.Ob(o.i),_.Ob(c.i),_.Ob(P.a),_.Ob(h.e))},t.\u0275cmp=_.Ib({type:t,selectors:[["app-create-homework-success"]],decls:23,vars:8,consts:[[3,"menu_objs","headerTitle","back_link","MenuEvent"],[1,"container","py-5"],[1,"row","p-0","m-0"],[1,"col-md-2","p-0","m-0"],[1,"col-md-8","p-0","m-0"],[1,"box--create"],[1,"text-center","mx-auto"],[1,"font-weight-bold"],["class","font-weight-bold",4,"ngFor","ngForOf"],["class","row p-0 m-0 pt-3",4,"ngIf"],[1,"row","p-0","m-0","pt-5"],[1,"col-12","text-center"],[1,"clickable","text--blue",3,"click"],["style","word-break: break-word;",4,"ngIf"],[2,"word-break","break-word"],[1,"row","p-0","m-0","pt-3"],["class","col-md-4 text-center pb-3 d-flex flex-col",4,"ngFor","ngForOf"],[1,"col-md-4","text-center","pb-3","d-flex","flex-col"],[1,"text--over","m-0","pb-2",3,"matTooltip"],[1,"width-100"],[1,"button--copy",3,"cdkCopyToClipboard","click"],[1,"d-flex",2,"vertical-align","middle","align-items","center"],[2,"font-size","24px","color","#3c8dbc"],["class","col-md-12 text-center pb-3 d-flex flex-col",4,"ngFor","ngForOf"],[1,"col-md-12","text-center","pb-3","d-flex","flex-col"],[1,"m-0","pb-2",3,"matTooltip"]],template:function(t,e){1&t&&(_.Ub(0,"header-backend",0),_.bc("MenuEvent",function(t){return e.callbackMenuEvent(t)}),_.Tb(),_.Ub(1,"div",1),_.Ub(2,"div",2),_.Pb(3,"div",3),_.Ub(4,"div",4),_.Ub(5,"div",5),_.Ub(6,"div",6),_.Ub(7,"h4",7),_.Pc(8),_.Tb(),_.Tb(),_.Ub(9,"p"),_.Pc(10," Th\u1ea7y c\xf4 \u0111\xe3 t\u1ea1o th\xe0nh c\xf4ng "),_.Ub(11,"span",7),_.Pc(12),_.Tb(),_.Pc(13,"giao cho l\u1edbp "),_.Nc(14,Do,3,2,"span",8),_.Pc(15,". Th\u1ea7y c\xf4 th\u1ef1c hi\u1ec7n copy link b\xe0i t\u1eadp b\xean d\u01b0\u1edbi v\xe0 g\u1eedi link cho c\xe1c l\u1edbp t\u01b0\u01a1ng \u1ee9ng qua Zalo, Messenger ho\u1eb7c c\xe1c m\u1ea1ng x\xe3 h\u1ed9i kh\xe1c \u0111\u1ec3 h\u1ecdc sinh c\xf3 th\u1ec3 l\xe0m b\xe0i v\xe0 n\u1ed9p b\xe0i. "),_.Tb(),_.Nc(16,Eo,2,1,"div",9),_.Nc(17,zo,2,1,"div",9),_.Ub(18,"div",10),_.Ub(19,"div",11),_.Ub(20,"div",12),_.bc("click",function(){return e.redirectClasses()}),_.Pc(21,"Quay v\u1ec1 m\xe0n danh s\xe1ch b\xe0i t\u1eadp c\xe1c l\u1edbp"),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Pb(22,"div",3),_.Tb(),_.Tb()),2&t&&(_.mc("menu_objs",e.menu_objs)("headerTitle","Th\xeam b\xe0i t\u1eadp th\xe0nh c\xf4ng")("back_link","/admin/homework/classes"),_.Cb(8),_.Rc("T\u1ea1o th\xe0nh c\xf4ng ",e.nameExam," "),_.Cb(4),_.Rc("",e.nameExam," "),_.Cb(2),_.mc("ngForOf",e.listHomework),_.Cb(2),_.mc("ngIf",(null==e.listHomework?null:e.listHomework.length)>1),_.Cb(1),_.mc("ngIf",1==(null==e.listHomework?null:e.listHomework.length)))},directives:[D.a,o.l,o.m,j.a,bt.a,I.a],styles:[".box--create[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ececec;border-radius:5px;padding:20px}.button--copy[_ngcontent-%COMP%]{background-color:#f7f7f7;border:1px solid #e8e8e8;border-radius:5px;cursor:pointer;padding:8px 18px;font-size:13px;text-transform:capitalize;color:#3c8dbc;align-items:center;vertical-align:middle}.box-class[_ngcontent-%COMP%], .flex-col[_ngcontent-%COMP%]{flex-direction:column}.flex-col[_ngcontent-%COMP%]{justify-content:center}.text--blue[_ngcontent-%COMP%]{color:#3c8dbc}.text--over[_ngcontent-%COMP%]{display:inline-block;text-overflow:ellipsis;overflow:hidden;max-width:99%;white-space:nowrap}@media screen and (max-width:767px){.width-100[_ngcontent-%COMP%]{width:100%;max-width:100%}.button--copy[_ngcontent-%COMP%]{width:100%}}"]}),t})();function Ro(t,e){if(1&t){const t=_.Vb();_.Ub(0,"button",18),_.bc("click",function(){return _.Cc(t),_.fc().UpdateClass()}),_.Ub(1,"mat-icon"),_.Pc(2,"edit"),_.Tb(),_.Pc(3," S\u1eeda l\u1edbp "),_.Tb()}}function Ao(t,e){if(1&t){const t=_.Vb();_.Ub(0,"button",18),_.bc("click",function(){_.Cc(t);const e=_.fc();return e.CopyClassGroup(e.Classroom.id)}),_.Ub(1,"mat-icon"),_.Pc(2,"filter_none"),_.Tb(),_.Pc(3," Nh\xe2n b\u1ea3n l\u1edbp "),_.Tb()}}function Bo(t,e){if(1&t){const t=_.Vb();_.Ub(0,"button",18),_.bc("click",function(){_.Cc(t);const e=_.fc();return e.MoveClassGroupToStorage(e.Classroom.id)}),_.Ub(1,"mat-icon"),_.Pc(2,"sd_storage"),_.Tb(),_.Pc(3," \u0110\u01b0a v\xe0o l\u01b0u tr\u1eef "),_.Tb()}}function Vo(t,e){1&t&&(_.Ub(0,"button",19),_.Ub(1,"mat-icon"),_.Pc(2,"link"),_.Tb(),_.Pc(3," Nh\u1eadp 2 l\u1edbp th\xe0nh 1 "),_.Tb())}function Go(t,e){if(1&t){const t=_.Vb();_.Ub(0,"button",18),_.bc("click",function(){_.Cc(t);const e=_.fc();return e.RestoreClassGroup(e.Classroom.id)}),_.Ub(1,"mat-icon"),_.Pc(2,"restore"),_.Tb(),_.Pc(3," Kh\xf4i ph\u1ee5c "),_.Tb()}}let Wo=(()=>{class t{constructor(t,e,n){this.apiService=t,this.fb=e,this.commonService=n,this.Classroom={},this.Screen="",this.ChangeEvent=new _.o}MoveClassGroupToStorage(t){this.apiService.MoveClassGroupToStorage(t).subscribe(t=>{1==t.success?(this.ChangeEvent.emit(""),this.commonService.snackSuccess("\u0110\u01b0a v\xe0o l\u01b0u tr\u1eef th\xe0nh c\xf4ng.","")):this.commonService.snackError("\u0110\u01b0a v\xe0o l\u01b0u tr\u1eef kh\xf4ng th\xe0nh c\xf4ng.","")})}CopyClassGroup(t){this.apiService.CopyClassGroup(t).subscribe(t=>{1==t.success?(this.ChangeEvent.emit(""),this.commonService.snackSuccess("Nh\xe2n b\u1ea3n l\u1edbp h\u1ecdc th\xe0nh c\xf4ng.","")):this.commonService.snackError("Nh\xe2n b\u1ea3n l\u1edbp h\u1ecdc kh\xf4ng th\xe0nh c\xf4ng.","")})}RestoreClassGroup(t){this.apiService.RestoreClassGroup(t).subscribe(t=>{1==t.success?(this.ChangeEvent.emit(""),this.commonService.snackSuccess("Kh\xf4i ph\u1ee5c l\u1edbp h\u1ecdc th\xe0nh c\xf4ng.","")):this.commonService.snackError("Kh\xf4i ph\u1ee5c l\u1edbp h\u1ecdc kh\xf4ng th\xe0nh c\xf4ng.","")})}DeleteClassGroup(t){this.apiService.DeleteClassGroup(t).subscribe(t=>{1==t.success?(this.ChangeEvent.emit(""),this.commonService.snackSuccess("X\xf3a l\u1edbp h\u1ecdc th\xe0nh c\xf4ng.","")):this.commonService.snackError("X\xf3a l\u1edbp h\u1ecdc kh\xf4ng th\xe0nh c\xf4ng.","")})}goToListStudent(){this.commonService.myNavigation("/admin/student/new-class")}UpdateClass(){this.ChangeEvent.emit({type:"UpDate",id:this.Classroom.id,className:this.Classroom.name,year:this.Classroom.year,groupId:this.Classroom.classroomGroupId})}ngOnInit(){}ngOnChanges(){}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(T.a),_.Ob(i.g),_.Ob(P.a))},t.\u0275cmp=_.Ib({type:t,selectors:[["azt-information-class-box"]],inputs:{Classroom:"Classroom",Screen:"Screen"},outputs:{ChangeEvent:"ChangeEvent"},features:[_.Ab],decls:30,vars:10,consts:[[1,"content","p-2"],[1,"class-title",2,"min-height","fit-content"],[1,"stdinfo-fullname"],[2,"vertical-align","middle"],[1,"title-class"],[1,"class-block","d-none","d-lg-inline-flex"],[1,"class-name-text"],[1,"d-lg-none"],[1,"clickable",3,"matMenuTriggerFor"],[2,"color","rgb(128, 128, 128)","vertical-align","middle","width","24px","height","24px","font-size","24px"],["xPosition","before"],["menu","matMenu"],["class","setting_options","mat-menu-item","",3,"click",4,"ngIf"],["class","setting_options","mat-menu-item","",4,"ngIf"],["mat-menu-item","",1,"setting_options",2,"color","red",3,"click"],[2,"color","red"],[1,"d-flex","justify-content-between"],[2,"font-size","11px","color","rgb(133, 133, 133)"],["mat-menu-item","",1,"setting_options",3,"click"],["mat-menu-item","",1,"setting_options"]],template:function(t,e){if(1&t&&(_.Ub(0,"div",0),_.Ub(1,"div",1),_.Ub(2,"div",2),_.Ub(3,"span",3),_.Ub(4,"div",4),_.Ub(5,"span",5),_.Ub(6,"span",6),_.Pc(7),_.Tb(),_.Tb(),_.Ub(8,"span",7),_.Pc(9),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Ub(10,"div"),_.Ub(11,"a",8),_.Ub(12,"mat-icon",9),_.Pc(13,"more_horiz"),_.Tb(),_.Tb(),_.Ub(14,"mat-menu",10,11),_.Nc(16,Ro,4,0,"button",12),_.Nc(17,Ao,4,0,"button",12),_.Nc(18,Bo,4,0,"button",12),_.Nc(19,Vo,4,0,"button",13),_.Nc(20,Go,4,0,"button",12),_.Ub(21,"button",14),_.bc("click",function(){return e.DeleteClassGroup(e.Classroom.id)}),_.Ub(22,"mat-icon",15),_.Pc(23,"delete"),_.Tb(),_.Pc(24," X\xf3a l\u1edbp "),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Ub(25,"div",16),_.Ub(26,"div"),_.Pc(27),_.Tb(),_.Ub(28,"div",17),_.Pc(29),_.Tb(),_.Tb(),_.Tb()),2&t){const t=_.yc(15);_.Cb(7),_.Qc(e.Classroom.name),_.Cb(2),_.Rc(" ",e.Classroom.name," "),_.Cb(2),_.mc("matMenuTriggerFor",t),_.Cb(5),_.mc("ngIf",""==e.Screen),_.Cb(1),_.mc("ngIf",""==e.Screen),_.Cb(1),_.mc("ngIf",""==e.Screen),_.Cb(1),_.mc("ngIf",""==e.Screen),_.Cb(1),_.mc("ngIf","Storage"==e.Screen),_.Cb(7),_.Rc("S\u1ef9 s\u1ed1: ",e.Classroom.countStudents,""),_.Cb(2),_.Rc("N\u0103m h\u1ecdc ",e.Classroom.year,"")}},directives:[Ke.d,I.a,Ke.a,o.m,Ke.b],styles:[".content[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #e6e6e6;border-radius:3px}.class-title[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px;color:#5b5b5b;display:flex;justify-content:space-between}.class-title[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;text-transform:none;border-radius:3px;padding:3px 7px;background:#42aba2;color:#fff}.stdinfo-fullname[_ngcontent-%COMP%]{white-space:normal;word-wrap:break-word;padding-bottom:8px}.class-block[_ngcontent-%COMP%]{display:inline-flex;align-items:center}button.setting_options[_ngcontent-%COMP%]{text-transform:none;display:flex;justify-content:left;align-items:center;height:30px}button.setting_options[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:grey;margin-right:7px}mat-icon[_ngcontent-%COMP%]{height:20px;width:20px;font-size:19px}"]}),t})();function $o(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",16),_.bc("click",function(){return _.Cc(t),_.fc().selectAll(!0)}),_.Pc(1,"Ch\u1ecdn t\u1ea5t c\u1ea3"),_.Tb()}}function Jo(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",16),_.bc("click",function(){return _.Cc(t),_.fc().selectAll(!1)}),_.Pc(1,"B\u1ecf ch\u1ecdn t\u1ea5t c\u1ea3"),_.Tb()}}function Yo(t,e){1&t&&_.Pb(0,"div",17)}function Qo(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",19),_.Ub(1,"mat-checkbox",20),_.bc("change",function(n){_.Cc(t);const o=e.index;return _.fc(2).changeValue(n,o)}),_.Pc(2),_.Tb(),_.Tb()}if(2&t){const t=e.$implicit,n=e.index,o=_.fc(2);_.Cb(1),_.oc("id","mat-check",n,""),_.mc("checked",o.selectedAll),_.Cb(1),_.Rc(" ",t.name," ")}}function qo(t,e){if(1&t&&(_.Ub(0,"div",11),_.Nc(1,Qo,3,3,"div",18),_.Tb()),2&t){const t=_.fc();_.Cb(1),_.mc("ngForOf",t.classroomObjs)}}function Ko(t,e){1&t&&(_.Ub(0,"div",21),_.Pc(1," M\u1eddi ch\u1ecdn c\xe1c l\u1edbp b\u1ea1n mu\u1ed1n t\u1ea1o cho kh\xf3a m\u1edbi. "),_.Tb())}function Xo(t,e){1&t&&(_.Ub(0,"div",22),_.Pc(1," Click v\xe0o c\xe1c m\u1ee5c tr\xean ph\u1ea7n (Ch\u1ecdn l\u1edbp). "),_.Tb())}function Zo(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",23),_.Ub(1,"div",24),_.Ub(2,"input",25),_.bc("keyup",function(){_.Cc(t);const n=e.index;return _.fc().ValidateInput(n)}),_.Tb(),_.Ub(3,"mat-icon",26),_.bc("click",function(){_.Cc(t);const n=e.$implicit;return _.fc().clearInput(n.index)}),_.Pc(4,"clear"),_.Tb(),_.Tb(),_.Ub(5,"div",27,28),_.Pc(7," Kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng t\xean l\u1edbp. "),_.Tb(),_.Tb()}if(2&t){const t=e.$implicit,n=e.index;_.Cb(2),_.oc("id","input-event-",n,""),_.nc("value",t.nameClass),_.Cb(3),_.oc("id","logerror",n,"")}}let ti=(()=>{class t{constructor(t,e,n,o,i,s){this.activeRoute=t,this.apiService=e,this.location=n,this.router=o,this.commonService=i,this.localizeService=s,this.Close=new _.o,this.showCreateGroup=!1,this.loading=!1,this.selectedAll=!1,this.viewErrorSeleted=!0,this.classroomObjs=[],this.dataUpgradeClass=[],this.sendDataUpgradeClass=[]}getClassGroup(){this.loading=!0,this.apiService.getClassGroup().subscribe(t=>{if(1==t.success){this.classroomData=t.data.classroomData;for(let t=0;t<this.classroomData.length;t++)for(let e=0;e<this.classroomData[t].classroomObjs.length;e++)this.classroomObjs.push(this.classroomData[t].classroomObjs[e]);this.loading=!1}else this.loading=!1})}UpgradeClassGroup(){this.loading=!0,this.apiService.UpgradeClassGroup(this.sendDataUpgradeClass).subscribe(t=>{1==t.success?(this.commonService.snackSuccess("T\u1ea1o l\u1edbp cho kh\xf3a m\u1edbi th\xe0nh c\xf4ng",""),this.CloseDialog()):(this.loading=!1,this.commonService.snackError("T\u1ea1o l\u1edbp cho kh\xf3a m\u1edbi kh\xf4ng th\xe0nh c\xf4ng",""))})}ValidateInput(t){var e=document.getElementById("input-event-"+t).value;""==e&&(document.getElementById("logerror"+t).style.display="block"),""!=e&&(document.getElementById("logerror"+t).style.display="none")}handleUpgrade(){if(0!=this.dataUpgradeClass.length){var t=!0;this.sendDataUpgradeClass=[];for(let n=0;n<this.dataUpgradeClass.length;n++){var e=document.getElementById("input-event-"+n).value;""==e&&(t=!1),this.ValidateInput(n),this.sendDataUpgradeClass.push({oldId:this.dataUpgradeClass[n].id,newName:e})}1==t&&this.UpgradeClassGroup()}else this.viewErrorSeleted=!1}changeValue(t,e){var n=this.classroomObjs[e].name,o=n.replace(/[^0-9]/g,""),i=n.replace(o[0],parseInt(o[0])+1);if(!0===t.checked)this.dataUpgradeClass.push({index:e,id:this.classroomObjs[e].id,nameClass:i});else if(!1===t.checked)for(let s=0;s<this.dataUpgradeClass.length;s++)this.dataUpgradeClass[s].index==e&&this.dataUpgradeClass.splice(s,1);this.dataUpgradeClass.sort(function(t,e){return t.index-e.index})}selectAll(t){this.selectedAll=t;for(let e=0;e<this.classroomObjs.length;e++)this.changeValue({checked:t},e)}clearInput(t){setTimeout(function(){var e;null===(e=document.getElementById("mat-check"+t+"-input"))||void 0===e||e.click()},0)}CloseDialog(){this.Close.emit()}ngOnInit(){this.getClassGroup()}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(c.a),_.Ob(T.a),_.Ob(o.i),_.Ob(c.i),_.Ob(P.a),_.Ob(h.e))},t.\u0275cmp=_.Ib({type:t,selectors:[["app-create-class-new-cousre"]],outputs:{Close:"Close"},decls:26,vars:7,consts:[[1,"body"],[1,"content","pl-4","pr-4","pt-2","pb-2"],[1,"select-group","mt-3"],[1,"header-select","d-flex","justify-content-between","align-items-center"],["class","clickable","style","color: #00A7D0;",3,"click",4,"ngIf"],[1,"pt-2"],["class","spinner-border spinner-border-sm","role","status","style","margin: 20px 50%;",4,"ngIf"],["class","row m-0",4,"ngIf"],["class","alert alert-danger mt-0 m-2","style","margin: auto;",4,"ngIf"],[1,"header-select"],["class","text-center m-3",4,"ngIf"],[1,"row","m-0"],["class","col-12 col-sm-6 p-2",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end","mt-3"],[1,"buttom-save","mr-3","clickable",3,"click"],[1,"buttom-clean","clickable",3,"click"],[1,"clickable",2,"color","#00A7D0",3,"click"],["role","status",1,"spinner-border","spinner-border-sm",2,"margin","20px 50%"],["class","col-12 col-sm-4 p-2",4,"ngFor","ngForOf"],[1,"col-12","col-sm-4","p-2"],["color","primary",3,"id","checked","change"],[1,"alert","alert-danger","mt-0","m-2",2,"margin","auto"],[1,"text-center","m-3"],[1,"col-12","col-sm-6","p-2"],[1,"d-flex","justify-content-around","align-items-center",2,"background-color","rgba(247, 247, 247, 1)","border-radius","3px"],["type","text","placeholder","Nh\u1eadp t\xean l\u1edbp",3,"id","value","keyup"],[1,"search-ver","clickable","m-1",3,"click"],[1,"alert","alert-danger","mt-1",2,"width","100%","margin","auto","padding","5px 10px","display","none",3,"id"],["ab",""]],template:function(t,e){1&t&&(_.Ub(0,"div",0),_.Ub(1,"div",1),_.Ub(2,"h4"),_.Pc(3,"Khi t\u1ea1o l\u1edbp cho kh\xf3a m\u1edbi h\u1ec7 th\u1ed1ng s\u1ebd t\u1ef1 \u0111\u1ed9ng t\u1ea1o l\u1edbp m\u1edbi v\xe0 copy danh s\xe1ch h\u1ecdc sinh t\u1eeb c\xe1c l\u1edbp \u1edf kh\xf3a c\u0169. Ch\u1ecdn c\xe1c l\u1edbp b\xean d\u01b0\u1edbi \u0111\u1ec3 th\u1ef1c hi\u1ec7n copy."),_.Tb(),_.Ub(4,"div",2),_.Ub(5,"div",3),_.Ub(6,"div"),_.Pc(7,"Ch\u1ecdn l\u1edbp"),_.Tb(),_.Nc(8,$o,2,0,"div",4),_.Nc(9,Jo,2,0,"div",4),_.Tb(),_.Ub(10,"div",5),_.Nc(11,Yo,1,0,"div",6),_.Nc(12,qo,2,1,"div",7),_.Nc(13,Ko,2,0,"div",8),_.Tb(),_.Tb(),_.Ub(14,"div",2),_.Ub(15,"div",9),_.Pc(16," C\xe1c l\u1edbp t\u01b0\u01a1ng \u1ee9ng s\u1ebd t\u1ea1o "),_.Tb(),_.Ub(17,"div",5),_.Nc(18,Xo,2,0,"div",10),_.Ub(19,"div",11),_.Nc(20,Zo,8,3,"div",12),_.Tb(),_.Tb(),_.Tb(),_.Ub(21,"div",13),_.Ub(22,"div",14),_.bc("click",function(){return e.handleUpgrade()}),_.Pc(23," TH\u1ef0C HI\u1ec6N "),_.Tb(),_.Ub(24,"div",15),_.bc("click",function(){return e.CloseDialog()}),_.Pc(25," \u0110\xd3NG "),_.Tb(),_.Tb(),_.Tb(),_.Tb()),2&t&&(_.Cb(8),_.mc("ngIf",0==e.selectedAll),_.Cb(1),_.mc("ngIf",1==e.selectedAll),_.Cb(2),_.mc("ngIf",!0===e.loading),_.Cb(1),_.mc("ngIf",!1===e.loading),_.Cb(1),_.mc("ngIf",0==e.viewErrorSeleted),_.Cb(5),_.mc("ngIf",0==e.dataUpgradeClass.length),_.Cb(2),_.mc("ngForOf",e.dataUpgradeClass))},directives:[o.m,o.l,N.a,I.a],styles:[".body[_ngcontent-%COMP%]{background:rgba(0,0,0,.5607843137254902);z-index:90;display:flex;left:0;top:0;position:fixed;height:100vh;width:100%}.content[_ngcontent-%COMP%]{top:50%;left:50%;border-radius:5px;transform:translate(-50%,-50%);position:fixed;background:#fff;width:650px;overflow:auto;max-height:85%}@media screen and (max-width:750px){.content[_ngcontent-%COMP%]{width:90%!important}}@media screen and (max-width:350px){.form-add-group[_ngcontent-%COMP%]{display:grid!important}}.add-homework--form[_ngcontent-%COMP%]{background-color:#fff;padding:10px 8px;border:1px solid #ececec;border-radius:5px}.add-homework--form__label[_ngcontent-%COMP%]{padding:.5rem;align-self:center;background-color:#f7f7f7;border:1px solid #e5e5e5;border-bottom-left-radius:.25rem;border-top-left-radius:.25rem}.add-homework--form__title[_ngcontent-%COMP%]{padding:.75rem;align-self:center;font-weight:400;line-height:1.5;color:#495057;font-size:1rem;background-color:#f7f7f7;border:1px solid #ced4da;border-radius:5px}.add-homework--form__input[_ngcontent-%COMP%]{height:100%;border-left:0;border-top-left-radius:0;border-bottom-left-radius:0}.add-homework--form__border[_ngcontent-%COMP%]{border-radius:4px;height:100%;border:1px solid #ced4da;border-left:none;border-top-left-radius:0;border-bottom-left-radius:0}.add-homework--form__content[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #f4f4f4;border-radius:3px;padding:10px}.select-group[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:5px}.header-select[_ngcontent-%COMP%]{border-bottom:1px solid #e5e5e5;padding:.4rem .8rem;background-color:#f7f7f7}.input-search[_ngcontent-%COMP%]{max-width:500px;height:34px;border:2px solid rgba(204,201,201,.8901960784313725);padding:.2rem .55rem;border-radius:3px;font-size:12px}.input-search[_ngcontent-%COMP%]::placeholder{opacity:.7}.input-search[_ngcontent-%COMP%]:focus{border:2px solid #0eafc0;outline:none}.search-ver[_ngcontent-%COMP%]{vertical-align:middle;font-size:26px;padding:4px;height:34px;width:34px;text-align:center;border-radius:3px}.search-ver-oke[_ngcontent-%COMP%]{float:left;background-color:#169bd5;border:none;border-radius:5px;color:#fff;padding:7px 10px}.buttom-clean[_ngcontent-%COMP%]{border:1px solid #000;border-radius:5px;width:90px;padding:8px 0;text-align:center}.buttom-save[_ngcontent-%COMP%]{background-color:#169bd5;border-radius:5px;width:100px;padding:9px 0;text-align:center;color:#fff}.cdk-overlay-pane[_ngcontent-%COMP%]{position:absolute;pointer-events:auto;box-sizing:border-box;z-index:1000;display:flex;max-width:100%;max-height:100%;min-width:100px!important}.select-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:3px;padding:3px;background-color:#fff;border:1px solid transparent}.select-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:2px solid #0eafc0;outline:none}"]}),t})();var ei=n("QibW");const ni=["nameGroup"],oi=["nameClass"];function ii(t,e){1&t&&(_.Ub(0,"div",28),_.Pc(1," B\u1ea1n ph\u1ea3i nh\u1eadp t\xean l\u1edbp h\u1ecdc. "),_.Tb())}function si(t,e){if(1&t&&(_.Ub(0,"span"),_.Pc(1),_.Tb()),2&t){const t=_.fc(2);_.Cb(1),_.Rc("- ",t.selectedYearValue+1,"")}}function ci(t,e){if(1&t&&(_.Ub(0,"mat-option",29),_.Pc(1),_.Nc(2,si,2,1,"span",30),_.Tb()),2&t){const t=e.$implicit,n=_.fc();_.mc("value",t),_.Cb(1),_.Rc("",t," "),_.Cb(1),_.mc("ngIf",n.selectedYearValue==t)}}function ri(t,e){1&t&&(_.Ub(0,"div",28),_.Pc(1," B\u1ea1n ph\u1ea3i ch\u1ecdn n\u0103m h\u1ecdc. "),_.Tb())}function ai(t,e){1&t&&_.Pb(0,"div",31)}function li(t,e){if(1&t&&(_.Ub(0,"mat-radio-button",29),_.Pc(1),_.Tb()),2&t){const t=_.fc().$implicit;_.mc("value",t.groupObj.id),_.Cb(1),_.Qc(t.groupObj.name)}}function bi(t,e){if(1&t&&(_.Ub(0,"div",34),_.Nc(1,li,2,2,"mat-radio-button",35),_.Tb()),2&t){const t=e.$implicit;_.Cb(1),_.mc("ngIf",null!=t.groupObj)}}function di(t,e){if(1&t){const t=_.Vb();_.Ub(0,"mat-radio-group",32),_.bc("ngModelChange",function(e){return _.Cc(t),_.fc().chosseGroup=e}),_.Ub(1,"div",3),_.Nc(2,bi,2,1,"div",33),_.Tb(),_.Tb()}if(2&t){const t=_.fc();_.mc("ngModel",t.chosseGroup),_.Cb(2),_.mc("ngForOf",t.classroomData)}}function hi(t,e){1&t&&(_.Ub(0,"div",36),_.Pc(1," B\u1ea1n ph\u1ea3i ch\u1ecdn t\xean nh\xf3m. "),_.Tb())}function mi(t,e){if(1&t){const t=_.Vb();_.Ub(0,"a",37),_.bc("click",function(){return _.Cc(t),_.fc().createGroup(!0)}),_.Pc(1,"+ Th\xeam nh\xf3m"),_.Tb()}}function gi(t,e){1&t&&_.Pb(0,"input",38,39)}function ui(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",40),_.bc("click",function(){return _.Cc(t),_.fc().SaveGroup()}),_.Pc(1,"OK"),_.Tb()}}function pi(t,e){if(1&t){const t=_.Vb();_.Ub(0,"mat-icon",41),_.bc("click",function(){return _.Cc(t),_.fc().createGroup(!1)}),_.Pc(1,"clear"),_.Tb()}}function fi(t,e){1&t&&(_.Ub(0,"div",42),_.Pc(1," B\u1ea1n ph\u1ea3i nh\u1eadp t\xean nh\xf3m. "),_.Tb())}function vi(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",43),_.bc("click",function(){return _.Cc(t),_.fc().SaveClassWithGroup()}),_.Pc(1," L\u01afU "),_.Tb()}}function Ci(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",43),_.bc("click",function(){return _.Cc(t),_.fc().UpdateClassWithGroup()}),_.Pc(1," C\u1eacP NH\u1eacT "),_.Tb()}}let ki=(()=>{class t{constructor(t,e,n,o,s,c,r){this.activeRoute=t,this.apiService=e,this.location=n,this.formBuilder=o,this.router=s,this.commonService=c,this.localizeService=r,this.form=new i.k({}),this.selectedYearValue="",this.loading=!1,this.DataUpDate={},this.Close=new _.o,this.showCreateGroup=!1,this.years=[],this.classroomData=[],this.storeClassData=[],this.totalStorage=0,this.validNameGroup=!0,this.validNameClass=!0,this.validYear=!0,this.validGroupId=!0,this.viewStatus=!0}getClassGroup(){this.loading=!0,this.apiService.getClassGroup().subscribe(t=>{1==t.success?(this.classroomData=t.data.classroomData,this.storeClassData=t.data.classroomData,this.totalStorage=t.data.classroomData,this.loading=!1):this.loading=!1})}SaveGroup(){this.loading=!0,0==this.form.controls.nameGroup.valid?(this.validNameGroup=!1,this.loading=!1):(this.showCreateGroup=!1,this.apiService.CreateClassGroup(this.form.controls.nameGroup.value).subscribe(t=>{1==t.success?(this.commonService.snackSuccess("Th\xeam nh\xf3m th\xe0nh c\xf4ng",""),this.getClassGroup(),this.loading=!1):(this.loading=!1,this.commonService.snackError("Th\xeam nh\xf3m kh\xf4ng th\xe0nh c\xf4ng",""))}))}SaveClassWithGroup(){var t={className:this.form.controls.nameClass.value,year:this.selectedYearValue+" - "+(this.selectedYearValue+1),groupId:this.chosseGroup};0==this.form.controls.nameClass.valid||0==this.form.controls.year.valid||0==this.form.controls.group.valid?(this.validNameClass=!1,this.validYear=!1,this.validGroupId=!1):this.apiService.CreateClassWithGroup(t).subscribe(t=>{1==t.success?(this.commonService.snackSuccess("Th\xeam L\u1edbp h\u1ecdc th\xe0nh c\xf4ng",""),this.CloseDialog()):this.commonService.snackError("Th\xeam l\u1edbp h\u1ecdc kh\xf4ng th\xe0nh c\xf4ng","")})}UpdateClassWithGroup(){var t={id:this.DataUpDate.id,className:this.form.controls.nameClass.value,year:this.selectedYearValue+" - "+(this.selectedYearValue+1),groupId:this.chosseGroup};0==this.form.controls.nameClass.valid||0==this.form.controls.year.valid||0==this.form.controls.group.valid?(this.validNameClass=!1,this.validYear=!1,this.validGroupId=!1):this.apiService.UpdateClassWithGroup(t).subscribe(t=>{1==t.success?(this.commonService.snackSuccess("S\u1eeda L\u1edbp h\u1ecdc th\xe0nh c\xf4ng",""),this.CloseDialog()):this.commonService.snackError("S\u1eeda l\u1edbp h\u1ecdc kh\xf4ng th\xe0nh c\xf4ng","")})}createGroup(t){this.form.controls.nameGroup.setValue(null),this.showCreateGroup=t}CloseDialog(){this.Close.emit(),this.DataUpDate={}}handleData(){var t=(new Date).getFullYear();for(let n=t-20;n<=t+40;n++)this.years.push(n);var e=null==this.DataUpDate?"":this.DataUpDate.year.split(" ")[0];this.selectedYearValue=""==e?t:parseInt(e),this.chosseGroup=null==this.DataUpDate?"":this.DataUpDate.groupId,this.form=this.formBuilder.group({nameClass:[null==this.DataUpDate?"":this.DataUpDate.className,i.z.required],nameGroup:["",i.z.required],group:[this.chosseGroup,i.z.required],year:[this.selectedYearValue,i.z.required]})}ngOnInit(){this.handleData(),this.getClassGroup(),this.viewStatus=null==this.DataUpDate}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(c.a),_.Ob(T.a),_.Ob(o.i),_.Ob(i.g),_.Ob(c.i),_.Ob(P.a),_.Ob(h.e))},t.\u0275cmp=_.Ib({type:t,selectors:[["app-create-class"]],viewQuery:function(t,e){if(1&t&&(_.Wc(ni,!0),_.Wc(oi,!0)),2&t){let t;_.xc(t=_.cc())&&(e.nameGroup=t.first),_.xc(t=_.cc())&&(e.nameClass=t.first)}},inputs:{DataUpDate:"DataUpDate"},outputs:{Close:"Close"},decls:40,vars:15,consts:[[1,"body"],[1,"content","pl-4","pr-4","pt-2","pb-2"],[3,"formGroup"],[1,"row","m-0"],[1,"col-4","col-md-3","add-homework--form__label","text-center"],[1,"p-0","m-0"],[1,"col-8","col-md-9","pl-0","pr-0"],["type","text","formControlName","nameClass","placeholder","",1,"form-control","add-homework--form__input"],["nameClass",""],["class","alert alert-danger mt-3","style","width: 100%; margin: auto;",4,"ngIf"],[1,"row","m-0","mt-3"],["formControlName","year",1,"form-control","add-homework--form__input",3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[1,"select-group","mt-3"],[1,"header-select"],[1,"pt-2"],["class","spinner-border spinner-border-sm","role","status","style","margin: 20px 50%;",4,"ngIf"],["formControlName","group",3,"ngModel","ngModelChange",4,"ngIf"],["class","alert alert-danger m-2","style","width: 100%; margin: auto;",4,"ngIf"],[1,"m-1","d-flex","align-items-center","form-add-group"],["class","m-1","style","color: #00A7D0;",3,"click",4,"ngIf"],["type","text","class","input-search m-1","formControlName","nameGroup","placeholder","T\xean nh\xf3m. VD: kh\u1ed1i 1, kh\u1ed1i 2",4,"ngIf"],["class","search-ver-oke clickable m-1",3,"click",4,"ngIf"],["class","search-ver clickable m-1",3,"click",4,"ngIf"],["class","alert alert-danger m-2","style","max-width: 250px;",4,"ngIf"],[1,"d-flex","justify-content-end","mt-3"],["class","buttom-save mr-3 clickable",3,"click",4,"ngIf"],[1,"buttom-clean","clickable",3,"click"],[1,"alert","alert-danger","mt-3",2,"width","100%","margin","auto"],[3,"value"],[4,"ngIf"],["role","status",1,"spinner-border","spinner-border-sm",2,"margin","20px 50%"],["formControlName","group",3,"ngModel","ngModelChange"],["class","col-12 col-sm-4 p-2",4,"ngFor","ngForOf"],[1,"col-12","col-sm-4","p-2"],[3,"value",4,"ngIf"],[1,"alert","alert-danger","m-2",2,"width","100%","margin","auto"],[1,"m-1",2,"color","#00A7D0",3,"click"],["type","text","formControlName","nameGroup","placeholder","T\xean nh\xf3m. VD: kh\u1ed1i 1, kh\u1ed1i 2",1,"input-search","m-1"],["nameGroup",""],[1,"search-ver-oke","clickable","m-1",3,"click"],[1,"search-ver","clickable","m-1",3,"click"],[1,"alert","alert-danger","m-2",2,"max-width","250px"],[1,"buttom-save","mr-3","clickable",3,"click"]],template:function(t,e){1&t&&(_.Ub(0,"div",0),_.Ub(1,"div",1),_.Ub(2,"form",2),_.Ub(3,"h4"),_.Pc(4,"Th\xeam l\u1edbp h\u1ecdc"),_.Tb(),_.Ub(5,"div",3),_.Ub(6,"div",4),_.Ub(7,"p",5),_.Pc(8,"T\xean l\u1edbp"),_.Tb(),_.Tb(),_.Ub(9,"div",6),_.Pb(10,"input",7,8),_.Tb(),_.Nc(12,ii,2,0,"div",9),_.Tb(),_.Ub(13,"div",10),_.Ub(14,"div",4),_.Ub(15,"p",5),_.Pc(16,"N\u0103m h\u1ecdc"),_.Tb(),_.Tb(),_.Ub(17,"div",6),_.Ub(18,"mat-select",11),_.bc("valueChange",function(t){return e.selectedYearValue=t}),_.Nc(19,ci,3,3,"mat-option",12),_.Tb(),_.Tb(),_.Nc(20,ri,2,0,"div",9),_.Tb(),_.Ub(21,"div",13),_.Ub(22,"div",14),_.Pc(23," Ch\u1ecdn nh\xf3m "),_.Tb(),_.Ub(24,"div",15),_.Nc(25,ai,1,0,"div",16),_.Nc(26,di,3,2,"mat-radio-group",17),_.Nc(27,hi,2,0,"div",18),_.Ub(28,"div",19),_.Nc(29,mi,2,0,"a",20),_.Nc(30,gi,2,0,"input",21),_.Ub(31,"div"),_.Nc(32,ui,2,0,"div",22),_.Nc(33,pi,2,0,"mat-icon",23),_.Tb(),_.Tb(),_.Nc(34,fi,2,0,"div",24),_.Tb(),_.Tb(),_.Ub(35,"div",25),_.Nc(36,vi,2,0,"div",26),_.Nc(37,Ci,2,0,"div",26),_.Ub(38,"div",27),_.bc("click",function(){return e.CloseDialog()}),_.Pc(39," \u0110\xd3NG "),_.Tb(),_.Tb(),_.Tb(),_.Tb(),_.Tb()),2&t&&(_.Cb(2),_.mc("formGroup",e.form),_.Cb(10),_.mc("ngIf",e.form.controls.nameClass.invalid&&(e.form.controls.nameClass.dirty||e.form.controls.nameClass.touched||0==e.validNameClass)),_.Cb(6),_.mc("value",e.selectedYearValue),_.Cb(1),_.mc("ngForOf",e.years),_.Cb(1),_.mc("ngIf",e.form.controls.year.invalid&&(e.form.controls.year.dirty||e.form.controls.year.touched||0==e.validYear)),_.Cb(5),_.mc("ngIf",!0===e.loading),_.Cb(1),_.mc("ngIf",!1===e.loading),_.Cb(1),_.mc("ngIf",e.form.controls.group.invalid&&(e.form.controls.group.dirty||e.form.controls.group.touched||0==e.validGroupId)),_.Cb(2),_.mc("ngIf",0==e.showCreateGroup),_.Cb(1),_.mc("ngIf",1==e.showCreateGroup),_.Cb(2),_.mc("ngIf",1==e.showCreateGroup),_.Cb(1),_.mc("ngIf",1==e.showCreateGroup),_.Cb(1),_.mc("ngIf",1==e.showCreateGroup&&e.form.controls.nameGroup.invalid&&(e.form.controls.nameGroup.dirty||e.form.controls.nameGroup.touched||0==e.validNameGroup)),_.Cb(2),_.mc("ngIf",1==e.viewStatus),_.Cb(1),_.mc("ngIf",0==e.viewStatus))},directives:[i.B,i.s,i.l,i.d,i.r,i.j,o.m,Ot.a,o.l,v.n,ei.b,ei.a,I.a],styles:[".body[_ngcontent-%COMP%]{background:rgba(0,0,0,.5607843137254902);z-index:90;display:flex;left:0;top:0;position:fixed;height:100vh;width:100%}.content[_ngcontent-%COMP%]{top:50%;left:50%;border-radius:5px;transform:translate(-50%,-50%);position:fixed;background:#fff;width:650px;max-height:90%;overflow:auto}@media screen and (max-width:750px){.content[_ngcontent-%COMP%]{width:90%!important}}@media screen and (max-width:350px){.form-add-group[_ngcontent-%COMP%]{display:grid!important}}.add-homework--form[_ngcontent-%COMP%]{background-color:#fff;padding:10px 8px;border:1px solid #ececec;border-radius:5px}.add-homework--form__label[_ngcontent-%COMP%]{padding:.5rem;align-self:center;background-color:#f7f7f7;border:1px solid #e5e5e5;border-bottom-left-radius:.25rem;border-top-left-radius:.25rem}.add-homework--form__title[_ngcontent-%COMP%]{padding:.75rem;align-self:center;font-weight:400;line-height:1.5;color:#495057;font-size:1rem;background-color:#f7f7f7;border:1px solid #ced4da;border-radius:5px}.add-homework--form__input[_ngcontent-%COMP%]{height:100%;border-left:0;border-top-left-radius:0;border-bottom-left-radius:0}.add-homework--form__border[_ngcontent-%COMP%]{border-radius:4px;height:100%;border:1px solid #ced4da;border-left:none;border-top-left-radius:0;border-bottom-left-radius:0}.add-homework--form__content[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #f4f4f4;border-radius:3px;padding:10px}.select-group[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:5px}.header-select[_ngcontent-%COMP%]{border-bottom:1px solid #e5e5e5;padding:.4rem .8rem;background-color:#f7f7f7}.input-search[_ngcontent-%COMP%]{max-width:500px;height:34px;border:2px solid rgba(204,201,201,.8901960784313725);padding:.2rem .55rem;border-radius:3px;font-size:12px}.input-search[_ngcontent-%COMP%]::placeholder{opacity:.7}.input-search[_ngcontent-%COMP%]:focus{border:2px solid #0eafc0;outline:none}.search-ver[_ngcontent-%COMP%]{vertical-align:middle;font-size:26px;padding:4px;height:34px;width:34px;text-align:center;border-radius:3px;background:#dfdfdf}.search-ver-oke[_ngcontent-%COMP%]{float:left;background-color:#169bd5;border:none;border-radius:5px;color:#fff;padding:7px 10px}.buttom-clean[_ngcontent-%COMP%]{border:1px solid #000;border-radius:5px;padding:8px 0}.buttom-clean[_ngcontent-%COMP%], .buttom-save[_ngcontent-%COMP%]{width:90px;text-align:center}.buttom-save[_ngcontent-%COMP%]{background-color:#169bd5;border-radius:5px;padding:9px 0;color:#fff}.cdk-overlay-pane[_ngcontent-%COMP%]{position:absolute;pointer-events:auto;box-sizing:border-box;z-index:1000;display:flex;max-width:100%;max-height:100%;min-width:100px!important}"]}),t})();const wi=["shareClass"];function xi(t,e){1&t&&_.Pb(0,"azt-loading-effect")}function _i(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",25),_.Ub(1,"azt-information-class-box",26),_.bc("ChangeEvent",function(e){return _.Cc(t),_.fc(5).EventToAztInformation(e)}),_.Tb(),_.Tb()}if(2&t){const t=e.$implicit;_.Cb(1),_.mc("Classroom",t)}}function Ti(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",27),_.Ub(1,"azt-information-class-box",26),_.bc("ChangeEvent",function(e){return _.Cc(t),_.fc(5).EventToAztInformation(e)}),_.Tb(),_.Tb()}if(2&t){const t=e.$implicit;_.Cb(1),_.mc("Classroom",t)}}function Pi(t,e){1&t&&(_.Ub(0,"div",28),_.Pc(1," Kh\xf4ng c\xf3 l\u1edbp n\xe0o. "),_.Tb())}function Oi(t,e){if(1&t&&(_.Ub(0,"div"),_.Ub(1,"h4"),_.Ub(2,"span"),_.Pc(3),_.Tb(),_.Tb(),_.Ub(4,"div",21),_.Nc(5,_i,2,1,"div",22),_.Nc(6,Ti,2,1,"div",23),_.Tb(),_.Nc(7,Pi,2,0,"div",24),_.Tb()),2&t){const t=_.fc().$implicit;_.Cb(3),_.Qc(t.groupObj.name),_.Cb(2),_.mc("ngForOf",t.classroomObjs),_.Cb(1),_.mc("ngForOf",t.classroomObjs),_.Cb(1),_.mc("ngIf",0==t.classroomObjs.length)}}const Ui=function(){return[]};function yi(t,e){if(1&t&&(_.Ub(0,"div",20),_.Nc(1,Oi,8,4,"div",16),_.Tb()),2&t){const t=e.$implicit;_.Cb(1),_.mc("ngIf",null!=t.groupObj&&t.classroomObjs!=_.qc(1,Ui))}}function Si(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div"),_.Nc(1,yi,2,2,"div",18),_.Ub(2,"div",19),_.bc("click",function(){return _.Cc(t),_.fc(2).storage(!0)}),_.Pc(3),_.Tb(),_.Tb()}if(2&t){const t=_.fc(2);_.Cb(1),_.mc("ngForOf",t.classroomData),_.Cb(2),_.Rc(" L\u01afU TR\u1eee (",t.totalStorage,") ")}}function Mi(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",25),_.Ub(1,"azt-information-class-box",29),_.bc("ChangeEvent",function(e){return _.Cc(t),_.fc(3).EventToAztInformation(e)}),_.Tb(),_.Tb()}if(2&t){const t=e.$implicit;_.Cb(1),_.mc("Screen","Storage")("Classroom",t)}}function Ii(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",27),_.Ub(1,"azt-information-class-box",29),_.bc("ChangeEvent",function(e){return _.Cc(t),_.fc(3).EventToAztInformation(e)}),_.Tb(),_.Tb()}if(2&t){const t=e.$implicit;_.Cb(1),_.mc("Screen","Storage")("Classroom",t)}}function ji(t,e){if(1&t&&(_.Ub(0,"div",20),_.Ub(1,"h4"),_.Ub(2,"span"),_.Pc(3),_.Tb(),_.Tb(),_.Ub(4,"div",21),_.Nc(5,Mi,2,2,"div",22),_.Nc(6,Ii,2,2,"div",23),_.Tb(),_.Tb()),2&t){const t=_.fc(2);_.Cb(3),_.Rc("L\u01afU TR\u1eee (",t.totalStorage,")"),_.Cb(2),_.mc("ngForOf",t.storeClassData),_.Cb(1),_.mc("ngForOf",t.storeClassData)}}function Ni(t,e){if(1&t){const t=_.Vb();_.Ub(0,"div",5),_.Ub(1,"div",6),_.Ub(2,"div",7),_.Ub(3,"input",8,9),_.bc("keyup.enter",function(){return _.Cc(t),_.fc().search()}),_.Tb(),_.Ub(5,"mat-icon",10),_.bc("click",function(){return _.Cc(t),_.fc().search()}),_.Pc(6," search "),_.Tb(),_.Tb(),_.Ub(7,"div",11),_.bc("click",function(){return _.Cc(t),_.fc().createClass()}),_.Pc(8,"+ T\u1ea1o l\u1edbp"),_.Tb(),_.Ub(9,"div",12),_.bc("click",function(){return _.Cc(t),_.fc().createClassNewCousre()}),_.Pc(10,"+ T\u1ea1o l\u1edbp cho kh\xf3a m\u1edbi"),_.Tb(),_.Tb(),_.Ub(11,"div",13),_.Ub(12,"div",14),_.Ub(13,"input",8,15),_.bc("keyup.enter",function(){return _.Cc(t),_.fc().search()}),_.Tb(),_.Ub(15,"mat-icon",10),_.bc("click",function(){return _.Cc(t),_.fc().search()}),_.Pc(16," search "),_.Tb(),_.Tb(),_.Tb(),_.Nc(17,Si,4,2,"div",16),_.Nc(18,ji,7,3,"div",17),_.Tb()}if(2&t){const t=_.fc();_.Cb(17),_.mc("ngIf",0==t.ShowStorage),_.Cb(1),_.mc("ngIf",1==t.ShowStorage)}}function Di(t,e){if(1&t){const t=_.Vb();_.Ub(0,"app-create-class-new-cousre",30),_.bc("Close",function(){return _.Cc(t),_.fc().CloseDialog("1")}),_.Tb()}}function Fi(t,e){if(1&t){const t=_.Vb();_.Ub(0,"app-create-class",31),_.bc("Close",function(){return _.Cc(t),_.fc().CloseDialog("2")}),_.Tb()}if(2&t){const t=_.fc();_.mc("DataUpDate",t.dataUpDateClass)}}const Ei=[{path:"",component:Io,canActivate:[m.a],children:[{path:"",canActivateChild:[m.a],children:[{path:"classes",component:Tt},{path:"homework-list/:id",component:$e},{path:"add-new-homework/:id",component:at},{path:"score-list/:class_id/:id",component:Rn},{path:"export-homework/:class_id/:id",component:Me},{path:"mark-exercise/:id",component:Mo},{path:"mark-exercise-remake/:id",component:To},{path:"create-homework-success/:ids",component:Lo},{path:"content-store",component:Qt},{path:"",component:Tt},{path:"classes-new",component:(()=>{class t{constructor(t,e,n,o,i,s){this.activeRoute=t,this.apiService=e,this.location=n,this.router=o,this.commonService=i,this.localizeService=s,this.isLoading=!1,this.showCreateClass=!1,this.showCreateClassNewCousre=!1,this.classroomData=[],this.storeClassData=[],this.totalStorage=0,this.ShowStorage=!1,this.back_link="/admin/testbank/dashboard"}getClassGroup(){this.isLoading=!0,this.apiService.getClassGroup().subscribe(t=>{1==t.success?(this.classroomData=t.data.classroomData,this.storeClassData=t.data.storeClassData,this.totalStorage=t.data.totalStorage,this.isLoading=!1):(this.isLoading=!1,this.commonService.myTranslate([t.message]).subscribe(e=>{this.commonService.snackError(e[t.message],"")}))})}EventToAztInformation(t){""!=t?"UpDate"==t.type&&(this.showCreateClass=!0,this.dataUpDateClass={id:t.id,className:t.className,year:t.year,groupId:t.groupId}):this.getClassGroup()}search(){""!=this.shareClass.nativeElement.value?(this.isLoading=!0,this.apiService.SearchClassGroupObjs(this.shareClass.nativeElement.value).subscribe(t=>{1==t.success?(this.classroomData=t.data.classroomData,this.storeClassData=t.data.storeClassData,this.totalStorage=t.data.totalStorage,this.isLoading=!1):(this.isLoading=!1,this.commonService.snackError("Kh\xf4ng t\xecm th\u1ea5y l\u1edbp b\u1ea1n b\u1ea1n c\u1ea7n t\xecm.",""))})):this.getClassGroup()}CloseDialog(t){1==t?this.showCreateClassNewCousre=!1:2==t&&(this.showCreateClass=!1,this.dataUpDateClass=void 0),this.getClassGroup()}createClass(){this.showCreateClass=!0}createClassNewCousre(){this.showCreateClassNewCousre=!0}storage(t){1==t&&(this.back_link="",this.commonService.myNavigationWithQueryString("/admin/homework/classes-new","?screen=storage"),this.ShowStorage=!0),0==t&&(this.back_link="/admin/testbank/dashboard",this.commonService.myNavigationWithQueryString("/admin/homework/classes-new",""),this.ShowStorage=!1)}ngOnInit(){this.getClassGroup(),"storage"==this.commonService.getMyQueryParam("screen")&&(this.ShowStorage=!0,this.back_link=""),this.commonService.translateMetaData({title:"lang_cms_homework_class_list_title",description:"lang_cms_homework_class_list_description",image:"lang_cms_test_image"})}}return t.\u0275fac=function(e){return new(e||t)(_.Ob(c.a),_.Ob(T.a),_.Ob(o.i),_.Ob(c.i),_.Ob(P.a),_.Ob(h.e))},t.\u0275cmp=_.Ib({type:t,selectors:[["app-classes-new"]],viewQuery:function(t,e){if(1&t&&_.Wc(wi,!0),2&t){let t;_.xc(t=_.cc())&&(e.shareClass=t.first)}},decls:6,vars:7,consts:[[3,"headerTitle","back_link","checkUrlFunction","RedirectToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[3,"Close",4,"ngIf"],[3,"DataUpDate","Close",4,"ngIf"],[1,"ml-2","mr-2","mb-4"],[1,"d-flex","justify-content-end","align-items-center","mt-2","mb-2"],[1,"m-1","d-none","d-sm-block"],["type","text","placeholder","L\u1ecdc theo t\xean l\u1edbp",1,"input-search",3,"keyup.enter"],["shareClass",""],[1,"search-ver","clickable",3,"click"],[1,"buttom-created-class","clickable","m-1",3,"click"],[1,"buttom-created","clickable","m-1",3,"click"],[1,"d-sm-none","d-flex","justify-content-end"],[1,"m-1"],["filterByClass",""],[4,"ngIf"],["class","m-1 mt-3",4,"ngIf"],["class","m-1 mt-3",4,"ngFor","ngForOf"],[1,"clickable","m-1","mt-3",2,"color","#00A7D0",3,"click"],[1,"m-1","mt-3"],[1,"row","m-0"],["class","col-4 col-lg-3 d-none d-md-block p-1",4,"ngFor","ngForOf"],["class","col-12 col-sm-6 d-md-none p-1",4,"ngFor","ngForOf"],["class","text-center p-2",4,"ngIf"],[1,"col-4","col-lg-3","d-none","d-md-block","p-1"],[3,"Classroom","ChangeEvent"],[1,"col-12","col-sm-6","d-md-none","p-1"],[1,"text-center","p-2"],[3,"Screen","Classroom","ChangeEvent"],[3,"Close"],[3,"DataUpDate","Close"]],template:function(t,e){if(1&t&&(_.Ub(0,"header-backend",0),_.bc("RedirectToLink",function(){return e.storage(!1)}),_.Tb(),_.Nc(1,xi,1,0,"azt-loading-effect",1),_.Nc(2,Ni,19,2,"ng-template",null,2,_.Oc),_.Nc(4,Di,1,0,"app-create-class-new-cousre",3),_.Nc(5,Fi,1,1,"app-create-class",4)),2&t){const t=_.yc(3);_.mc("headerTitle","Danh s\xe1ch l\u1edbp")("back_link",e.back_link)("checkUrlFunction",e.ShowStorage),_.Cb(1),_.mc("ngIf",1==e.isLoading)("ngIfElse",t),_.Cb(3),_.mc("ngIf",!0===e.showCreateClassNewCousre),_.Cb(1),_.mc("ngIf",!0===e.showCreateClass)}},directives:[D.a,o.m,U.a,I.a,o.l,Wo,ti,ki],styles:[".input-search[_ngcontent-%COMP%]{max-width:500px;height:34px;border:2px solid rgba(204,201,201,.8901960784313725);padding:.2rem .55rem;border-radius:3px;font-size:12px}.input-search[_ngcontent-%COMP%]::placeholder{opacity:.7}.input-search[_ngcontent-%COMP%]:focus{border:2px solid #0eafc0;outline:none}.buttom-created-class[_ngcontent-%COMP%]{color:#fff;width:85px;background-color:#2ec915;border-radius:3px}.buttom-created[_ngcontent-%COMP%], .buttom-created-class[_ngcontent-%COMP%]{box-shadow:none;text-align:center;padding:7px 0}.buttom-created[_ngcontent-%COMP%]{width:175px;background-color:#fff;box-sizing:border-box;border:1px solid #ebebeb;border-radius:3px}h4[_ngcontent-%COMP%]{width:100%;border-bottom:1px solid #cbcbcb;line-height:.1em;margin:10px 0 20px}h4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#ecf0f5;padding:0 10px 0 0}.clickable[_ngcontent-%COMP%]{font-size:14px}.search-ver[_ngcontent-%COMP%]{vertical-align:middle;font-size:26px;padding:4px;height:34px;width:34px;text-align:center;border-radius:3px;background:#dfdfdf}"]}),t})()}]}]}];let Hi=(()=>{class t{}return t.\u0275mod=_.Mb({type:t}),t.\u0275inj=_.Lb({factory:function(e){return new(e||t)},imports:[[c.l.forChild(Ei)],c.l,h.c]}),t})(),zi=(()=>{class t{}return t.\u0275mod=_.Mb({type:t}),t.\u0275inj=_.Lb({factory:function(e){return new(e||t)},imports:[[c.l,o.c,l.a,r.b,Hi,i.m,i.x,s.f,b.a,a.a,d.a]]}),t})()}}]);